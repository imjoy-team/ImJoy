(function(e){function t(t){for(var i,s,r=t[0],l=t[1],c=t[2],d=0,m=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},o={app:0},a=[];function s(e){return r.p+"static/js/"+({}[e]||e)+"."+{"chunk-2d0a3577":"52695fe3","chunk-2d0a43df":"89092b46","chunk-2d0aab07":"36081eee","chunk-2d0abc00":"adf852a6","chunk-2d0ae937":"bbe26be1","chunk-2d0aeb45":"1079e0d5","chunk-2d0afa49":"0c6f6b5c","chunk-2d0b2762":"adfd2192","chunk-2d0b6187":"237e67ee","chunk-2d0ba136":"f2de8722","chunk-2d0bb267":"8a29582f","chunk-2d0bcec1":"0b1ad612","chunk-2d0bff92":"112c6395","chunk-2d0c0494":"1c3abbee","chunk-2d0c0a09":"f8d15c33","chunk-2d0c1ed0":"143dcfa5","chunk-2d0c4313":"846700b7","chunk-2d0c46d1":"67fa7767","chunk-2d0c512b":"ee4005d4","chunk-2d0cf16e":"aaea3821","chunk-2d0d056d":"19ee07b3","chunk-2d0d0645":"861a4182","chunk-2d0d2f22":"dcacefad","chunk-2d0d7e63":"0454c257","chunk-2d0e1b57":"40b73489","chunk-2d0e1fbe":"dfa20e48","chunk-2d0e22d6":"c56bd24d","chunk-2d0e542a":"9db3385b","chunk-2d0e57ec":"ea6ad1a2","chunk-2d0e6553":"37a59f2e","chunk-2d0ea098":"f09dae87","chunk-2d208ac5":"4ddd1d05","chunk-2d209408":"6ef40ff1","chunk-2d20f745":"dd999c95","chunk-2d20ff23":"8022e88a","chunk-2d2138c7":"33a13949","chunk-2d217e5b":"37214ca7","chunk-2d21b84a":"01558b97","chunk-2d21dcd2":"1bc09844","chunk-2d21f327":"ae31919e","chunk-2d2214b3":"e2f51ed8","chunk-2d221a34":"33616e19","chunk-2d22502a":"6f8d4137","chunk-2d228ca6":"81a34af4","chunk-2d2295e9":"71a8dcce","chunk-2d22c171":"1ba7379d","chunk-2d22c2b8":"eb2ab85d","chunk-2d22ca58":"73e28be9","chunk-2d2311f7":"240856b8","chunk-2d2371be":"0f680354","chunk-2d237ee7":"e8531926","chunk-2d238465":"50bac7d7","chunk-7532b3ea":"b5715162"}[e]+".js"}function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=o[e]=[t,i]}));t.push(n[2]=i);var a,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=s(e);var c=new Error;a=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,n[1](c)}o[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,document.head.appendChild(l)}return Promise.all(t)},r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("651e"),o=n.n(i);o.a},"0378":function(e,t,n){},"0529":function(e,t,n){"use strict";var i=n("2d93"),o=n.n(i);o.a},"0b45":function(e,t,n){},"0d19":function(e,t,n){"use strict";var i=n("342e"),o=n.n(i);o.a},1246:function(e,t,n){},"147d":function(e,t){e.exports='<docs lang="markdown">\n[TODO: write documentation for this plugin.]\n</docs>\n\n<config lang="json">\n{\n  "name": "Untitled Plugin",\n  "type": "native-python",\n  "version": "0.1.0",\n  "description": "[TODO: describe this plugin with one sentence.]",\n  "tags": [],\n  "ui": "",\n  "cover": "",\n  "inputs": null,\n  "outputs": null,\n  "flags": [],\n  "icon": "extension",\n  "api_version": "0.1.7",\n  "env": "",\n  "permissions": [],\n  "requirements": [],\n  "dependencies": []\n}\n</config>\n\n<script lang="python">\nfrom imjoy import api\n\n\nclass ImJoyPlugin():\n    def setup(self):\n        api.log(\'initialized\')\n\n    def run(self, ctx):\n        api.alert(\'hello world.\')\n\napi.export(ImJoyPlugin())\n<\/script>\n'},"1eb5":function(e,t,n){"use strict";var i=n("be73"),o=n.n(i);o.a},2733:function(e,t,n){"use strict";var i=n("5e87"),o=n.n(i);o.a},"27e7":function(e,t,n){"use strict";var i=n("4324"),o=n.n(i);o.a},"2a06":function(e,t,n){"use strict";var i=n("edce"),o=n.n(i);o.a},"2d2f":function(e,t,n){"use strict";var i=n("42cf"),o=n.n(i);o.a},"2d93":function(e,t,n){},3145:function(e,t,n){"use strict";var i=n("4be3"),o=n.n(i);o.a},"32c4":function(e,t,n){"use strict";var i=n("a25d"),o=n.n(i);o.a},"342e":function(e,t,n){},4003:function(e,t,n){},"42cf":function(e,t,n){},4324:function(e,t,n){},"464c":function(e,t){e.exports='<docs lang="markdown">\n[TODO: write documentation for this plugin.]\n</docs>\n\n<config lang="json">\n{\n    "name": "Untitled Plugin",\n    "type": "jupyter-notebook",\n    "version": "0.1.0",\n    "api_version": "0.1.2",\n    "description": "[TODO: describe this plugin with one sentence.]",\n    "tags": [],\n    "ui": "",\n    "inputs": null,\n    "outputs": null,\n    "flags": [],\n    "icon": "extension",\n    "env": "",\n    "requirements": [],\n    "dependencies": []\n}\n</config>\n\n<script lang="python">\nfrom imjoy import api\n\n\nclass ImJoyPlugin():\n    def setup(self):\n        api.log(\'initialized\')\n\n    def run(self, ctx):\n        api.alert(\'hello world.\')\n\napi.export(ImJoyPlugin())\n<\/script>\n'},"4be3":function(e,t,n){},5363:function(e,t,n){"use strict";var i=n("b109"),o=n.n(i);o.a},"56d7":function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"GenericWindow",(function(){return Cn})),n.d(i,"ImageWindow",(function(){return On})),n.d(i,"ImageListWindow",(function(){return Fn})),n.d(i,"PanelWindow",(function(){return Rn})),n.d(i,"MarkdownWindow",(function(){return Hn})),n.d(i,"PluginEditorWindow",(function(){return ti})),n.d(i,"LogWindow",(function(){return ri})),n.d(i,"FilesWindow",(function(){return _i})),n.d(i,"UrlListWindow",(function(){return wi})),n.d(i,"ImageCompareWindow",(function(){return Ai})),n.d(i,"TerminalWindow",(function(){return qi})),n.d(i,"JoyWindow",(function(){return Gi})),n.d(i,"SchemaIOWindow",(function(){return lo}));var o=n("a026"),a=n("8c4f"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"imjoy noselect"},[n("md-app",[n("md-app-toolbar",{staticClass:"md-dense app-toolbar",attrs:{"md-elevation":"0"}},[e.menuVisible?e._e():n("md-button",{staticClass:"md-primary md-icon-button",on:{click:function(t){e.menuVisible=!0}}},[n("md-icon",[e._v("menu")])],1),e._v(" "),!e.menuVisible&&e.screenWidth>400?n("md-button",{staticClass:"site-title-small",on:{click:function(t){e.$router.push("/")}}},[n("img",{staticClass:"site-title-small",attrs:{src:"static/img/imjoy-logo-black.svg",alt:"ImJoy"}}),e._v(" "),n("md-tooltip",[e._v("ImJoy home")])],1):e._e(),e._v(" "),e.workspace_dropping&&e.screenWidth>400?n("md-button",[e._v("\n        Drop files to the workspace.\n      ")]):e.screenWidth>500&&e.status_text&&e.status_text.length?n("span",{staticClass:"status-text",class:e.status_text.includes("rror")||e.status_text.includes("Traceback")||e.status_text.includes("Fail")?"error-message":"",style:{"max-width":e.menuVisible?"calc( 100vw - 500px) !important":"calc(100vw - 250px) !important"},on:{click:function(t){e.showAlert(null,e.status_text)}}},[e._v("\n        "+e._s(e.status_text)+"\n      ")]):n("span",{staticClass:"subheader-title md-medium-hide",staticStyle:{flex:"1"}},[e._v("Deep Learning Made Easy!")]),e._v(" "),n("div",{staticClass:"md-toolbar-section-end menubar-icons"},[e.wm.selected_window&&e.wm.selected_window.standalone?n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(t){e.wm.selected_window.close()}}},[n("md-icon",[e._v("close")]),e._v(" "),n("md-tooltip",[e._v("Close window:\n            "+e._s(e.wm.selected_window.name.slice(0,30)+"(#"+e.wm.selected_window.index+")"))])],1):e._e(),e._v(" "),e.wm.selected_window&&e.wm.selected_window.standalone&&e.wm.selected_window.loaders.length>0?n("md-menu",{attrs:{"md-size":"big","md-direction":"bottom-end"}},[n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("more_vert")]),e._v(" "),n("md-tooltip",[e._v("Current window:\n              "+e._s(e.wm.selected_window.name.slice(0,30)+"(#"+e.wm.selected_window.index+")"))])],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{attrs:{disabled:!0}},[e._v("\n              "+e._s(e.wm.selected_window.name.slice(0,30)+"(#"+e.wm.selected_window.index+")")+"\n            ")]),e._v(" "),e._l(e.wm.selected_window.loaders,(function(t,i){return n("md-menu-item",{key:i,on:{click:function(n){e.wm.registered_loaders&&e.wm.registered_loaders[t](e.wm.selected_window.data)}}},[n("span",[e._v(e._s(i))]),e._v(" "),n("md-icon",[e._v("play_arrow")])],1)}))],2)],1):e._e(),e._v(" "),e._l(e.windows.slice(0,e.max_window_buttons),(function(t,i){return n("md-button",{key:t.id,staticClass:"md-icon-button",attrs:{disabled:e.wm.selected_window===t},on:{click:function(n){e.wm.selectWindow(t)}}},[n("md-icon",[e._v(e._s("filter_"+(i+1)))]),e._v(" "),n("md-tooltip",{staticClass:"md-xsmall-hide"},[e._v(e._s(t.name.slice(0,30)+"(#"+t.index+")"))])],1)})),e._v(" "),e.windows.length>e.max_window_buttons?n("md-menu",[e.max_window_buttons>=9?n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("filter_9_plus")])],1):n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("filter")])],1),e._v(" "),n("md-menu-content",[e._l(e.windows.slice(e.max_window_buttons),(function(t){return n("md-menu-item",{key:t.id,attrs:{disabled:e.wm.selected_window===t},on:{click:function(n){e.wm.selectWindow(t)}}},[n("span",[e._v(e._s(t.name.slice(0,30)+"(#"+t.index+")"))]),n("md-icon",[e._v("forward")])],1)})),e._v(" "),n("md-divider"),e._v(" "),"grid"!==e.wm.window_mode?n("md-menu-item",{staticClass:"md-accent",on:{click:function(t){e.wm.closeAll()}}},[n("md-icon",[e._v("cancel")]),n("span",[e._v("Close All")]),e._v(" "),n("md-tooltip",[e._v("Close all windows")])],1):e._e()],2)],1):e._e(),e._v(" "),"grid"===e.wm.window_mode&&e.windows.length>0?n("md-menu",[n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("picture_in_picture")]),e._v(" "),n("md-tooltip",[e._v("Workspace")])],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{class:e.wm.selected_window?"md-primary":"",attrs:{disabled:!e.wm.selected_window},on:{click:function(t){e.wm.selected_window=null}}},[n("md-icon",[e._v("picture_in_picture")]),n("span",[e._v("Workspace")])],1),e._v(" "),n("md-menu-item",{staticClass:"md-accent",on:{click:function(t){e.wm.closeAll()}}},[n("md-icon",[e._v("cancel")]),n("span",[e._v("Close All")]),e._v(" "),n("md-tooltip",[e._v("Close all windows")])],1)],1)],1):e._e(),e._v(" "),n("engine-control-panel",{attrs:{"engine-manager":e.em},on:{"start-terminal":e.startTerminal}}),e._v(" "),n("md-menu",[e.latest_version&&!e.is_latest_version?n("md-button",{staticClass:"md-icon-button md-accent",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("error_outline")])],1):n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("details")])],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{attrs:{disabled:!0},on:{click:function(t){e.showSettingsDialog=!0}}},[n("md-icon",[e._v("settings")]),e._v("Settings\n            ")],1),e._v(" "),n("md-menu-item",{staticClass:"md-primary",attrs:{href:"/lite",target:"_blank"}},[n("md-icon",[e._v("open_in_new")]),e._v("ImJoy-Lite\n            ")],1),e._v(" "),n("md-menu-item",{staticClass:"md-primary",attrs:{href:"/docs/",target:"_blank"}},[n("md-icon",[e._v("library_books")]),e._v("Documentation\n            ")],1),e._v(" "),n("md-menu-item",{staticClass:"md-primary",attrs:{href:"/docs/#/api?id=api-functions",target:"_blank"}},[n("md-icon",[e._v("toc")]),e._v("API Functions\n            ")],1),e._v(" "),n("md-menu-item",{staticClass:"md-primary",attrs:{href:"https://forum.image.sc/tags/imjoy",target:"_blank"}},[n("md-icon",[e._v("help")]),e._v("Forum\n            ")],1),e._v(" "),n("md-menu-item",{staticClass:"md-primary",attrs:{href:"https://github.com/imjoy-team/ImJoy",target:"_blank"}},[n("md-icon",[e._v("code")]),e._v("Github\n            ")],1),e._v(" "),n("md-menu-item",{staticClass:"md-primary",on:{click:function(t){e.showAboutDialog=!0}}},[n("md-icon",[e._v("info")]),e._v("About\n            ")],1),e._v(" "),n("md-menu-item",{staticClass:"md-primary",on:{click:e.restartImJoy}},[n("md-icon",[e._v("autorenew")]),e._v(" "),n("span",[e._v("Restart ImJoy")]),e._v(" "),n("md-tooltip",[e._v("click to reload")])],1),e._v(" "),n("md-menu-item",[e.latest_version&&e.is_latest_version?n("md-icon",[e._v("check")]):n("md-icon",[e._v("error_outline")]),e._v(" "),n("div",{staticStyle:{width:"100%",cursor:"pointer"},on:{click:function(t){return t.stopPropagation(),e.checkImJoyUpdate(t)}}},[e.checking?n("div",{staticClass:"loading loading-lg",staticStyle:{left:"-30px"}}):e.version_badge_url?n("img",{staticStyle:{width:"122px"},attrs:{src:e.version_badge_url}}):n("span",[e._v("ImJoyApp v"+e._s(e.imjoy_version))])]),e._v(" "),n("md-tooltip",[e._v("Click here to check for updates")])],1),e._v(" "),e.core_badge_url?n("md-menu-item",{attrs:{href:"https://github.com/imjoy-team/imjoy-core",target:"_blank"}},[n("md-icon",[e._v("toys")]),e._v(" "),n("img",{staticStyle:{width:"122px"},attrs:{src:e.core_badge_url}}),e._v(" "),n("md-tooltip",[e._v("ImJoy Core version: v"+e._s(e.core_version))])],1):e._e()],1)],1)],2),e._v(" "),n("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"folder_form"},[n("input",{ref:"folder_select",staticClass:"md-file",attrs:{type:"file",webkitdirectory:"",mozdirectory:"",msdirectory:"",odirectory:"",directory:"",multiple:""},on:{change:e.selectFileChanged}})]),e._v(" "),n("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file_form"},[n("input",{ref:"file_select",staticClass:"md-file",attrs:{type:"file",multiple:""},on:{change:e.selectFileChanged}})])],1),e._v(" "),n("md-app-drawer",{attrs:{"md-active":e.menuVisible,"md-persistent":e.screenWidth>800?"full":null,"md-swipeable":!(e.screenWidth>600)},on:{"update:mdActive":function(t){e.menuVisible=t},"md-closed":function(t){e.wm.resizeAll()},"md-opened":function(t){e.wm.resizeAll()}}},[n("div",{staticClass:"md-toolbar-row title-bar"},[n("div",{staticClass:"md-toolbar-section-start"},[n("md-button",{staticClass:"site-button site-title",on:{click:function(t){e.$router.push("/")}}},[n("img",{staticClass:"site-title",attrs:{src:"static/img/imjoy-logo-black.svg",alt:"ImJoy"}})]),e._v(" "),n("span",{staticClass:"superscript md-small-hide"},[e._v("beta")])],1),e._v(" "),e.pm?n("div",{staticClass:"md-toolbar-section-end"},[n("md-menu",[n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("widgets")]),e._v(" "),n("md-tooltip",[e._v("Current workspace: "+e._s(e.pm.selected_workspace))])],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{on:{click:function(t){e.showWorkspaceDialog=!0}}},[n("md-icon",[e._v("view_list")]),e._v("Add Workspace\n              ")],1),e._v(" "),n("md-divider"),e._v(" "),e._l(e.pm.workspace_list,(function(t){return n("md-menu-item",{key:t,attrs:{disabled:t===e.pm.selected_workspace},on:{click:function(n){e.switchWorkspace(t)}}},[n("span",[e._v(e._s(t))]),n("md-icon",[e._v("forward")]),e._v(" "),n("md-tooltip",[e._v("Switch to workspace: "+e._s(t)+" ")])],1)}))],2)],1),e._v(" "),n("md-button",{staticClass:"md-icon-button md-dense md-raised",on:{click:function(t){e.menuVisible=!e.menuVisible}}},[n("md-icon",[e._v("keyboard_arrow_left")])],1)],1):e._e()]),e._v(" "),e.plugin_loaded?e._e():n("div",{staticClass:"loading loading-lg",staticStyle:{top:"10%"}}),e._v(" "),e.pm?n("md-card",{directives:[{name:"show",rawName:"v-show",value:e.plugin_loaded,expression:"plugin_loaded"}],attrs:{id:"plugin-menu"}},[n("md-card-header",[n("md-menu",{attrs:{"md-size":"big"}},[n("md-button",{class:e.screenWidth>600?"":"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("folder_open")]),n("span",{staticClass:"md-xsmall-hide"},[e._v("Files")])],1),e._v(" "),n("md-menu-content",[e.fm&&e.fm.fileManagers.length>0?n("md-menu-item",{staticClass:"md-button",on:{click:function(t){e.showFileManagerDialog(),e.files_expand=!1}}},[n("md-icon",[e._v("add_to_queue")]),e._v("File Manager\n                "),n("md-tooltip",[e._v("Load files through file manager")])],1):e._e(),e._v(" "),n("md-menu-item",{staticClass:"md-button",on:{click:function(t){e.$refs.file_form.reset(),e.$refs.file_select.click(),e.files_expand=!1}}},[n("md-icon",[e._v("insert_drive_file")]),e._v("Open File\n              ")],1),e._v(" "),n("md-menu-item",{staticClass:"md-button",on:{click:function(t){e.$refs.folder_form.reset(),e.$refs.folder_select.click(),e.files_expand=!1}}},[n("md-icon",[e._v("folder_open")]),e._v("Open Folder\n              ")],1)],1)],1),e._v(" "),n("md-menu",{attrs:{"md-size":"big"}},[n("md-button",{class:e.screenWidth>600?"":"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("format_list_bulleted")]),n("span",{staticClass:"md-xsmall-hide"},[e._v("Workflow")])],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{on:{click:function(t){e.clearWorkflow(),e.workflow_expand=!0}}},[n("md-icon",[e._v("playlist_add")]),e._v("New Workflow\n              ")],1),e._v(" "),e._l(e.pm.workflow_list,(function(t){return n("md-menu-item",{key:t.name,on:{click:function(n){e.workflow_expand=!0,e.loadWorkflow(t)}}},[n("span",[e._v(e._s(t.name))]),e._v(" "),n("md-button",{staticClass:"md-icon-button",on:{click:function(n){n.stopPropagation(),e.shareWorkflow(t)}}},[n("md-icon",[e._v("share")])],1),e._v(" "),n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(n){n.stopPropagation(),e.pm.removeWorkflow(t)}}},[n("md-icon",[e._v("clear")])],1)],1)}))],2)],1),e._v(" "),n("md-button",{ref:"add_plugin_button",class:e.pm.installed_plugins.length>0?"":"md-primary",on:{click:function(t){e.showPluginManagement()}}},[n("md-icon",[e._v("add")]),e._v("Plugins\n          ")],1)],1),e._v(" "),n("md-card-content",[e.pm?n("div",{directives:[{name:"show",rawName:"v-show",value:e.workflow_expand,expression:"workflow_expand"}],attrs:{id:"workflow-panel"}},[e.plugin_loaded?n("joy",{ref:"workflow",attrs:{config:e.workflow_joy_config}}):e._e(),e._v(" "),n("p",[e.plugin_loaded?n("md-button",{staticClass:"md-button",on:{click:function(t){e.runWorkflow(e.workflow_joy_config.joy)}}},[n("md-icon",[e._v("play_arrow")]),e._v("Run\n                "),n("md-tooltip",[e._v("run the workflow")])],1):e._e(),e._v(" "),e.plugin_loaded?n("md-button",{staticClass:"md-button",on:{click:function(t){e.pm.saveWorkflow(e.workflow_joy_config.joy)}}},[n("md-icon",[e._v("save")]),e._v("Save\n                "),n("md-tooltip",[e._v("save the workflow")])],1):e._e(),e._v(" "),n("md-button",{staticClass:"md-accent",on:{click:function(t){e.clearWorkflow()}}},[n("md-icon",[e._v("clear")]),e._v("Clear\n                "),n("md-tooltip",[e._v("Clear workflow")])],1)],1)],1):e._e(),e._v(" "),e._l(e.sortedRunnablePlugins(),(function(t){return n("div",{key:t.name,staticStyle:{display:"flex"}},[n("md-divider"),e._v(" "),n("md-badge",{staticClass:"md-square md-primary",class:t.update_available?"":"hide-badge",attrs:{"md-dense":"","md-content":"NEW"}},[n("md-menu",{attrs:{"md-size":"medium"}},[n("md-button",{staticClass:"md-icon-button",class:t.running?"md-accent":"",attrs:{"md-menu-trigger":""}},[t.initializing||t.terminating?n("md-progress-spinner",{staticClass:"md-accent",attrs:{"md-diameter":20,"md-mode":"indeterminate"}}):n("plugin-icon",{attrs:{icon:t.config.icon}}),e._v(" "),e.screenWidth>500?n("md-tooltip",[e._v(e._s(t.name+": "+t.config.description))]):e._e()],1),e._v(" "),n("md-menu-content",[t.config.origin?n("md-menu-item",{class:t.update_available?"md-primary":"",on:{click:function(n){e.updatePlugin(t.id)}}},[n("md-icon",{class:t.update_available?"md-primary":""},[e._v("cloud_download")]),e._v("Update\n                  ")],1):e._e(),e._v(" "),t._log_history&&t._log_history.length>0&&e.screenWidth<=400?n("md-menu-item",{on:{click:function(n){e.showLog(t)}}},[t._log_history._error?n("md-icon",{staticClass:"red"},[e._v("error_outline")]):n("md-icon",[e._v("info")]),e._v("Log\n                  ")],1):e._e(),e._v(" "),n("md-menu-item",{on:{click:function(n){e.showDoc(t.id)}}},[n("md-icon",[e._v("description")]),e._v("Docs\n                  ")],1),e._v(" "),t.config.origin?n("md-menu-item",{on:{click:function(n){e.sharePlugin(t.id)}}},[n("md-icon",[e._v("share")]),e._v("Share\n                  ")],1):e._e(),e._v(" "),n("md-menu-item",{on:{click:function(n){e.downloadPlugin(t.id)}}},[n("md-icon",[e._v("cloud_download")]),e._v("Export\n                  ")],1),e._v(" "),n("md-menu-item",{on:{click:function(n){e.editPlugin(t.id)}}},[n("md-icon",[e._v("edit")]),e._v("Edit\n                  ")],1),e._v(" "),n("md-menu-item",{on:{click:function(n){e.reloadPlugin(t.config)}}},[n("md-icon",[e._v("autorenew")]),e._v("Reload\n                  ")],1),e._v(" "),n("md-menu-item",{on:{click:function(n){e.unloadPlugin(t)}}},[n("md-icon",[e._v("clear")]),e._v("Terminate\n                  ")],1),e._v(" "),n("md-menu-item",{staticClass:"md-accent",on:{click:function(n){e.removePlugin(t)}}},[n("md-icon",[e._v("delete_forever")]),e._v("Remove\n                  ")],1),e._v(" "),t.config.engine_mode?n("div",[n("md-divider"),e._v(" "),n("md-menu-item",{on:{click:function(n){e.switchEngine(t,"auto")}}},["auto"===t.config.engine_mode?n("md-icon",[e._v("check_box")]):n("md-icon",[e._v("check_box_outline_blank")]),e._v(" "),n("span",{class:"auto"===t.config.engine_mode?"bold":""},[e._v("Auto")])],1),e._v(" "),e._l(e.em.matchEngineByType(t.type),(function(i){return n("md-menu-item",{key:i.name,on:{click:function(n){e.switchEngine(t,i)}}},[t.config.engine_mode===i.name||t.engine&&t.engine.name===i.name?n("md-icon",[e._v("radio_button_checked")]):n("md-icon",[e._v("radio_button_unchecked")]),e._v(" "),n("span",{class:t.engine&&t.engine.name===i.name?"bold":""},[e._v(e._s(i.name))])],1)})),e._v(" "),n("md-divider"),e._v(" "),e._l(t.config.tags,(function(i){return n("md-menu-item",{key:i,on:{click:function(n){e.switchTag(t,i)}}},[t.config.tag===i?n("md-icon",[e._v("radio_button_checked")]):n("md-icon",[e._v("radio_button_unchecked")]),e._v(" "),n("span",{class:t.config.tag===i?"bold":""},[e._v("Tag: "+e._s(i))])],1)}))],2):e._e()],1)],1)],1),e._v(" "),n("md-button",{staticClass:"joy-run-button",class:t.running?"busy-plugin":t._disconnected&&t.engine?"md-accent":"md-primary",attrs:{disabled:t._disconnected&&!t.engine},on:{click:function(n){if(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)return null;t._disconnected?e.connectPlugin(t):e.runOp(t.ops[t.name])},contextmenu:function(n){if(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)return null;e.logPlugin(t)}}},[e._v("\n              "+e._s(t.config.name+" "+t.config.badges)+"\n            ")]),e._v(" "),n("div",{staticClass:"floating-right-buttons"},[t._log_history&&t._log_history.length>0&&e.screenWidth>400?n("md-button",{staticClass:"md-icon-button",on:{click:function(n){e.showLog(t)}}},[t._log_history._error?n("md-icon",{staticClass:"red"},[e._v("error_outline")]):n("md-icon",[e._v("info")]),e._v(" "),t._log_history._error||t._log_history._info?n("md-tooltip",[e._v(e._s(t._log_history._error||t._log_history._info))]):e._e()],1):n("md-button",{staticClass:"md-icon-button md-xsmall-hide",attrs:{disabled:""}}),e._v(" "),n("md-button",{staticClass:"md-icon-button",on:{click:function(n){t.panel_expanded=!t.panel_expanded,e.$forceUpdate()}}},[t.panel_expanded?n("md-icon",[e._v("expand_less")]):n("md-icon",[e._v("expand_more")])],1)],1),e._v(" "),(t.running||t.initializing||t.terminating)&&t._progress?n("md-progress-bar",{attrs:{"md-mode":"determinate","md-value":t._progress}}):e._e(),e._v(" "),e._l(t.ops,(function(i){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.panel_expanded,expression:"plugin.panel_expanded"}],key:i.plugin_id+i.name},[i.name!=t.name?n("md-button",{staticClass:"md-icon-button",attrs:{disabled:!0}},[n("md-icon",[e._v("chevron_right")])],1):e._e(),e._v(" "),i.name!=t.name?n("md-button",{staticClass:"joy-run-button md-primary op-button",class:t.running?"md-accent":"md-primary",attrs:{disabled:t._disconnected},on:{click:function(t){if(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)return null;e.runOp(i)},contextmenu:function(n){if(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)return null;e.logPlugin(t)}}},[e._v("\n                "+e._s(i.name)+"\n              ")]):e._e(),e._v(" "),n("joy",{attrs:{config:i,show:t.panel_expanded||!1}})],1)})),e._v(" "),n("md-divider")],2)})),e._v(" "),n("md-divider"),e._v(" "),n("div",e._l(e.sortedNonRunnablePlugins(),(function(t){return n("div",{key:t.name,staticStyle:{display:"flex"}},[n("md-badge",{staticClass:"md-square md-primary",class:t.update_available?"":"hide-badge",attrs:{"md-dense":"","md-content":"NEW"}},[n("md-menu",{attrs:{"md-size":"medium"}},[n("md-button",{staticClass:"md-icon-button",class:t.running?"md-accent":"",attrs:{"md-menu-trigger":""}},[t.initializing||t.terminating?n("md-progress-spinner",{staticClass:"md-accent",attrs:{"md-diameter":20,"md-mode":"indeterminate"}}):n("plugin-icon",{attrs:{icon:t.config.icon}}),e._v(" "),e.screenWidth>500?n("md-tooltip",[e._v(e._s(t.name+": "+t.config.description))]):e._e()],1),e._v(" "),n("md-menu-content",[t.config.origin?n("md-menu-item",{class:t.update_available?"md-primary":"",on:{click:function(n){e.updatePlugin(t.id)}}},[n("md-icon",{class:t.update_available?"md-primary":""},[e._v("cloud_download")]),e._v("Update\n                    ")],1):e._e(),e._v(" "),t._log_history&&t._log_history.length>0&&e.screenWidth<=400?n("md-menu-item",{on:{click:function(n){e.showLog(t)}}},[t._log_history._error?n("md-icon",{staticClass:"red"},[e._v("error_outline")]):n("md-icon",[e._v("info")]),e._v("Log\n                    ")],1):e._e(),e._v(" "),n("md-menu-item",{on:{click:function(n){e.showDoc(t.id)}}},[n("md-icon",[e._v("description")]),e._v("Docs\n                    ")],1),e._v(" "),t.config.origin?n("md-menu-item",{on:{click:function(n){e.sharePlugin(t.id)}}},[n("md-icon",[e._v("share")]),e._v("Share\n                    ")],1):e._e(),e._v(" "),n("md-menu-item",{on:{click:function(n){e.downloadPlugin(t.id)}}},[n("md-icon",[e._v("cloud_download")]),e._v("Export\n                    ")],1),e._v(" "),n("md-menu-item",{on:{click:function(n){e.editPlugin(t.id)}}},[n("md-icon",[e._v("edit")]),e._v("Edit\n                    ")],1),e._v(" "),n("md-menu-item",{on:{click:function(n){e.reloadPlugin(t.config)}}},[n("md-icon",[e._v("autorenew")]),e._v("Reload\n                    ")],1),e._v(" "),n("md-menu-item",{on:{click:function(n){e.unloadPlugin(t)}}},[n("md-icon",[e._v("clear")]),e._v("Terminate\n                    ")],1),e._v(" "),n("md-menu-item",{staticClass:"md-accent",on:{click:function(n){e.removePlugin(t)}}},[n("md-icon",[e._v("delete_forever")]),e._v("Remove\n                    ")],1)],1)],1)],1),e._v(" "),n("md-button",{staticClass:"joy-run-button non-runnable-btn",class:t.running?"busy-plugin":t._disconnected&&t.engine?"md-accent":"",attrs:{disabled:!t.engine||!t._disconnected},on:{click:function(n){if(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)return null;e.connectPlugin(t)},contextmenu:function(n){if(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)return null;e.logPlugin(t)}}},[e._v("\n                "+e._s(t.config.name+" "+t.config.badges)+"\n              ")]),e._v(" "),n("div",{staticClass:"floating-right-buttons"},[t._log_history&&t._log_history.length>0&&e.screenWidth>400?n("md-button",{staticClass:"md-icon-button md-xsmall-hide",on:{click:function(n){e.showLog(t)}}},[t._log_history._error?n("md-icon",{staticClass:"red"},[e._v("error_outline")]):n("md-icon",[e._v("info")]),e._v(" "),t._log_history._error||t._log_history._info?n("md-tooltip",[e._v(e._s(t._log_history._error||t._log_history._info))]):e._e()],1):n("md-button",{staticClass:"md-icon-button md-xsmall-hide",attrs:{disabled:""}}),e._v(" "),n("md-button",{staticClass:"md-icon-button",attrs:{disabled:!0}},[n("md-icon",[e._v("visibility_off")])],1)],1),e._v(" "),n("md-divider")],1)}))),e._v(" "),n("md-divider"),e._v(" "),e.pm.installed_plugins.length<=0?n("md-empty-state",{attrs:{id:"plugin-empty-state","md-icon":"extension","md-label":"","md-description":""}},[n("md-button",{ref:"add_plugin_button",staticClass:"md-primary md-raised",on:{click:function(t){e.showPluginManagement()}}},[n("md-icon",[e._v("add")]),e._v("Add Plugins\n            ")],1)],1):e._e()],2)],1):e._e()],1),e._v(" "),n("md-app-content",{staticClass:"whiteboard-content",class:e.workspace_dropping?"file-dropping":""},[n("md-progress-bar",{attrs:{"md-mode":"determinate","md-value":e.progress}}),e._v(" "),e.wm?n("whiteboard",{attrs:{id:"whiteboard",mode:e.wm.window_mode,"window-manager":e.wm},on:{create:function(t){e.createWindow(t)}}}):e._e()],1)],1),e._v(" "),n("md-snackbar",{staticClass:"md-accent",attrs:{id:"api-snackbar","md-position":"center","md-active":e.show_snackbar,"md-duration":e.snackbar_duration},on:{"update:mdActive":function(t){e.show_snackbar=t}}},[n("span",{on:{click:function(t){e.showAlert(null,e.snackbar_info)}}},[e._v(e._s(e.snackbar_info))]),e._v(" "),n("md-button",{staticClass:"md-accent",on:{click:function(t){e.show_snackbar=!1}}},[n("md-icon",[e._v("clear")])],1)],1),e._v(" "),n("md-dialog-alert",{staticClass:"api-dialog",attrs:{"md-active":e.alert_config.show,"md-title":e.alert_config.title,"md-content":e.alert_config.content,"md-confirm-text":e.alert_config.confirm_text},on:{"update:mdActive":function(t){e.$set(e.alert_config,"show",t)}}}),e._v(" "),n("md-dialog-confirm",{staticClass:"api-dialog",attrs:{"md-active":e.confirm_config.show,"md-title":e.confirm_config.title,"md-content":e.confirm_config.content,"md-confirm-text":e.confirm_config.confirm_text,"md-cancel-text":e.confirm_config.canel_text},on:{"update:mdActive":function(t){e.$set(e.confirm_config,"show",t)},"md-confirm":e.confirm_config.confirm,"md-cancel":e.confirm_config.cancel}}),e._v(" "),n("md-dialog-prompt",{staticClass:"api-dialog",attrs:{"md-active":e.prompt_config.show,"md-title":e.prompt_config.title,"md-content":e.prompt_config.content,"md-input-maxlength":"100000","md-input-placeholder":e.prompt_config.placeholder,"md-confirm-text":e.prompt_config.confirm_text},on:{"update:mdActive":function(t){e.$set(e.prompt_config,"show",t)},"md-confirm":e.prompt_config.confirm,"md-cancel":e.prompt_config.cancel},model:{value:e.prompt_config.value,callback:function(t){e.$set(e.prompt_config,"value",t)},expression:"prompt_config.value"}}),e._v(" "),n("file-dialog",{ref:"file-dialog",attrs:{id:"engine-file-dialog",file_managers:e.selected_file_managers,"upload-file-to-url":e.uploadFileToUrl}}),e._v(" "),n("md-dialog",{staticClass:"window-dialog-container",class:e.dialog_window_config.fullscreen||e.dialog_window_config.standalone?"fullscreen-dialog":"normal-dialog",style:{height:e.dialog_auto_height,width:"800px"},attrs:{"md-active":e.showPluginDialog,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(t){e.showPluginDialog=t}}},[e.dialogWindows[0]?n("window",{key:e.dialogWindows[0].id+"_dialog",attrs:{w:e.dialogWindows[0],withDragHandle:!1},on:{close:function(t){e.closePluginDialog(e.dialogWindows[0])},fullscreen:function(t){e.dialog_window_config.fullscreen=!0,e.dialogWindows[0].fullscreen=!0,e.$forceUpdate()},normalsize:function(t){e.dialog_window_config.fullscreen=!1,e.dialogWindows[0].fullscreen=!1,e.$forceUpdate()}}}):e._e()],1),e._v(" "),n("md-dialog",{attrs:{"md-active":e.showWorkspaceDialog,"md-click-outside-to-close":!0},on:{"update:mdActive":function(t){e.showWorkspaceDialog=t}}},[n("md-dialog-title",[e._v("Workspace Management\n      "),n("md-button",{staticClass:"md-accent",staticStyle:{position:"absolute",top:"8px",right:"5px"},on:{click:function(t){e.showWorkspaceDialog=!1}}},[n("md-icon",[e._v("clear")])],1)],1),e._v(" "),n("md-dialog-content",[n("md-toolbar",{staticClass:"md-dense",attrs:{"md-elevation":"0"}},[n("div",{staticClass:"md-toolbar-section-start"},[n("md-field",[n("label",{attrs:{for:"workspace_name"}},[e._v("Workspace Name")]),e._v(" "),n("md-input",{attrs:{type:"text",placeholder:"Create a new workspace",name:"workspace_name"},model:{value:e.new_workspace_name,callback:function(t){e.new_workspace_name=t},expression:"new_workspace_name"}})],1)],1),e._v(" "),n("div",{staticClass:"md-toolbar-section-end"},[n("md-button",{staticClass:"md-primary",on:{click:function(t){e.switchWorkspace(e.new_workspace_name),e.showWorkspaceDialog=!1}}},[n("md-icon",[e._v("add")]),e._v("New")],1)],1)]),e._v(" "),n("md-list",{staticClass:"md-double-line md-dense"},e._l(e.pm.workspace_list,(function(t){return n("md-list-item",{key:t},[n("span",[e._v(e._s(t))]),e._v(" "),n("md-menu",[n("md-button",{staticClass:"md-icon-button md-list-action",attrs:{"md-menu-trigger":""}},[n("md-icon",{staticClass:"md-primary"},[e._v("more_horiz")])],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{on:{click:function(n){e.showWorkspaceDialog=!1,e.switchWorkspace(t)}}},[n("md-icon",[e._v("forward")]),e._v(" Switch\n              ")],1),e._v(" "),n("md-menu-item",{staticClass:"md-accent",on:{click:function(n){e.removeWorkspace(t)}}},[n("md-icon",[e._v("delete")]),e._v(" Delete\n              ")],1)],1)],1)],1)})))],1)],1),e._v(" "),n("md-dialog",{staticStyle:{"max-width":"800px",width:"100%",height:"100%"},attrs:{"md-active":e.showAboutDialog,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(t){e.showAboutDialog=t}}},[n("md-dialog-title",[e._v("About ImJoy\n      "),n("md-button",{staticClass:"md-accent",staticStyle:{position:"absolute",top:"8px",right:"5px"},on:{click:function(t){e.showAboutDialog=!1}}},[n("md-icon",[e._v("clear")])],1)],1),e._v(" "),n("md-dialog-content",[n("about")],1)],1),e._v(" "),n("md-dialog",{staticClass:"plugin-dialog",attrs:{"md-active":e.showAddPluginDialog,"md-click-outside-to-close":!0},on:{"update:mdActive":function(t){e.showAddPluginDialog=t}}},[n("md-dialog-title",[e._v(e._s(e.plugin4install?"Plugin Installation":"ImJoy Plugin Management")+"\n      "),n("md-button",{staticClass:"md-accent",staticStyle:{position:"absolute",top:"8px",right:"5px"},on:{click:function(t){e.showAddPluginDialog=!1,e.clearPluginUrl()}}},[n("md-icon",[e._v("clear")])],1)],1),e._v(" "),n("md-dialog-content",[e.show_plugin_templates?[n("md-menu",[n("md-button",{staticClass:"md-primary md-raised",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("add")]),e._v("Create a new plugin\n            "),n("md-tooltip",[e._v("Create a new plugin")])],1),e._v(" "),n("md-menu-content",e._l(e.plugin_templates,(function(t){return n("md-menu-item",{key:t.name,on:{click:function(n){e.newPlugin(t.code),e.showAddPluginDialog=!1}}},[n("md-icon",[e._v(e._s(t.icon))]),e._v(e._s(t.name)+"\n            ")],1)})))],1),e._v(" "),n("br"),e._v(" "),n("br")]:e._e(),e._v(" "),e.show_plugin_url?n("md-card",[n("md-card-header",[n("div",{staticClass:"md-title"},[e._v("Install from URL")]),e._v(" "),n("md-toolbar",{attrs:{"md-elevation":"0"}},[n("md-field",{staticClass:"md-toolbar-section-start",attrs:{"md-clearable":""}},[n("md-icon",[e._v("cloud_download")]),e._v(" "),n("md-input",{attrs:{placeholder:"Please paste the URL here and press enter.",type:"text",name:"plugin_url"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.tag4install="",e.getPlugin4Install(e.plugin_url)}},model:{value:e.plugin_url,callback:function(t){e.plugin_url=t},expression:"plugin_url"}}),e._v(" "),n("md-tooltip",[e._v("Press `Enter` to get the plugin")])],1)],1)],1)],1):e._e(),e._v(" "),e.downloading_plugin&&!e.plugin4install?n("div",{staticClass:"md-toolbar-section-center"},[n("div",{staticClass:"loading loading-lg",staticStyle:{"padding-right":"30px"}})]):e._e(),e._v(" "),e.downloading_error?n("h2",[e._v("¬†¬†"+e._s(e.downloading_error))]):e._e(),e._v(" "),e.plugin4install?n("md-card",[e.plugin4install.cover&&"string"===typeof e.plugin4install.cover?n("md-card-media",{attrs:{"md-ratio":"16:9"}},[n("img",{attrs:{src:e.plugin4install.cover,alt:"plugin-cover"}})]):e.plugin4install.cover?n("div",{staticClass:"carousel"},[e._m(0),e._v(" "),n("div",{staticClass:"carousel-container"},e._l(e.plugin4install.cover,(function(e,t){return n("figure",{key:t,staticClass:"carousel-item"},[n("img",{staticClass:"img-responsive rounded",attrs:{src:e,alt:"plugin cover"}})])}))),e._v(" "),n("div",{staticClass:"carousel-nav"},e._l(e.plugin4install.cover,(function(t,i){return n("label",{key:i,staticClass:"nav-item text-hide c-hand",attrs:{for:"slide-"+i}},[e._v(e._s(i))])})))],2):e._e(),e._v(" "),n("md-card-header",[n("md-toolbar",{attrs:{"md-elevation":"0"}},[n("div",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"}},[n("h2",[n("plugin-icon",{attrs:{icon:e.plugin4install.icon}}),e._v("\n                "+e._s(e.plugin4install.name+" "+e.plugin4install.badges)+"\n              ")],1)]),e._v(" "),e.installing||!e.plugin_loaded?n("div",{staticClass:"md-toolbar-section-end"},[n("div",{staticClass:"loading loading-lg",staticStyle:{"padding-right":"30px"}})]):e.tag4install?n("div",{staticClass:"md-toolbar-section-end"},[n("md-button",{staticClass:"md-button md-primary",on:{click:function(t){e.installPlugin(e.plugin4install,e.tag4install)}}},[n("md-icon",[e._v("cloud_download")]),e._v(e._s(e.plugin4install._installation_text||"Install")+"\n                "),n("md-tooltip",[e._v("Install "+e._s(e.plugin4install.name)+" (tag=`"+e._s(e.tag4install)+"`)")])],1)],1):n("div",{staticClass:"md-toolbar-section-end"},[e.plugin4install.tags&&e.plugin4install.tags.length>0?n("md-menu",[n("md-button",{staticClass:"md-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("cloud_download")]),e._v(e._s(e.plugin4install._installation_text||"Install")+"\n                  "),n("md-tooltip",[e._v("Choose a tag to install\n                    "+e._s(e.plugin4install.name))])],1),e._v(" "),n("md-menu-content",e._l(e.plugin4install.tags,(function(t){return n("md-menu-item",{key:t,on:{click:function(n){e.installPlugin(e.plugin4install,t)}}},[n("md-icon",[e._v("cloud_download")]),e._v(e._s(t)+"\n                  ")],1)})))],1):n("md-button",{staticClass:"md-button md-primary",on:{click:function(t){e.installPlugin(e.plugin4install)}}},[n("md-icon",[e._v("cloud_download")]),e._v(e._s(e.plugin4install._installation_text||"Install")+"\n              ")],1)],1)])],1),e._v(" "),n("md-card-content",[n("p",[e._v("Version: "+e._s(e.plugin4install.version))]),e._v(" "),n("p",[e._v(e._s(e.plugin4install.description))]),e._v(" "),e._l(e.plugin4install.tags,(function(t){return n("md-chip",{key:t,class:e.tag4install===t?"md-primary":"",on:{click:function(n){e.tag4install=t}}},[e._v(e._s(t))])})),e._v(" "),n("br"),e._v(" "),e.plugin4install.code?n("md-switch",{model:{value:e.show_plugin_source,callback:function(t){e.show_plugin_source=t},expression:"show_plugin_source"}},[e._v("Show plugin source code")]):e._e(),e._v(" "),n("p",[e._v("\n            This plugin is "),n("strong",[e._v("NOT")]),e._v(" provided by ImJoy.io. Please\n            make sure the plugin is provided by a trusted source, otherwise it\n            may "),n("strong",[e._v("harm")]),e._v(" your computer.\n          ")]),e._v(" "),e.show_plugin_source?n("plugin-editor",{staticClass:"code-editor",attrs:{title:e.plugin4install.name},model:{value:e.plugin4install.code,callback:function(t){e.$set(e.plugin4install,"code",t)},expression:"plugin4install.code"}}):e._e()],2)],1):e._e(),e._v(" "),n("md-card",{directives:[{name:"show",rawName:"v-show",value:e.show_plugin_store,expression:"show_plugin_store"}]},[n("md-card-header",[n("div",{staticClass:"md-title"},[e._v("Install from the plugin repository")]),e._v(" "),n("md-chips",{staticClass:"md-primary shake-on-error",attrs:{"md-placeholder":"Add a repository url (e.g. GITHUB REPO) and press enter."},on:{"md-insert":function(t){e.pm.addRepository(t)},"md-delete":function(t){e.pm.removeRepository(e.getRepository(t))}},scopedSlots:e._u([{key:"md-chip",fn:function(t){var i=t.chip;return[e.pm.selected_repository&&i===e.pm.selected_repository.name?n("strong",{staticClass:"md-primary"},[e._v(e._s(i))]):n("div",{on:{click:function(t){e.selectRepository(i)}}},[e._v(e._s(i))])]}}]),model:{value:e.pm.repository_names,callback:function(t){e.$set(e.pm,"repository_names",t)},expression:"pm.repository_names"}},[e.pm.selected_repository?n("div",{staticClass:"md-helper-text"},[e._v("\n              "+e._s(e.pm.selected_repository.name)+":\n              "+e._s(e.pm.selected_repository.description)+"\n            ")]):e._e()])],1),e._v(" "),n("md-card-content",[e.pm?n("plugin-list",{attrs:{"plugin-manager":e.pm,"init-search":e.init_plugin_search,plugins:e.pm.available_plugins,workspace:e.pm.selected_workspace},on:{message:e.showMessage}}):e._e()],1)],1)],2)],1)],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return e._l(e.plugin4install.cover,(function(e,t){return n("input",{key:t,staticClass:"carousel-locator",attrs:{id:"slide-"+t,type:"radio",name:"carousel-radio",hidden:""},domProps:{checked:1===t}})}))}],l=n("4795"),c=n.n(l),d=n("2440"),u=n("bc3a"),m=n.n(u),_=n("cb3a"),p=n.n(_),f=n("ca41"),g=n.n(f),h=n("147d"),v=n.n(h),w=n("a4ec"),y=n.n(w),b=[{name:"Default template",code:p.a,icon:"code"},{name:"Web Worker (JS)",code:p.a,icon:"swap_horiz"},{name:"Window (HTML/CSS/JS)",code:g.a,icon:"picture_in_picture"},{name:"Native Python",code:v.a,icon:"üöÄ"},{name:"Web Python",code:y.a,icon:"üêç"}],k=n("464c"),x=n.n(k),C=n("9224"),j=n("acad"),$=n("c0c4"),P=n.n($);function S(e){return S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function W(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}var O=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,E=new RegExp(O);function A(e,t){if(!e){if(t=t||"Assertion failed","undefined"!==typeof Error)throw new Error(t);throw t}}function D(e){var t=document.createElement("textarea");return t.textContent=e,t.innerHTML}function I(){return Math.random().toString(36).substr(2,10)}function U(e){if(!e)return e;var t,n,i;for(i in t=Array.isArray(e)?[]:{},e)n=e[i],t[i]="object"===S(n)?U(n):n;return t}var F=n("2ef0"),M=n.n(F),z=n("e61b"),T=n.n(z),L=n("783b"),J=n.n(L);function R(e,t,n,i,o,a,s){try{var r=e[a](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(i,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){R(a,i,o,s,r,"next",e)}function r(e){R(a,i,o,s,r,"throw",e)}s(void 0)}))}}function q(e){return q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}var V=new J.a,K={name:"imjoy",data:function(){return{imjoy:null,pm:null,em:null,wm:null,workflow_expand:!1,file_select:null,folder_select:null,selected_file:null,selected_files:null,showPluginDialog:!1,showSettingsDialog:!1,showAboutDialog:!1,showAddPluginDialog:!1,permission_message:"No permission message.",share_url_message:"No url",resolve_permission:null,reject_permission:null,plugin_url:null,downloading_plugin:!1,downloading_error:"",plugin4install:null,tag4install:"",show_plugin_source:!1,init_plugin_search:null,show_plugin_templates:!0,show_plugin_store:!0,show_plugin_url:!0,show_installed_plugins:!1,progress:0,status_text:"",showWorkspaceDialog:!1,showWelcomeDialog:!1,show_file_dialog:!1,plugins:null,registered:null,menuVisible:!1,snackbar_info:"",snackbar_duration:3e3,show_snackbar:!1,screenWidth:1024,plugin_loaded:!1,new_workspace_name:"",workspace_dropping:!1,max_window_buttons:9,installing:!1,dialog_auto_height:"100%",dialog_window_config:{},latest_version:null,is_latest_version:!1,core_version:null,checking:!1,alert_config:{show:!1},confirm_config:{show:!1,confirm:function(){},cancel:function(){}},prompt_config:{show:!1,confirm:function(){},cancel:function(){}},selected_file_managers:[]}},watch:{},computed:{version_badge_url:function(){if(this.latest_version){var e=this.is_latest_version?"success":"orange";return"https://img.shields.io/badge/ImJoyApp-v"+this.imjoy_version+"-"+e+".svg"}return null},core_badge_url:function(){return this.core_version?"https://img.shields.io/badge/ImJoyCore-v"+this.core_version+"-success.svg":null},dialogWindows:function(){return this.wm.windows.filter((function(e){return e.dialog})).reverse()},windows:function(){return this.wm.windows.filter((function(e){return!e.dialog}))}},created:function(){var e=this;this.imjoy_version=C["a"],this.core_version=j["version"],this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus||T.a.create();var t={alert:this.showAlert,prompt:this.showPrompt,confirm:this.showConfirm,showDialog:this.showDialog,showProgress:this.showProgress,showStatus:this.showStatus,showFileDialog:this.showFileDialog,showSnackbar:this.showSnackbar,uploadFileToUrl:this.uploadFileToUrl,downloadFileFromUrl:this.downloadFileFromUrl,showMessage:function(t,n,i){e.showMessage(n,i)},utils:{$forceUpdate:this.$forceUpdate,openUrl:this.openUrl,sleep:this.sleep,assert:A}};for(var n in this.imjoy_api)if("function"===typeof this.imjoy_api[n])this.imjoy_api[n]=this.imjoy_api[n].bind(this);else if("object"===q(this.imjoy_api[n]))for(var i in this.imjoy_api[n])this.imjoy_api[n][i]=this.imjoy_api[n][i].bind(this);this.client_id=localStorage.getItem("imjoy_client_id"),this.client_id||(this.client_id="imjoy_web_"+I(),localStorage.setItem("imjoy_client_id",this.client_id)),this.imjoy=new j["ImJoy"]({imjoy_api:t,event_bus:this.event_bus,show_message_callback:this.showMessage,update_ui_callback:function(){e.$forceUpdate()},add_window_callback:this.addWindowCallback,client_id:this.client_id,jailed_asset_url:"https://lib.imjoy.io/static/jailed/"}),this.pm=this.imjoy.pm,this.em=this.imjoy.em,this.fm=this.imjoy.fm,this.wm=this.imjoy.wm,this.IMJOY_PLUGIN={_id:"IMJOY_APP"},this.plugin_templates=b,this.workflow_joy_config={expanded:!0,name:"Workflow",ui:"{id:'workflow', type:'ops'}"};var o=function(e){var t=document.getElementById("whiteboard");return e&&t&&t.contains(e)},a=function(e){var t=document.getElementById("engine-file-dialog");return e&&t&&t.contains(e)};document.addEventListener("dragover",(function(t){t.preventDefault(),t.stopPropagation(),o(t.target)&&(e.workspace_dropping||(e.workspace_dropping=!0,e.$forceUpdate())),a(t.target)&&e.event_bus.emit("drag_upload_enter")})),document.addEventListener("dragenter",(function(t){t.preventDefault(),t.stopPropagation(),o(t.target)&&(e.workspace_dropping=!0,e.$forceUpdate()),a(t.target)&&e.event_bus.emit("drag_upload_enter")})),document.addEventListener("dragleave",(function(t){t.preventDefault(),t.stopPropagation(),e.workspace_dropping&&(e.workspace_dropping=!1,e.$forceUpdate()),a(t.target)||e.event_bus.emit("drag_upload_leave")}));var s=function(t){return new Promise((function(n,i){var o=[],a=!1,s=function e(t,i,a,s){if(i=i||"",t&&t.isFile)t.file((function(e){e.relativePath=i+e.name,e.loaders=a(e),o.push(e),s&&n(o)}));else if(t&&t.isDirectory){var r=t.createReader();r.readEntries((function(n){for(var o=0;o<n.length;o++)e(n[o],i+t.name+"/",a,s&&o===n.length-1)}))}else s&&n(o)},r=t.dataTransfer.items.length;if(0!==r){for(var l=0;l<r;l++)if(t.dataTransfer.items[l].webkitGetAsEntry){a=!0;var c=t.dataTransfer.items[l].webkitGetAsEntry();s(c,null,(function(t){return e.wm.getDataLoaders(t)}),l===r-1)}e.selected_files=a?o:t.dataTransfer.files}else i()}))};document.addEventListener("drop",(function(t){t.preventDefault(),o(t.target)?(s(t).then(e.loadFiles),e.workspace_dropping=!1,e.$forceUpdate()):a(t.target)&&(e.event_bus.emit("drag_upload_leave"),s(t).then((function(t){e.event_bus.emit("drag_upload",t)})))}))},beforeRouteLeave:function(e,t,n){if(this.wm&&this.wm.windows.length>0){var i=window.confirm("Do you really want to leave? you have unsaved changes!");i?n():n(!1)}else n()},mounted:function(){var e=this;this.event_bus.on("resize",this.updateSize),this.event_bus.on("plugin_loaded",(function(){e.$refs.workflow&&e.$refs.workflow.setupJoy&&e.$refs.workflow.setupJoy()})),this.event_bus.on("op_registered",(function(){e.$refs.workflow&&e.$refs.workflow.setupJoy&&e.$refs.workflow.setupJoy()})),this.event_bus.on("closing_window_plugin",(function(t){e.dialogWindows[0]&&e.dialogWindows[0].plugin===t&&(e.showPluginDialog=!1)})),this.updateSize({width:window.innerWidth}),this.wm&&(this.screenWidth>800?this.wm.window_mode="grid":this.wm.window_mode="single"),setInterval((function(){e.$forceUpdate()}),5e3),this.welcome?this.showWelcomeDialog=!0:this.startImJoy(this.$route).then((function(){e.showAddPluginDialog||e.pm.plugins&&!(Object.keys(e.pm.plugins)<=0)||e.pm.reloadPluginRecursively({uri:"imjoy-team/imjoy-plugins:Welcome"}).then((function(){e.showDialog(null,{type:"Welcome",name:"Welcome to ImJoy"})})),window.gtag&&window.gtag("config","UA-134837258-1",{page_location:location.href.split("#")[0],page_path:"/#/app"})}))},beforeDestroy:function(){this.imjoy.destroy()},methods:{startImJoy:function(e){var t=this;return N(c.a.mark((function n(){var i,o,a,s,r,l,d,u,_,p,f,g,h,v,w,y,b,k,C,j,$,P,S,W,O,A;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.imjoy.init();case 2:if(i=(e.query.repo||e.query.r||"").trim(),!i){n.next=22;break}return t.plugin_url=null,t.init_plugin_search=null,t.show_plugin_store=!0,t.show_plugin_url=!1,t.downloading_plugin=!0,n.prev=9,n.next=12,t.pm.addRepository(i);case 12:t.pm.selected_repository=n.sent,t.downloading_plugin=!1,n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](9),t.downloading_plugin=!1,t.downloading_error="Sorry, the repository URL is invalid: "+n.t0.toString();case 20:t.show_plugin_templates=!1,t.showAddPluginDialog=!0;case 22:if(o=(e.query.plugin||e.query.p||"").trim(),a=null,!o){n.next=52;break}if(!(o.match(E)||o.includes("/")&&o.includes(":"))){n.next=44;break}return t.plugin_url=o,t.init_plugin_search=null,t.show_plugin_store=!1,t.show_plugin_url=!1,n.prev=30,n.next=33,t.getPlugin4Install(o);case 33:a=n.sent,!t.pm.plugin_names[a.name]||e.query.upgrade||a.version!==t.pm.plugin_names[a.name].config.version?(t.show_plugin_templates=!1,t.showAddPluginDialog=!0):t.showMessage('Plugin "'.concat(a.name,'" is already installed.')),n.next=42;break;case 37:return n.prev=37,n.t1=n["catch"](30),console.error(n.t1),n.next=42,t.showAlert(null,n.t1);case 42:n.next=50;break;case 44:t.plugin_url=null,t.init_plugin_search=o,t.show_plugin_store=!0,t.show_plugin_url=!1,t.show_plugin_templates=!1,t.showAddPluginDialog=!0;case 50:n.next=53;break;case 52:e.query.workflow&&t.loadWorkfowFromUrl();case 53:for(s=!0,r=!1,l=void 0,n.prev=56,d=t.getDefaultInputLoaders()[Symbol.iterator]();!(s=(u=d.next()).done);s=!0)_=u.value,t.wm.registerInputLoader(_.loader_key,_,_.loader);n.next=64;break;case 60:n.prev=60,n.t2=n["catch"](56),r=!0,l=n.t2;case 64:n.prev=64,n.prev=65,s||null==d.return||d.return();case 67:if(n.prev=67,!r){n.next=70;break}throw l;case 70:return n.finish(67);case 71:return n.finish(64);case 72:return n.next=74,t.pm.loadRepositoryList();case 74:return t.repository_list=n.sent,t.pm.selected_repository=t.repository_list[0],n.prev=76,e.query.start||e.query.s?t.menuVisible=!1:t.menuVisible=!0,p=e.query.workspace||e.query.w||t.pm.workspace_list[0],n.next=81,t.pm.loadWorkspace(p);case 81:return n.next=83,t.pm.reloadPlugins();case 83:if(!e.query.jupyter_plugin){n.next=97;break}if(f="Jupyter-Notebook",t.pm.plugin_names[f]){n.next=96;break}return console.log('Loading internal plugin "'.concat(f,'"...')),n.prev=87,n.next=90,t.pm.reloadPluginRecursively({uri:t.pm.internal_plugins[f].uri},null,"eval is evil");case 90:console.log("".concat(f," plugin loaded.")),n.next=96;break;case 93:n.prev=93,n.t3=n["catch"](87),console.error(n.t3);case 96:t.pm.reloadPlugin({code:x.a.replace(/Untitled Plugin/g,e.query.jupyter_plugin)}).catch((function(e){console.error(e)}));case 97:if(e.query.engine&&e.query.start&&(g=t.em.getEngineByUrl(e.query.engine),h=t.pm.plugin_names[e.query.start],g&&h&&(console.log("setting plugin engine of ".concat(h.name," to ").concat(g.name)),h.engine_mode=g.name,h.config.engine_mode=g.name),g||t.showMessage("Plugin engine ".concat(e.query.engine," not found.")),h||t.showMessage("Plugin ".concat(e.query.start," not found."))),v=null,(e.query.token||e.query.t)&&(v=(e.query.token||e.query.t).trim()),e.query.engine||e.query.e){w=(e.query.engine||e.query.e).trim();try{t.em.addEngine({type:"default",url:w,token:v},!1)}finally{t.em.getEngineByUrl(w).connect(),t.$forceUpdate()}}t.plugin_loaded=!0,t.event_bus.emit("plugins_loaded",t.pm.plugins),n.prev=103,y=t.pm.reloadRepository(),t.event_bus.emit("repositories_loaded",y);case 106:if(n.prev=106,!e.query.start&&!e.query.s){n.next=155;break}if(b=e.query.start||e.query.s,k=t.pm.installed_plugins.filter((function(e){return e.name===b})),t.showAddPluginDialog||!(k.length<=0)){n.next=114;break}alert('Plugin "'.concat(b,'" cannot be started, please install it.')),n.next=155;break;case 114:if(C=U(e.query),j=e.query.load||e.query.l,!j){n.next=129;break}return n.prev=117,n.next=120,m.a.get(j);case 120:$=n.sent,C.loaded=$.data,n.next=129;break;case 124:n.prev=124,n.t4=n["catch"](117),console.error(n.t4),t.showMessage("Failed to load data from:"+j+" Error:"+n.t4.toString()),C.loaded=null;case 129:if(t.showAddPluginDialog||!t.pm.registered.windows[b]&&!b.startsWith("imjoy/")){n.next=151;break}return n.prev=130,P=t.pm.registered.windows[b]||{},S=U(P.defaults)||{},S.type=b,S.name=b,S.w=S.w||e.query.w,S.h=S.h||e.query.h,S.tag=P.tag,S.fullscreen=e.query.fullscreen||S.fullscreen||!1,S.standalone=e.query.standalone||S.standalone||!1,S.data=C,S.config={},n.next=144,t.createWindow(S);case 144:n.next=149;break;case 146:n.prev=146,n.t5=n["catch"](130),console.error("Plugin ".concat(b," failed to load data."),n.t5);case 149:n.next=155;break;case 151:W=null,O=function e(n){if(n.name===b){try{n.api.run({data:C,config:{}})}catch(i){console.error("Plugin ".concat(b," failed to load data."),i)}t.event_bus.off("plugin_loaded",e)}W&&W.api.close&&W.api.close(),W=n},A=function e(n){n.name===b&&(t.event_bus.on("plugin_loaded",O),t.event_bus.off("plugin_installed",e))},t.event_bus.on("plugin_installed",A);case 155:return t.$nextTick((function(){t.event_bus.emit("imjoy_ready")})),n.finish(106);case 157:n.next=162;break;case 159:n.prev=159,n.t6=n["catch"](76),t.showMessage(n.t6);case 162:t.$forceUpdate(),t.$nextTick((function(){t.checkImJoyUpdate(),window.setInterval((function(){t.checkImJoyUpdate(!0)}),12e5)}));case 164:case"end":return n.stop()}}),n,null,[[9,16],[30,37],[56,60,64,72],[65,,67,71],[76,159],[87,93],[103,,106,157],[117,124],[130,146]])})))()},addWindowCallback:function(e){var t=this;return new Promise((function(n,i){if(t.wm.window_ids[e.id])try{e.api.on("refresh",(function(){t.$forceUpdate()}));var o=e.refresh;o&&(e.refresh=function(){t.$nextTick((function(){o()}))}),t.$nextTick((function(){t.$forceUpdate(),n()}))}catch(a){i(a)}else i("window was closed")}))},createWindow:function(e){return this.pm.createWindow(null,e)},restartImJoy:function(){return N(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.location.reload(!0);case 1:case"end":return e.stop()}}),e)})))()},checkImJoyUpdate:function(e){var t=this;return N(c.a.mark((function n(){var i,o;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.checking=!0,n.prev=1,n.next=4,m.a.get("https://imjoy.io/version.json?"+I());case 4:if(i=n.sent,i&&i.data){n.next=8;break}return t.showMessage("Failed to fetch imjoy version information."),n.abrupt("return");case 8:o=i.data,o&&o.version?(t.latest_version=o.version,t.is_latest_version=j["utils"].compareVersions(t.imjoy_version,">=",o.version),t.is_latest_version?e||(j["utils"].compareVersions(t.imjoy_version,">",o.version)?t.showMessage("üçª Your ImJoy (v".concat(t.imjoy_version,") is newer than the release (v").concat(t.latest_version,").")):t.showMessage("üéâ ImJoy is up to date (version ".concat(t.latest_version,")."))):t.showMessage("üì£ A newer version of ImJoy (version ".concat(t.latest_version,") is available, please restart ImJoy."))):t.latest_version=null,n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](1),t.showMessage("Failed to fetch imjoy version information");case 15:return n.prev=15,t.checking=!1,n.finish(15);case 18:t.pm.checkUpdates();case 19:case"end":return n.stop()}}),n,null,[[1,12,15,18]])})))()},getDefaultInputLoaders:function(){var e=this,t=function(t){var n=new FileReader;n.onload=function(){e.createWindow({name:t.name,type:"imjoy/image",data:{type:"imjoy/image",src:n.result,file:t}})},n.readAsDataURL(t)},n=function(t){var n={name:"New Plugin",type:"imjoy/plugin-editor",config:{},plugin_manager:e.pm,engine_manager:e.em,w:30,h:20,standalone:e.screenWidth<1200,plugin:{},data:{type:"imjoy/code",name:"new plugin",id:"plugin_"+I(),code:"",local_file_obj:t}};e.createWindow(n)},i=function(t){var n={name:"New Plugin",type:"imjoy/plugin-editor",config:{},plugin_manager:e.pm,engine_manager:e.em,w:30,h:20,standalone:e.screenWidth<1200,plugin:{},data:{type:"imjoy/code",name:"new plugin",id:"plugin_"+I(),code:"",engine_file_obj:t}};e.createWindow(n)},o=function(t){var n=t.url.split("/"),i=n[n.length-1];e.createWindow({name:i,type:"imjoy/image",data:{type:"imjoy/image",src:t.url}})};return[{loader_key:"Code Editor (file)",schema:V.compile({properties:{type:{type:"string"},name:{type:"string",pattern:".*\\.imjoy.html$",maxLength:1024},size:{type:"number"}},required:["name","size","type"]}),loader:n},{loader_key:"Code Editor (url)",schema:V.compile({properties:{type:{type:"string",enum:["imjoy/url"]},url:{type:"string",pattern:".*\\.imjoy.html$",maxLength:1024},path:{type:"string"},engine:{type:"string"}},required:["url","path","engine"]}),loader:i},{loader_key:"Image (file)",schema:V.compile({properties:{type:{type:"string",enum:["image/jpeg","image/png","image/gif"]},size:{type:"number"}},required:["type","size"]}),loader:t},{loader_key:"Image (url)",schema:V.compile({properties:{type:{type:"string",enum:["imjoy/url"]},url:{type:"string",maxLength:1024,pattern:"(.*\\.jpg|\\.jpeg|\\.png|\\.gif)$"},path:{type:"string"},engine:{type:"string"}},required:["url","path","engine","type"]}),loader:o}]},updateSize:function(e){this.screenWidth=e.width,this.wm&&(this.screenWidth>800?(0===this.windows.length&&(this.wm.window_mode="grid"),this.max_window_buttons=9):(0===this.windows.length&&(this.wm.window_mode="single"),this.max_window_buttons=parseInt(this.screenWidth/36-4),this.max_window_buttons>9&&(this.max_window_buttons=9)),this.wm.resizeAll()),this.$forceUpdate()},showEngineConnection:function(e,t){this.event_bus.emit("show_engine_dialog",{show:e,engine:t})},getRepository:function(e){var t=!0,n=!1,i=void 0;try{for(var o,a=this.pm.repository_list[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;if(s.name===e)return s}}catch(r){n=!0,i=r}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}},selectRepository:function(e){var t=this,n=!0,i=!1,o=void 0;try{for(var a,s=this.pm.repository_list[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var r=a.value;if(r.name===e)return this.pm.reloadRepository(r).then((function(){t.$forceUpdate()})),r}}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}},switchEngine:function(e,t){var n=this;e.config.engine_mode=t&&t.name||"auto",this.pm.savePlugin(e.config).then((function(e){n.pm.reloadPlugin(e)})).catch((function(e){n.showMessage("Failed to save settings: "+e.toString())}))},switchTag:function(e,t){var n=this;e.config.tag=t,this.pm.savePlugin(e.config).then((function(e){n.pm.reloadPlugin(e)})).catch((function(e){n.showMessage("Failed to save settings: "+e.toString())}))},connectPlugin:function(e){e._disconnected&&(e.engine&&!e.engine.connected?e.engine.connect():this.pm.reloadPlugin(e.config))},getPlugin4Install:function(e){var t=this;return N(c.a.mark((function n(){var i;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.plugin4install=null,t.downloading_error="",t.downloading_plugin=!0,n.prev=3,n.next=6,t.pm.getPluginFromUrl(e);case 6:return i=n.sent,t.pm.plugin_names[i.name]&&(j["utils"].compareVersions(i.version,">",t.pm.plugin_names[i.name].config.version)?i._installation_text="Upgrade":j["utils"].compareVersions(i.version,"<",t.pm.plugin_names[i.name].config.version)&&(i._installation_text="Downgrade")),t.plugin4install=i,t.tag4install=i.tag,t.downloading_plugin=!1,n.abrupt("return",i);case 14:throw n.prev=14,n.t0=n["catch"](3),t.downloading_plugin=!1,t.downloading_error="Failed to fetch plugin, error: ".concat(n.t0),t.showMessage(t.downloading_error),n.t0;case 20:case"end":return n.stop()}}),n,null,[[3,14]])})))()},showPluginManagement:function(){this.plugin4install=null,this.downloading_error="",this.downloading_plugin=!1,this.init_plugin_search="",this.show_plugin_templates=!0,this.show_plugin_store=!0,this.show_plugin_url=!0,this.showAddPluginDialog=!0;var e=!0,t=!1,n=void 0;try{for(var i,o=this.pm.repository_list[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.name===this.pm.default_repository_list[0].name&&this.selectRepository(a.name)}}catch(s){t=!0,n=s}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}},sortedRunnablePlugins:function(){return M.a.orderBy(this.pm.plugins,"name").filter((function(e){return e.config.runnable}))},sortedNonRunnablePlugins:function(){return M.a.orderBy(this.pm.plugins,"name").filter((function(e){return!e.config.runnable}))},switchWorkspace:function(e){if(!e||""==e.trim())throw this.showMessage("Workspace name should not be empty."),"Workspace name should not be empty.";var t={workspace:e};"default"===e&&(t=null),this.$router.push({name:"app",query:t}),window.location.reload()},removeWorkspace:function(e){var t=this,n=this.pm.selected_workspace===e.name;this.pm.removeWorkspace(e).then((function(){t.showMessage("Workspace ".concat(e," has been deleted.")),n&&t.$router.replace({query:{w:"default"}})})).catch((function(e){t.showMessage(e)}))},showMessage:function(e,t){e=String(e),this.snackbar_info=e,t&&(t*=1e3),this.snackbar_duration=t||1e4,this.show_snackbar=!0,this.status_text=e,this.$forceUpdate()},showFileManagerDialog:function(){var e=this;this.showFileDialog(this.IMJOY_PLUGIN,{uri_type:"url",root:"./"}).then((function(t){if(e.screenWidth<=800&&(e.menuVisible=!1),t){var n=e.wm.getDataLoaders(t),i=Object.keys(n);if(i.length>1){var o={name:"Engine Files",type:"imjoy/generic",scroll:!0,data:t};e.createWindow(o)}else if(1===i.length)e.wm.registered_loaders[n[i[0]]](t);else{Array.isArray(t)||(t=[t]);var a=[],s=!0,r=!1,l=void 0;try{for(var c,d=t[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var u=c.value;u.url?a.push(u):a.push({url:u})}}catch(_){r=!0,l=_}finally{try{s||null==d.return||d.return()}finally{if(r)throw l}}var m={name:"Files",type:"imjoy/url_list",scroll:!0,data:a};e.createWindow(m)}}})).catch((function(e){throw e}))},processPermission:function(e){e&&this.resolve_permission?(this.resolve_permission(),this.resolve_permission=null):this.reject_permission?(this.reject_permission("Permission Denied!"),this.reject_permission=null):console.error("permission handler not found.")},showDoc:function(e){var t=this.pm.plugins[e],n=t.config,i={name:"About "+n.name,type:"imjoy/markdown",w:20,h:10,scroll:!0,data:{name:n.name,id:t.id,plugin_info:n,source:n&&n.docs[0]&&n.docs[0].content}};this.createWindow(i)},clearPluginUrl:function(){var e=Object.assign({},this.$route.query);delete e.upgrade,this.$router.replace({query:e})},sharePlugin:function(e){var t=this.pm.plugins[e],n=t.config,i="".concat(location.protocol,"//").concat(location.hostname).concat(location.port?":"+location.port:"","/#/app/?p=").concat(n.origin);this.showAlert(null,{content:'<h3>Sharing "'.concat(t.name,'"</h3> <br> <a style="word-wrap: break-word;" href="').concat(encodeURI(i),'" target="_blank">').concat(i,'</a> <br> (Right click on the link and select "Copy Link Address")')});var o=Object.assign({},this.$route.query);o.p=n.origin,this.$router.replace({query:o})},downloadPlugin:function(e){var t=this.pm.plugins[e],n=t.config,i=t.name+"_"+I()+".imjoy.html",o=new Blob([n.code],{type:"text/plain;charset=utf-8"});Object(d["saveAs"])(o,i)},installPlugin:function(e,t){var n=this;this.installing=!0,this.pm.installPlugin(e,t).then((function(e){n.showAddPluginDialog=!1,n.clearPluginUrl(e),n.$forceUpdate()})).finally((function(){n.installing=!1}))},updatePlugin:function(e){var t=this,n=this.pm.plugins[e],i=n.config;i.origin?(this.showMessage("Fetching plugin file..."),this.getPlugin4Install(i.origin).then((function(){t.showStatus(null," "),t.show_plugin_templates=!1,t.showAddPluginDialog=!0,t.init_plugin_search=null,t.show_plugin_store=!1,t.show_plugin_url=!1})).catch((function(e){t.showMessage("Failed to fetch plugin source code (".concat(e,").")),console.error(e)}))):this.showAlert(null,"Origin not found for this plugin.")},reloadPlugin:function(e){var t=this;this.pm.unloadPlugin(e),this.$nextTick((function(){t.pm.reloadPlugin(e).finally((function(){t.$forceUpdate()}))}))},unloadPlugin:function(e){this.pm.unloadPlugin(e)},removePlugin:function(e){var t=this;this.showConfirm(null,{title:"Removing Plugin",content:"Do you really want to <strong>delete</strong> this plugin",confirm_text:"Yes"}).then((function(n){n&&t.pm.removePlugin(e)}))},logPlugin:function(e){console.log(e,this.pm,this.em,this.fm)},startTerminal:function(e){e.startTerminal()},editPlugin:function(e){var t=this.pm.plugins[e],n=t.config,i={name:"Edit-"+n.name||!1,type:"imjoy/plugin-editor",config:t.config,plugin:t,plugin_manager:this.pm,engine_manager:this.em,w:30,h:20,standalone:this.screenWidth<1200,data:{name:n.name,id:t.id,code:n.code}};this.createWindow(i)},newPlugin:function(e){var t={name:"New Plugin",type:"imjoy/plugin-editor",config:{},plugin_manager:this.pm,engine_manager:this.em,w:30,h:20,standalone:this.screenWidth<1200,plugin:null,data:{type:"imjoy/code",name:"new plugin",id:"plugin_"+I(),code:JSON.parse(JSON.stringify(e))}};this.createWindow(t)},loadFiles:function(e){if(1===e.length){var t=e[0],n=this.wm.getDataLoaders(t),i=Object.keys(n);if(1===i.length)try{return this.wm.registered_loaders[n[i[0]]](t)}catch(r){console.error("Failed to load with the matched loader ".concat(n[0]),r)}}for(var o=0;o<e.length;o++){var a=e[o];a.loaders=a.loaders||this.wm.getDataLoaders(a)}var s={name:"Files",type:"imjoy/files",config:{},select:-1,_op:"__file_loader__",_source_op:null,_workflow_id:"files_"+I(),_transfer:!1,data:e};this.createWindow(s)},clearWorkflow:function(){this.workflow_joy_config.data=null,this.$refs.workflow.setupJoy(!0)},runWorkflow:function(e){var t=this;this.status_text="",this.progress=0;var n=this.wm.active_windows[this.wm.active_windows.length-1]||{},i=this.pm.plugin2joy(n)||{};i.target=i.target||{},i.target._op="workflow",i.target._source_op=null,i.target._workflow_id=i.target._workflow_id||"workflow_"+I(),e.workflow.execute(i.target).catch((function(e){console.error(e),t.showMessage(e||"Error.",12)}))},loadWorkflow:function(e){this.workflow_joy_config.data=JSON.parse(e.workflow),this.$refs.workflow.setupJoy(!0)},loadWorkfowFromUrl:function(){var e=this,t=j["Joy"].decodeWorkflow(this.$route.query.workflow);if(t)try{this.workflow_expand=!0,this.workflow_joy_config.data=JSON.parse(t),this.$nextTick((function(){try{e.$refs.workflow.setupJoy(!0);var t=Object.assign({},e.$route.query);delete t.workflow,e.$router.replace({query:t})}catch(n){console.error(n),e.showMessage("Failed to load workflow: "+n)}}))}catch(n){console.error(n),this.showMessage("Failed to parse workflow: "+n)}else console.log("failed to workflow")},shareWorkflow:function(e){var t=j["Joy"].encodeWorkflow(e.workflow);this.showAlert(null,{content:'<h3>Sharing Workflow</h3><a style="word-wrap: break-word;" href="'.concat(location.protocol,"//").concat(location.hostname).concat(location.port?":"+location.port:"","/#/app/?workflow=").concat(t,'" target="_blank">').concat(location.protocol,"//").concat(location.hostname).concat(location.port?":"+location.port:"","/#/app/?workflow=").concat(t,'</a><br> (Right click on the link and select "Copy Link Address")')})},runOp:function(e){var t,n=this;if(!e||!e.name)throw"op not found.";if(this.status_text="",this.progress=0,e.inputs_schema){var i=this.wm.active_windows[this.wm.active_windows.length-1]||{};t=i.data&&e.inputs_schema(i.data)&&this.pm.plugin2joy(i)||{}}else t={};t.target=t.target||{},t.target._op=e.name,t.target._source_op=null,t.target._workflow_id=t.target._workflow_id||"op_"+e.name.trim().replace(/ /g,"_")+I(),e.joy.__op__.execute(t.target).then((function(e){var t=n.pm.joy2plugin(e);t&&!e.__as_interface__&&(t.name=t.name||"result",t.type=t.type||"imjoy/generic",n.createWindow(t)),n.progress=100})).catch((function(t){n.showMessage("<"+e.name+">"+(t||"Error."),15)})),this.screenWidth<=800&&(this.menuVisible=!1)},selectFileChanged:function(e){this.selected_file=e.target.files[0],this.selected_files=e.target.files;for(var t=0;t<e.target.files.length;t++){var n=e.target.files[t];n.relativePath=n.webkitRelativePath,n.loaders=this.wm.getDataLoaders(n)}this.loadFiles(this.selected_files)},showSnackbar:function(e,t,n){t=String(t),this.snackbar_info=t,n&&(n*=1e3),this.snackbar_duration=n||1e4,this.show_snackbar=!0,this.$forceUpdate()},showFileDialog:function(e,t){if(t=t||{},e&&e.id){if(t.file_manager?"string"===typeof t.file_manager&&(t.file_manager=this.fm.getFileManagerByUrl(t.file_manager)):e.api.FILE_MANAGER_URL&&(t.file_manager=this.fm.getFileManagerByUrl(e.api.FILE_MANAGER_URL)),t.root=t.root||e.config&&e.config.work_dir,t.uri_type=t.uri_type||"path",t.root&&"string"!==typeof t.root)throw"You need to specify a root with string type ";e.config.api_version&&j["utils"].compareVersions(e.config.api_version,"<=","0.1.3")?t.return_object=void 0!==t.return_object&&t.return_object:t.return_object=void 0===t.return_object||t.return_object}return t.file_manager&&t.hide_unselected?this.selected_file_managers=[t.file_manager]:this.selected_file_managers=this.fm.fileManagers,this.$refs["file-dialog"].showDialog(e,t)},uploadFileToUrl:function(e,t){var n=this;if("object"!==q(t)||!t.file||!t.url)throw"You must pass an object contains keys named `file` and `url`";return console.warn("WARNING: api.uploadFileToUrl is deprecated and it will be removed soon."),e=e||{},new Promise((function(i,o){var a=new FormData;a.append("file",new Blob([t.file],{type:t.file.type||"application/octet-stream"})),n.showMessage("Uploading a file to "+t.url);var s=null;m()({method:"post",url:t.url,data:a,headers:t.headers||{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){if(s=s||e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length"),null!==s){var i=100*e.loaded/s;parseInt(i)%5==0&&(n.showProgress(null,i),n.$forceUpdate())}t.progress&&t.progress(e.loaded,s)}}).then((function(a){200!==a.status?(console.error(a),o(a.statusText)):(n.showMessage("File uploaded to ".concat(t.url)),e.log&&e.log("File uploaded to ".concat(t.url)),i(a.data))})).catch((function(e){n.showMessage("Failed to upload files, error: ".concat(e.status)),console.error(e),o(e.status)}))}))},downloadFileFromUrl:function(e,t){var n=this;if("object"!==q(t)||!t.url)throw"You must pass an object contains keys named `url`";return console.warn("WARNING: api.uploadFileToUrl is deprecated and it will be removed soon."),new Promise((function(e,i){n.showMessage("Downloading from "+t.url);var o=null;m.a.get({url:t.url,method:t.method||"GET",responseType:t.responseType||"blob",onDownloadProgress:function(e){if(o=o||e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length"),null!==o){var i=100*e.loaded/o;parseInt(i)%5==0&&(n.showProgress(null,i),n.$forceUpdate())}t.progress&&t.progress(e.loaded,o)}}).then((function(o){200!==o.status?(console.error(o),i(o.statusText)):(n.showMessage("File downloaded from ".concat(t.url)),e(o.data))})).catch((function(e){n.showMessage("Failed to download files, error: ".concat(e.statusText)),console.error(e),i(e.statusText)}))}))},showProgress:function(e,t){this.progress=t<1?100*t:t},showStatus:function(e,t){this.status_text=String(t),this.screenWidth<500&&this.showMessage(t)},showDialog:function(e,t){var n=this;return t.dialog=!0,t.type=t.type||"imjoy/joy",this.showPluginDialog=!0,this.dialog_auto_height="700px",this.dialog_window_config.fullscreen=t.fullscreen||t.standalone||!1,new Promise((function(i,o){n.pm.createWindow(e,t).then((function(e){e.on("window_size_changed",(function(e){n.dialog_auto_height="".concat(e.height+40,"px"),n.$forceUpdate()}),!0),e.on("close",(function(){n.showPluginDialog=!1})),"imjoy/joy"===t.type?(t.ok=function(){n.closePluginDialog(t),i(t.get_config())},t.cancel=function(){n.closePluginDialog(t),i()}):i(e)})).catch((function(e){n.showAlert(null,e),n.showPluginDialog=!1,o(e)}))}))},closePluginDialog:function(e){var t=this;return N(c.a.mark((function n(){return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.close();case 2:t.dialogWindows.forEach((function(e){e.close()})),t.showPluginDialog=!1;case 4:case"end":return n.stop()}}),n)})))()},showAlert:function(e,t){console.log("alert: ",t),"string"===typeof t?(this.alert_config.title=null,this.alert_config.content=D(t).replace(/\n/g,"<br>"),this.alert_config.confirm_text="OK"):"object"===q(t)&&t.content?(this.alert_config.title=t.title,this.alert_config.content=P.a.sanitize(String(t.content))||"undefined",this.alert_config.confirm_text=t.confirm_text||"OK"):this.alert_config.content=JSON.stringify(t),this.alert_config.show=!0,this.$forceUpdate()},showPrompt:function(e,t,n){var i=this;return new Promise((function(e,o){if("string"===typeof t)i.prompt_config.title=null,i.prompt_config.content=D(t).replace(/\n/g,"<br>"),i.prompt_config.placeholder=n,i.prompt_config.cancel_text="Cancel",i.prompt_config.confirm_text="OK";else{if("object"!==q(t)||!t.content)throw o("unsupported prompt arguments"),"unsupported prompt arguments";i.prompt_config.title=t.title,i.prompt_config.content=P.a.sanitize(String(t.content))||"undefined",i.prompt_config.placeholder=t.placeholder||null,i.prompt_config.cancel_text=t.cancel_text||"Cancel",i.prompt_config.confirm_text=t.confirm_text||"OK"}i.prompt_config.confirm=function(){e(i.prompt_config.value||i.prompt_config.placeholder)},i.prompt_config.cancel=function(){o()},i.prompt_config.show=!0}))},showConfirm:function(e,t){var n=this;return new Promise((function(e,i){if("string"===typeof t)n.confirm_config.title=null,n.confirm_config.content=D(t).replace(/\n/g,"<br>"),n.confirm_config.cancel_text="Cancel",n.confirm_config.confirm_text="OK";else{if("object"!==q(t)||!t.content)throw i("unsupported prompt arguments"),"unsupported prompt arguments";n.confirm_config.title=t.title,n.confirm_config.content=P.a.sanitize(String(t.content))||"undefined",n.confirm_config.cancel_text=t.cancel_text||"Cancel",n.confirm_config.confirm_text=t.confirm_text||"OK"}n.confirm_config.confirm=function(){e(!0)},n.confirm_config.cancel=function(){e(!1)},n.confirm_config.show=!0}))},showLog:function(e){var t={name:"Log (".concat(e.name,")"),type:"imjoy/log",data:{plugin_id:e.id,plugin_name:e.name,log_history:e._log_history}};this.createWindow(t)},openUrl:function(e,t){A(t),Object.assign(document.createElement("a"),{target:"_blank",href:t}).click()},sleep:function(e,t){return A(t),new Promise((function(e){return setTimeout(e,Math.round(1e3*t))}))}}},B=K,H=(n("58d1"),n("2877")),Y=Object(H["a"])(B,s,r,!1,null,"19b0d6de",null),G=Y.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("a",{attrs:{href:"https://github.com/imjoy-team/ImJoy",target:"_blank"}},[n("img",{attrs:{src:"https://img.shields.io/badge/ImJoyApp-v"+e.app_version+"-success.svg",alt:"ImJoy"}})]),e._v("¬†\n  "),n("a",{attrs:{href:"https://github.com/imjoy-team/imjoy-core",target:"_blank"}},[n("img",{attrs:{src:"https://img.shields.io/badge/ImJoyCore-v"+e.core_version+"-success.svg",alt:"ImJoy Core"}})]),e._v("¬†\n  "),e._m(0),e._v("¬†\n\n  "),e._m(1),e._v("¬†\n  "),e._m(2),e._v("¬†\n  "),n("br"),e._v(" "),n("br"),e._v(" "),n("img",{staticStyle:{width:"300px"},attrs:{src:"static/img/imjoy-logo-black.svg"}}),e._v(" "),n("br"),e._v(" "),n("md-button",{staticClass:"normal-text",attrs:{href:"https://github.com/imjoy-team",target:"_blank"}},[e._v("Version: "+e._s(e.app_version)+" "),n("br"),e._v("\n    Made by the ImJoy-Team with "),n("span",{staticClass:"red"},[e._v("‚ù§")])]),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),n("p",[e._v("Main Contributors:")]),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),n("p",[e._v("This project is mainly funded by")]),e._v(" "),e._m(7)],1)},Q=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://github.com/imjoy-team/ImJoy/actions",target:"_blank"}},[n("img",{attrs:{src:"https://github.com/imjoy-team/ImJoy/workflows/Build%20Site/badge.svg",alt:"Build Site"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://zenodo.org/badge/latestdoi/137741898",target:"_blank"}},[n("img",{attrs:{src:"https://zenodo.org/badge/137741898.svg",alt:"DOI"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://github.com/imjoy-team/ImJoy",target:"_blank"}},[n("img",{attrs:{src:"https://img.shields.io/github/license/imjoy-team/imjoy-engine.svg",alt:"LICENSE"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n    The ImJoy project was originally carried out in\n    "),n("a",{attrs:{href:"https://research.pasteur.fr/en/team/imaging-and-modeling/",target:"_blank"}},[e._v("Imaging and Modeling Unit")]),e._v("\n    at Institut Pasteur.\n  ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n    Ongoing development of ImJoy is mainly supported by the\n    "),n("a",{attrs:{href:"https://cellprofiling.org/",target:"_blank"}},[e._v("Cell Profiling Group")]),e._v("\n    headed by Emma Lundberg at\n    "),n("a",{attrs:{href:"https://www.scilifelab.se/",target:"_blank"}},[e._v("SciLifeLab")]),e._v(".\n  ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v("Wei OUYANG")]),e._v(" "),n("li",[e._v("Florian MUELLER")]),e._v(" "),n("li",[e._v("Martin HJELMARE")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n    We also thank\n    "),n("a",{attrs:{href:"https://sites.google.com/site/imagingandmodeling/people",target:"_blank"}},[e._v("all the team members")]),e._v("\n    from the Imaging and Modeling Unit and people who have been using,\n    testing, contributing valuable feedbacks and suggestions for improving\n    ImJoy.\n  ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("a",{attrs:{href:"https://www.pasteur.fr",target:"_blank"}},[n("img",{staticStyle:{width:"150px",margin:"10px"},attrs:{src:"static/img/Institut_Pasteur_logo.svg",alt:"Institut Pasteur"}}),e._v("\n      ¬†¬†\n      "),n("img",{staticStyle:{width:"150px",margin:"10px"},attrs:{src:"static/img/logga-KAW-300x155.png"}})])])}],X={name:"about",created:function(){this.app_version=C["a"],this.core_version=j["version"]}},ee=X,te=(n("c1014"),Object(H["a"])(ee,Z,Q,!1,null,"e39a6704",null)),ne=te.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("a",{staticClass:"github-corner",attrs:{href:"https://github.com/imjoy-team/ImJoy","aria-label":"View source on Github"}},[n("svg",{attrs:{viewBox:"0 0 250 250","aria-hidden":"true"}},[n("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),e._v(" "),n("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),e._v(" "),n("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])]),e._v(" "),n("section",{staticClass:"cover show",staticStyle:{background:"rgb(209, 220, 239)"}},[n("div",{attrs:{id:"particles-js"}}),e._v(" "),n("div",{staticClass:"cover-main"},[e._m(0),e._v(" "),n("h1",[e._v("Deep Learning Made Easy!")]),e._v(" "),n("p",{staticClass:"badges"},[n("a",{attrs:{href:"https://github.com/imjoy-team/ImJoy",target:"_blank"}},[n("img",{attrs:{src:"https://img.shields.io/badge/ImJoyApp-v"+e.app_version+"-success.svg",alt:"ImJoy"}})]),e._v("\n        ¬†\n\n        "),e._m(1),e._v("¬†\n        "),e._m(2),e._v("¬†\n      ")]),e._v(" "),e._m(3)]),e._v(" "),n("div",{staticClass:"mask"})])])},oe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("img",{attrs:{src:"/static/img/imjoy-logo-black.svg?sanitize=true",width:"380"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://github.com/imjoy-team/ImJoy/actions",target:"_blank"}},[n("img",{attrs:{src:"https://github.com/imjoy-team/ImJoy/workflows/Build%20Site/badge.svg",alt:"Build Site"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://github.com/imjoy-team/ImJoy",target:"_blank"}},[n("img",{attrs:{src:"https://img.shields.io/github/license/imjoy-team/imjoy-engine.svg",alt:"LICENSE"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("a",{attrs:{href:"https://rdcu.be/bYbGO",target:"_blank"}},[e._v("Publication")]),e._v(" "),n("a",{attrs:{href:"/docs"}},[e._v("Docs")]),e._v(" "),n("a",{attrs:{href:"/repo",onclick:"removeWelcomePage()",target:"_self"}},[e._v("Plugins")]),e._v(" "),n("a",{attrs:{href:"/#/app",onclick:"removeWelcomePage()",target:"_self"}},[e._v("Start ImJoy")])])}],ae={name:"home",created:function(){this.app_version=C["a"],document.addEventListener("DOMContentLoaded",(function(){particlesJS.load("particles-js","/static/js/particlesjs-config.json",(function(){console.log("particles.js config loaded")}))}))},beforeDestroy:function(){particlesJS.stop()}},se=ae,re=(n("5363"),Object(H["a"])(se,ie,oe,!1,null,"3c22d01c",null)),le=re.exports;o["default"].use(a["a"]);var ce={base:window.location.pathName,routes:[{path:"/",name:"Home",component:le},{path:"/app",name:"app",component:G},{path:"/:)",redirect:{name:"joy"}},{path:"/%F0%9F%98%82",name:"joy",component:G},{path:"/imjoy",name:"Imjoy",component:G},{path:"/about",name:"About",component:ne},{path:"*",redirect:"/404.html"}]},de=new a["a"](ce),ue=n("43f9"),me=n.n(ue),_e=(n("51de"),n("e094"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-app",{attrs:{id:"app","md-waterfall":"","md-mode":"fixed"}},[n("md-app-content",[n("router-view")],1)],1)}),pe=[],fe={name:"app",data:function(){return{}},mounted:function(){var e=this;this.$nextTick((function(){var t=function(){e.$root.$data.store.event_bus.emit("resize",{height:window.innerHeight,width:window.innerWidth})};t(),window.addEventListener("resize",t),document.addEventListener("orientationchange",t);var n=document.getElementById("welcome-page");n&&n.parentNode.removeChild(n);var i=document.getElementById("loading-imjoy-section");i&&i.parentNode.removeChild(i)}))},methods:{},watch:{}},ge=fe,he=(n("034f"),Object(H["a"])(ge,_e,pe,!1,null,null,null)),ve=he.exports,we=n("7be8"),ye=n.n(we),be=T.a.create(),ke={event_bus:be},xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"md-toolbar-row"},[n("div",{staticClass:"md-toolbar-row",attrs:{flex:""}},[n("md-button",{staticClass:"site-title",on:{click:function(t){e.$router.push("/")}}},[n("img",{staticClass:"site-title",attrs:{src:"static/img/imjoy-logo-white.svg",alt:"ImJoy"}}),n("span",{staticClass:"superscript"},[e._v("beta")])]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"/"!=e.$route.path,expression:"$route.path != '/'"}],staticClass:"md-layout-item md-medium-hide subheader-title"},[e._v("Deep Learning Made Easy!")]),e._v(" "),n("div",{staticClass:"md-toolbar-section-end"},[e.screenWidth<600?n("md-menu",{attrs:{"md-size":"medium"}},[n("md-button",{staticClass:"md-primary md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("menu")])],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:"/"!=e.$route.path,expression:"$route.path != '/'"}],staticClass:"md-primary md-button menu-button",on:{click:function(t){e.$router.push("/")}}},[e._v("Home")]),e._v(" "),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:"/app"!=e.$route.path,expression:"$route.path != '/app'"}],staticClass:"md-primary md-button menu-button",on:{click:function(t){e.$router.push("/app")}}},[e._v("Start ImJoy")]),e._v(" "),n("md-menu-item",{staticClass:"md-primary md-button menu-button",attrs:{href:"https://github.com/imjoy-team/ImJoy"}},[e._v("Source")]),e._v(" "),n("md-menu-item",{staticClass:"md-primary md-button menu-button",attrs:{href:"/docs"}},[e._v("Docs")]),e._v(" "),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:"/about"!=e.$route.path,expression:"$route.path != '/about'"}],staticClass:"md-primary md-button menu-button",on:{click:function(t){e.$router.push("/about")}}},[e._v("About")])],1)],1):e._e(),e._v(" "),e.screenWidth>=600?n("md-button",{directives:[{name:"show",rawName:"v-show",value:"/"!=e.$route.path,expression:"$route.path != '/'"}],staticClass:"md-accent",on:{click:function(t){e.$router.push("/")}}},[n("md-icon",[e._v("home")]),e._v(" Home\n        "),n("md-tooltip",[e._v("Home Page")])],1):e._e(),e._v("\n      ¬†\n      "),e.screenWidth>=600?n("md-button",{directives:[{name:"show",rawName:"v-show",value:"/app"!=e.$route.path,expression:"$route.path != '/app'"}],staticClass:"md-accent",on:{click:function(t){e.$router.push("/app")}}},[n("md-icon",{staticClass:"md-size-1x svg-icon",attrs:{"md-src":"static/img/imjoy-icon-white.svg"}}),e._v("\n        ImJoy App\n        "),n("md-tooltip",[e._v("Start ImJoy App")])],1):e._e(),e._v("\n      ¬†\n      "),e.screenWidth>=600?n("md-button",{staticClass:"md-accent",attrs:{href:"https://github.com/imjoy-team/ImJoy",target:"_blank"}},[n("md-icon",{staticClass:"md-size-1x svg-icon",attrs:{"md-src":"static/img/github.svg"}}),e._v("source\n        "),n("md-tooltip",[e._v("Source code on Github")])],1):e._e(),e._v("\n      ¬†\n      "),e.screenWidth>=600?n("md-button",{staticClass:"md-accent",attrs:{href:"/docs"}},[n("md-icon",[e._v("library_books")]),e._v("Docs\n        "),n("md-tooltip",[e._v("Documentation")])],1):e._e(),e._v(" "),e._v("\n      ¬†\n      "),e.screenWidth>=600?n("md-button",{directives:[{name:"show",rawName:"v-show",value:"/about"!=e.$route.path,expression:"$route.path != '/about'"}],staticClass:"md-accent",on:{click:function(t){e.$router.push("/about")}}},[n("md-icon",[e._v("info")]),e._v(" About\n        "),n("md-tooltip",[e._v("About ImJoy.io")])],1):e._e()],1)],1)])},Ce=[],je={name:"navbar",data:function(){return{screenWidth:window.innerWidth}},created:function(){this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus},mounted:function(){this.screenWidth=window.innerWidth,this.event_bus.on("resize",this.updateSize)},beforeDestroy:function(){this.event_bus.off("resize",this.updateSize)},methods:{updateSize:function(e){this.screenWidth=e.width},shareOnTwitter:function(){var e="https://imjoy.io",t=" #ImJoy ";window.open("http://twitter.com/share?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(t),"","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0")}}},$e=je,Pe=(n("2d2f"),Object(H["a"])($e,xe,Ce,!1,null,"fbddfd62",null)),Se=Pe.exports,We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"/app"!=e.$route.path&&"/app"!=e.$route.path?n("div",{staticClass:"footer"},[n("div",{staticClass:"md-layout md-alignment-center-center"},[n("md-button",{staticClass:"md-accent footer-button",attrs:{target:"_blank",href:"https://github.com/imjoy-team/ImJoy/issues"}},[e._v("Create an issue on Github")])],1),e._v(" "),n("div",{staticClass:"md-layout md-alignment-center-center"},[n("md-button",{staticClass:"footer-button",attrs:{href:"https://creativecommons.org/licenses/by/4.0/",target:"_blank"}},[n("md-tooltip",[e._v("Except where otherwise noted, content on this site is licensed under\n        a Creative Commons Attribution 4.0 International license.")]),e._v(" "),n("img",{attrs:{id:"cc-by-img",src:"static/img/by.svg",alt:"CC BY 4.0"}})],1),e._v(" "),n("md-button",{staticClass:"footer-button",on:{click:function(t){e.$router.push("/about")}}},[e._v("About ImJoy.io")])],1),e._v(" "),n("div",{staticClass:"md-layout md-alignment-center-center"},[n("md-button",{staticClass:"footer-button",attrs:{href:"https://github.com/imjoy-team",target:"_blank"}},[e._v("Made by the ImJoy Team with "),n("span",{staticClass:"red"},[e._v("‚ù§")])]),e._v(" "),n("md-button",{staticClass:"footer-button",attrs:{target:"_blank",href:"https://sites.google.com/site/imagingandmodeling/"}},[e._v("Powered by Imaging and Modeling Unit")]),e._v(" "),e._m(0)],1)]):e._e()},Oe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://www.pasteur.fr",target:"_blank"}},[n("img",{attrs:{id:"ip-img",src:"static/img/Institut_Pasteur_logo.svg",alt:"Institut Pasteur"}})])}],Ee={name:"main-footer",data:function(){return{mode:"about",showDialog:!1,showQuestion:!1}},created:function(){this.store=this.$root.$data.store},mounted:function(){},methods:{}},Ae=Ee,De=(n("3145"),Object(H["a"])(Ae,We,Oe,!1,null,"48776f65",null)),Ie=De.exports,Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"whiteboard",staticClass:"whiteboard noselect",on:{mouseup:function(t){e.show_overlay=!1},click:function(t){e.unselectWindows(t)}}},[e.show_overlay?n("div",{staticClass:"overlay",on:{mousemove:e.overlayMousemove,click:function(t){e.show_overlay=!1}}}):e._e(),e._v(" "),e.gridWindows?n("grid-layout",{directives:[{name:"show",rawName:"v-show",value:!e.wm.selected_window&&e.gridWindows.length>0,expression:"!wm.selected_window && gridWindows.length > 0"}],ref:"window_grid",staticStyle:{"min-height":"100%"},attrs:{layout:e.gridWindows,"col-num":e.col_num,"is-mirrored":!1,"auto-size":!0,"row-height":e.row_height,"is-responsive":!0,"is-draggable":!0,"is-resizable":!0,"vertical-compact":!0,margin:[3,3],"use-css-transforms":!0},on:{"update:layout":function(t){e.gridWindows=t},"update:colNum":function(t){e.col_num=t},"update:rowHeight":function(t){e.row_height=t}}},e._l(e.gridWindows,(function(t){return n("grid-item",{key:t.id,attrs:{"drag-allow-from":".drag-handle","drag-ignore-from":".no-drag",x:t.x,y:t.y,w:t.w,h:t.h,i:t.i},on:{"update:w":function(n){e.$set(t,"w",n)},"update:h":function(n){e.$set(t,"h",n)},resize:function(n){e.viewChanging(t)},move:function(n){e.viewChanging(t)},resized:function(n){e.show_overlay=!1,t.resize&&t.resize(),e.focusWindow(t)},moved:function(n){e.show_overlay=!1,t.move&&t.move(),e.focusWindow(t)}}},[n("window",{attrs:{w:t,withDragHandle:!0,loaders:e.wm.registered_loaders},on:{detach:e.detach,duplicate:e.duplicate,select:e.selectWindow,close:e.close,fullscreen:e.fullScreen,normalsize:e.normalSize}})],1)}))):e._e(),e._v(" "),e.gridWindows&&0!==e.gridWindows.length?e._e():n("div",{staticClass:"md-layout md-gutter md-alignment-center-center"},[n("md-empty-state",{attrs:{"md-icon":"static/img/imjoy-io-icon.svg","md-label":"","md-description":""}})],1),e._v(" "),e._l(e.standaloneWindows,(function(t){return n("window",{directives:[{name:"show",rawName:"v-show",value:e.wm.selected_window===t,expression:"wm.selected_window === w"}],key:t.id+"_standalone",attrs:{w:t,loaders:e.wm.registered_loaders,withDragHandle:!1},on:{detach:e.detach,duplicate:e.duplicate,select:e.selectWindow,close:e.close,fullscreen:e.fullScreen,normalsize:e.normalSize}})}))],2)},Fe=[],Me={name:"whiteboard",props:{mode:{type:String,default:function(){return"grid"}},windowManager:{type:Object,default:function(){return null}}},data:function(){return{row_height:30,column_width:30,col_num:20,active_windows:[],show_overlay:!1,scrolling:!1,scrollClientY:0,screenWidth:window.innerWidth,windows:[]}},created:function(){this.wm=this.windowManager,this.windows=this.wm&&this.wm.windows,A(this.windows),this.event_bus=this.wm.event_bus,this.event_bus.on("add_window",this.onWindowAdd),this.event_bus.on("close_window",this.onWindowClose),this.event_bus.on("resize",this.updateSize)},mounted:function(){this.screenWidth=window.innerWidth,this.col_num=parseInt(this.$refs.whiteboard.clientWidth/this.column_width),window.onbeforeunload=function(e){var t="Are you sure you want to leave?";return"undefined"==typeof e&&(e=window.event),e&&(e.returnValue=t),t}},beforeDestroy:function(){this.event_bus.off("add_window",this.onWindowAdd),this.event_bus.off("close_window",this.onWindowClose),this.event_bus.off("resize",this.updateSize)},computed:{gridWindows:function(){var e=this;return this.windows.filter((function(t){return!t.dialog&&!t.standalone&&"grid"===e.mode}))},standaloneWindows:function(){var e=this;return this.windows.filter((function(t){return!t.dialog&&("grid"!==e.mode||t.standalone)}))}},methods:{overlayMousemove:function(e){var t,n=this,i=this.$refs.whiteboard.getBoundingClientRect(),o=i.y,a=i.y+i.height;this.scrollClientY=e.clientY,this.scrollClientY<o+10?(t=function(){n.$refs.whiteboard.scrollTop=n.$refs.whiteboard.scrollTop-(o-n.scrollClientY)/2,n.show_overlay&&n.scrollClientY<o?(n.scrolling=!0,window.requestAnimationFrame(t)):n.scrolling=!1},this.scrolling||t()):this.scrollClientY>a-20&&(t=function(){n.$refs.whiteboard.scrollTop=n.$refs.whiteboard.scrollTop+(n.scrollClientY-a+20)/2,n.show_overlay&&n.scrollClientY>a-10?(n.scrolling=!0,window.requestAnimationFrame(t)):n.scrolling=!1},this.scrolling||t())},updateSize:function(e){this.screenWidth=e.width,this.col_num=parseInt(this.$refs.whiteboard.clientWidth/this.column_width)},onWindowAdd:function(e){e.fullscreen&&this.fullScreen(e),this.selectWindow(e,{}),this.$forceUpdate()},onWindowClose:function(){this.$forceUpdate()},detach:function(e){var t=this;this.close(e);var n=Object.assign({},e,{name:e.name,type:e.window_type,data:e.data,config:e.config,w:e.w,h:e.h,fullscreen:e.fullscreen,standalone:!0});this.$nextTick((function(){t.$emit("create",n)}))},close:function(e){var t=this.active_windows.indexOf(e);t>=0&&(this.active_windows[t].selected=!1,this.active_windows[t].refresh(),this.active_windows.splice(t,1),this.wm.active_windows=this.active_windows,this.$emit("select",this.active_windows,null)),e.close(),this.$emit("close",e)},isTypedArray:function(e){return!!e&&void 0!==e.byteLength},fullScreen:function(e){e.fullscreen=!0,this.col_num=parseInt(this.$refs.whiteboard.clientWidth/this.column_width);var t=parseInt((this.$refs.whiteboard.clientHeight-76)/this.row_height),n=parseInt(this.$refs.whiteboard.clientWidth/this.column_width)+1;e._h=e.h,e._w=e.w,e.h=t,e.w=n,this.$refs.window_grid.layoutUpdate(),setTimeout((function(){e.resize(),e.refresh(),e.focus()}),500)},normalSize:function(e){this.col_num=parseInt(this.$refs.whiteboard.clientWidth/this.column_width),e.fullscreen=!1,e.h=e._h||5,e.w=e._w||5,e._w=null,e._h=null,this.$refs.window_grid.layoutUpdate(),setTimeout((function(){e.resize(),e.refresh(),e.focus()}),500)},duplicate:function(e){this.$emit("create",{name:e.name+I(),type:e.window_type,data:e.data,config:e.config,w:e.w,h:e.h,fullscreen:e.fullscreen,standalone:e.standalone})},unselectWindows:function(e){if(e.target.classList.contains("vue-grid-layout")&&this.active_windows&&this.active_windows.length>0){for(var t=0;t<this.active_windows.length;t++)this.active_windows[t].selected=!1,this.active_windows[t].refresh();this.active_windows=[],this.wm.active_windows=this.active_windows,this.$emit("select",this.active_windows,null),this.$forceUpdate()}},selectWindow:function(e,t){if(e.selected=!0,e.refresh&&e.refresh(),this.active_windows.length<=0||this.active_windows[this.active_windows.length-1]!==e){if(!t.shiftKey)for(var n=0;n<this.active_windows.length;n++)this.active_windows[n].selected=!1,this.active_windows[n].refresh();t.shiftKey&&this.active_windows.length>0?this.active_windows.push(e):this.active_windows=[e],this.wm.active_windows=this.active_windows,this.$emit("select",this.active_windows,e)}else if(!t.shiftKey&&this.active_windows.length>1){for(var i=0;i<this.active_windows.length;i++)this.active_windows[i]!==e&&(this.active_windows[i].selected=!1),this.active_windows[i].refresh();this.active_windows=[e]}this.$forceUpdate()},viewChanging:function(){this.show_overlay=!0},focusWindow:function(e){this.show_overlay=!1,this.selectWindow(e,{})},stopDragging:function(){var e=this;setTimeout((function(){e.show_overlay=!1,e.$forceUpdate()}),300)}}},ze=Me,Te=(n("6cd1"),Object(H["a"])(ze,Ue,Fe,!1,null,"cad5ba2e",null)),Le=Te.exports,Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"joy"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"joy-container"},[n("div",{ref:"editor",staticClass:"joy-editor"})])])},Re=[],Ne={name:"joy",props:{show:{type:Boolean,default:function(){return!0}},config:{type:Object,default:function(){return{}}}},data:function(){return{joy:null,isRunning:!1}},created:function(){this.store=this.$root.$data.store},mounted:function(){setTimeout(this.setupJoy,500)},watch:{config:function(){this.setupJoy()}},methods:{editSource:function(){this.$emit("edit",this.config)},setupJoy:function(e){var t=this;!e&&this.joy&&(this.config.data=this.joy.top.data),this.$nextTick((function(){if(t.$refs.editor){t.$refs.editor.innerHTML="";var e={container:t.$refs.editor,init:j["Joy"].normalizeUI(t.config.ui)||"",data:t.config.data,modules:t.config.modules||["instructions","math"],onexecute:t.config.onexecute,onupdate:t.config.onupdate};try{t.joy=new j["Joy"](e)}catch(n){throw console.error("error occured when loading the workflow",n),e.data="",t.joy=new j["Joy"](e),n}t.config.joy=t.joy}}))},runJoy:function(){this.$emit("run",this.joy)},stopJoy:function(){this.$emit("stop")}}},qe=Ne,Ve=(n("27e7"),Object(H["a"])(qe,Je,Re,!1,null,null,null)),Ke=Ve.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"plugin-list"},[e.title?n("md-subheader",[e._v(e._s(e.title)+" "),e.name?n("span",[e._v(e._s(e.name))]):e._e()]):e._e(),e._v(" "),e.description?n("p",[e._v(e._s(e.description))]):e._e(),e._v(" "),n("md-toolbar",{attrs:{"md-elevation":"0"}},[n("md-field",{staticClass:"md-toolbar-section-start",attrs:{"md-clearable":""}},[n("md-icon",[e._v("search")]),e._v(" "),n("md-input",{attrs:{placeholder:"Search by name..."},on:{input:e.searchPlugin},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("md-button",{directives:[{name:"show",rawName:"v-show",value:!e.search&&e.pm&&e.pm.installPlugin,expression:"!search && pm && pm.installPlugin"}],staticClass:"md-button md-primary",attrs:{disabled:e.loading},on:{click:function(t){e.updateAll()}}},[n("md-icon",[e._v("update")]),n("span",{staticClass:"md-small-hide"},[e._v("Update All")])],1)],1),e._v(" "),e.loading?n("div",{staticClass:"loading loading-lg floating",staticStyle:{left:"-30px"}}):e._e(),e._v(" "),n("md-list",{staticClass:"md-triple-line md-dense"},e._l(e.searched_plugins,(function(t,i){return n("div",{key:i},[n("md-list-item",[n("md-avatar",{staticClass:"md-xsmall-hide"},[n("plugin-icon",{attrs:{icon:t.icon}})],1),e._v(" "),n("div",{staticClass:"md-list-item-text"},[n("span",[e._v(e._s(t.name+" "+t.badges))]),e._v(" "),n("p",[e._v(e._s(t.description))]),e._v(" "),n("p",e._l(t.tags,(function(t){return n("span",{key:t},[e._v(e._s(t)+", ")])})))]),e._v(" "),n("span",[e.pm&&e.pm.removePlugin&&t.installed?n("md-button",{staticClass:"md-icon-button md-list-action md-accent",attrs:{disabled:e.loading},on:{click:function(n){e.plugin2_remove_=t,e.showRemoveConfirmation=!0}}},[n("md-icon",[e._v("delete_forever")]),e._v(" "),n("md-tooltip",[e._v("Delete "+e._s(t.name))])],1):e._e(),e._v(" "),e.pm&&e.pm.installPlugin&&!t.installed&&t.tags&&t.tags.length>0?n("md-menu",[n("md-button",{staticClass:"md-icon-button md-list-action md-primary",attrs:{"md-menu-trigger":"",disabled:e.loading}},[n("md-icon",[e._v("cloud_download")]),e._v(" "),n("md-tooltip",[e._v("Install "+e._s(t.name))])],1),e._v(" "),n("md-menu-content",e._l(t.tags,(function(i){return n("md-menu-item",{key:i,on:{click:function(n){e.install(t,i)}}},[n("md-icon",[e._v("cloud_download")]),e._v(e._s(i)+"\n              ")],1)})))],1):!t.installed&&e.pm&&e.pm.installPlugin?n("md-button",{staticClass:"md-icon-button md-list-action md-primary",attrs:{disabled:e.loading},on:{click:function(n){e.install(t)}}},[n("md-icon",[e._v("cloud_download")]),e._v(" "),n("md-tooltip",[e._v("Install "+e._s(t.name))])],1):e._e(),e._v(" "),t.installed&&e.pm&&e.pm.installPlugin?n("md-button",{staticClass:"md-icon-button md-list-action md-primary",attrs:{disabled:e.loading},on:{click:function(n){e.install(t)}}},[n("md-icon",[e._v("update")]),e._v(" "),n("md-tooltip",[e._v("Update "+e._s(t.name))])],1):e._e()],1),e._v(" "),n("md-menu",[n("md-button",{staticClass:"md-icon-button md-list-action",attrs:{disabled:e.loading,"md-menu-trigger":""}},[n("md-icon",{staticClass:"md-primary"},[e._v("more_horiz")])],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{on:{click:function(n){e.showDocs(t)}}},[n("md-icon",[e._v("description")]),e._v("Docs\n            ")],1),e._v(" "),t.installed&&e.pm&&e.pm.installPlugin?n("md-menu-item",{on:{click:function(n){e.install(t)}}},[n("md-icon",[e._v("update")]),e._v("Update\n            ")],1):e._e(),e._v(" "),t.installed&&e.pm&&e.pm.removePlugin?n("md-menu-item",{on:{click:function(n){e.plugin2_remove_=t.config,e.showRemoveConfirmation=!0}}},[n("md-icon",[e._v("delete_forever")]),e._v("Delete\n            ")],1):e._e(),e._v(" "),n("md-menu-item",{on:{click:function(n){e.showCode(t)}}},[n("md-icon",[e._v("code")]),e._v("Code\n            ")],1)],1)],1)],1),e._v(" "),n("md-divider")],1)}))),e._v(" "),n("md-dialog-confirm",{attrs:{"md-active":e.showRemoveConfirmation,"md-title":"Removing Plugin","md-content":"Do you really want to <strong>delete</strong> this plugin","md-confirm-text":"Yes","md-cancel-text":"Cancel"},on:{"update:mdActive":function(t){e.showRemoveConfirmation=t},"md-cancel":function(t){e.showRemoveConfirmation=!1},"md-confirm":function(t){e.remove(e.plugin2_remove_),e.showRemoveConfirmation=!1}}}),e._v(" "),n("md-dialog",{staticClass:"editor-dialog",attrs:{"md-active":e.showEditor},on:{"update:mdActive":function(t){e.showEditor=t}}},[n("md-dialog-title",[e._v(e._s(e.plugin_name))]),e._v(" "),n("md-dialog-content",[e.showEditor?n("plugin-editor",{staticClass:"code-editor",attrs:{title:"Plugin Editor"},model:{value:e.editorCode,callback:function(t){e.editorCode=t},expression:"editorCode"}}):e._e()],1),e._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(t){e.downloadCode()}}},[e._v("Download")]),e._v(" "),n("md-button",{staticClass:"md-primary",on:{click:function(t){e.showEditor=!1}}},[e._v("Exit")])],1)],1),e._v(" "),n("md-dialog",{attrs:{"md-active":e.showDocsDialog},on:{"update:mdActive":function(t){e.showDocsDialog=t}}},[n("md-dialog-content",[e.docs&&""!=e.docs.trim()?n("div",{staticStyle:{"padding-left":"10px","padding-right":"5px"},domProps:{innerHTML:e._s(e.sanitizedMarked(e.docs))}}):n("h3",[e._v("Oops, this plugin has no documentation!")])]),e._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(t){e.showDocsDialog=!1}}},[e._v("OK")])],1)],1)],1)},He=[],Ye=n("e0c1"),Ge=n.n(Ye);var Ze=/\r?\n/g,Qe=/^\s*$/,Xe=/^(\r?\n)*[\t\s]/,et=function(e){if(!Xe.test(e))return e;for(var t,n,i,o=e.split(Ze),a=1/0,s=0;s<o.length;s++){var r=o[s];if(!Qe.test(r))if(t)n=tt(r,t),n<a&&(a=n);else{if(i=r.charAt(0)," "!==i&&"\t"!==i)return e;t=i,n=tt(r,t),n<a&&(a=n)}}return o.map((function(e){return e.slice(a)})).join("\n")};function tt(e,t){var n=0;while(e.charAt(n)===t)n++;return n}Object.freeze({});Object.prototype.toString;function nt(e,t){for(var n=Object.create(null),i=e.split(","),o=0;o<i.length;o++)n[i[o]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}nt("slot,component",!0),nt("key,ref,slot,slot-scope,is");Object.prototype.hasOwnProperty;function it(e){var t=Object.create(null);return function(n){var i=t[n];return i||(t[n]=e(n))}}var ot=/-(\w)/g;it((function(e){return e.replace(ot,(function(e,t){return t?t.toUpperCase():""}))}));function at(e,t){function n(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function st(e,t){return e.bind(t)}Function.prototype.bind;var rt=function(e,t,n){return!1};nt("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),nt("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source");var lt=nt("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),ct=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,dt="[a-zA-Z_][\\w\\-\\.]*",ut="((?:"+dt+"\\:)?"+dt+")",mt=new RegExp("^<"+ut),_t=/^\s*(\/?)>/,pt=new RegExp("^<\\/"+ut+"[^>]*>"),ft=/^<!DOCTYPE [^>]+>/i,gt=/^<!\--/,ht=/^<!\[/,vt=!1;"x".replace(/x(.)?/g,(function(e,t){vt=""===t}));var wt=nt("script,style,textarea",!0),yt={},bt={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},kt=/&(?:lt|gt|quot|amp);/g,xt=/&(?:lt|gt|quot|amp|#10|#9);/g,Ct=nt("pre,textarea",!0),jt=function(e,t){return e&&Ct(e)&&"\n"===t[0]};function $t(e,t){var n=t?xt:kt;return e.replace(n,(function(e){return bt[e]}))}function Pt(e,t){var n,i,o=[],a=t.expectHTML,s=t.isUnaryTag||rt,r=t.canBeLeftOpenTag||rt,l=0;while(e){if(n=e,i&&wt(i)){var c=0,d=i.toLowerCase(),u=yt[d]||(yt[d]=new RegExp("([\\s\\S]*?)(</"+d+"[^>]*>)","i")),m=e.replace(u,(function(e,n,i){return c=i.length,wt(d)||"noscript"===d||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),jt(d,n)&&(n=n.slice(1)),t.chars&&t.chars(n),""}));l+=e.length-m.length,e=m,$(d,l-c,l)}else{var _=e.indexOf("<");if(0===_){if(gt.test(e)){var p=e.indexOf("--\x3e");if(p>=0){t.shouldKeepComment&&t.comment(e.substring(4,p)),x(p+3);continue}}if(ht.test(e)){var f=e.indexOf("]>");if(f>=0){x(f+2);continue}}var g=e.match(ft);if(g){x(g[0].length);continue}var h=e.match(pt);if(h){var v=l;x(h[0].length),$(h[1],v,l);continue}var w=C();if(w){j(w),jt(i,e)&&x(1);continue}}var y=void 0,b=void 0,k=void 0;if(_>=0){b=e.slice(_);while(!pt.test(b)&&!mt.test(b)&&!gt.test(b)&&!ht.test(b)){if(k=b.indexOf("<",1),k<0)break;_+=k,b=e.slice(_)}y=e.substring(0,_),x(_)}_<0&&(y=e,e=""),t.chars&&y&&t.chars(y)}if(e===n){t.chars&&t.chars(e),!o.length&&t.warn&&t.warn('Mal-formatted tag at end of template: "'+e+'"');break}}function x(t){l+=t,e=e.substring(t)}function C(){var t=e.match(mt);if(t){var n,i,o={tagName:t[1],attrs:[],start:l};x(t[0].length);while(!(n=e.match(_t))&&(i=e.match(ct)))x(i[0].length),o.attrs.push(i);if(n)return o.unarySlash=n[1],x(n[0].length),o.end=l,o}}function j(e){var n=e.tagName,l=e.unarySlash;a&&("p"===i&&lt(n)&&$(i),r(n)&&i===n&&$(n));for(var c=s(n)||!!l,d=e.attrs.length,u=new Array(d),m=0;m<d;m++){var _=e.attrs[m];vt&&-1===_[0].indexOf('""')&&(""===_[3]&&delete _[3],""===_[4]&&delete _[4],""===_[5]&&delete _[5]);var p=_[3]||_[4]||_[5]||"",f="a"===n&&"href"===_[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;u[m]={name:_[1],value:$t(p,f)}}c||(o.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:u}),i=n),t.start&&t.start(n,u,c,e.start,e.end)}function $(e,n,a){var s,r;if(null==n&&(n=l),null==a&&(a=l),e&&(r=e.toLowerCase()),e){for(s=o.length-1;s>=0;s--)if(o[s].lowerCasedTag===r)break}else s=0;if(s>=0){for(var c=o.length-1;c>=s;c--)(c>s||!e)&&t.warn&&t.warn("tag <"+o[c].tag+"> has no matching end tag."),t.end&&t.end(o[c].tag,n,a);o.length=s,i=s&&o[s-1].tag}else"br"===r?t.start&&t.start(e,[],!0,n,a):"p"===r&&(t.start&&t.start(e,[],!1,n,a),t.end&&t.end(e,n,a))}$()}var St=/\r?\n/g,Wt=/./g;nt("script,style,template",!0);function Ot(e,t){void 0===t&&(t={});var n={script:[],style:[],config:[],window:[],docs:[],attachment:[],link:[],others:[]},i=0,o=null;function a(e,t,a,r,l){0===i&&(o={type:e,content:"",start:l,attrs:t.reduce((function(e,t){var n=t.name,i=t.value;return e[n]=i||!0,e}),{})},n[e]?(s(o,t),n[e].push(o)):n.others.push(o)),a||i++}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];"lang"===i.name&&(e.lang=i.value),"scoped"===i.name&&(e.scoped=!0),"module"===i.name&&(e.module=i.value||!0),"src"===i.name&&(e.src=i.value)}}function r(n,a,s){if(1===i&&o){o.end=a;var r=et(e.slice(o.start,o.end));"template"!==o.type&&t.pad&&(r=l(o,t.pad)+r),o.content=r,o=null}i--}function l(t,n){if("space"===n)return e.slice(0,t.start).replace(Wt," ");var i=e.slice(0,t.start).split(St).length,o="script"!==t.type||t.lang?"\n":"//\n";return Array(i).join(o)}return Pt(e,{start:a,end:r}),n}var Et={name:"plugin-list",props:{name:{type:String,default:null},description:{type:String,default:null},configUrl:{type:String,default:null},pluginManager:{type:[Object],default:null},workspace:{type:String,default:"default"},title:{type:String,default:null},initSearch:{type:String,default:null},center:{type:Boolean,default:!0},plugins:{type:Array,default:function(){return null}}},data:function(){return{loading:!1,search:"",editorCode:"",editorPlugin:null,showEditor:!1,plugin_name:"",containerWidth:500,uri_root:null,plugin_dir:null,manifest:null,available_plugins:[],searched_plugins:[],showRemoveConfirmation:!1,plugin2_remove_:null,showDocsDialog:!1,docs:null,pm:null}},created:function(){this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus;var e=new Ge.a.Renderer;e.link=function(e,t,n){var i=Ge.a.Renderer.prototype.link.call(this,e,t,n);return i.replace("<a","<a target='_blank' ")},Ge.a.setOptions({renderer:e}),P.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),this.sanitizedMarked=function(e){return P.a.sanitize(Ge()(e))}},mounted:function(){var e=this;if(this.search=this.initSearch||"",this.containerWidth=this.$refs.container.offsetWidth,this.event_bus.on("resize",this.updateSize),this.pm=this.pluginManager,this.plugins)this.available_plugins=this.plugins,this.searched_plugins=this.plugins,this.search&&this.searchPlugin();else if(this.configUrl){var t=this.configUrl;(t.startsWith("https://raw.githubusercontent.com")||t.startsWith("https://gist.githubusercontent.com"))&&-1===t.indexOf("?")&&(t=t+"?"+I()),m.a.get(t).then((function(t){if(t&&t.data&&t.data.plugins){e.manifest=t.data,e.available_plugins=e.manifest.plugins,e.searched_plugins=e.manifest.plugins;var n=e.manifest.uri_root;n.startsWith("http")||(n=e.configUrl.replace(new RegExp("manifest.imjoy.json$"),M.a.trim(n,"/")));for(var i=0;i<e.available_plugins.length;i++){var o=e.available_plugins[i];o.uri=o.uri||o.name+".html",o.uri.startsWith(n)||o.uri.startsWith("http")||(o.uri=n+"/"+o.uri),o._id=o._id||o.name.replace(/ /g,"_")}e.plugin_dir=e.manifest.uri_root,e.plugin_dir?(e.uri_root=location.protocol+"//"+location.host,e.plugin_dir.startsWith("http")||(e.plugin_dir=e.uri_root+e.plugin_dir)):(e.uri_root="",e.plugin_dir=""),e.search&&e.searchPlugin()}}))}},beforeDestroy:function(){this.event_bus.off("resize",this.updateSize)},watch:{plugins:{handler:function(e){this.$data.available_plugins=e,this.$data.searched_plugins=e},deep:!0}},methods:{toLower:function(e){return e.toString().toLowerCase()},searchByName:function(e,t){var n=this;return t?e.filter((function(e){return n.toLower(e.name+" "+e.description).includes(n.toLower(t))})):e},searchPlugin:function(){this.searched_plugins=this.searchByName(this.available_plugins,this.search)},updateSize:function(){this.containerWidth=this.$refs.container.offsetWidth},downloadCode:function(){this.$emit("input",this.codeValue);var e=this.window&&this.window.plugin&&this.window.plugin.name?this.window.plugin.name+"_"+I()+".imjoy.html":"plugin_"+I()+".imjoy.html",t=new Blob([this.codeValue],{type:"text/plain;charset=utf-8"});Object(d["saveAs"])(t,e)},showDocs:function(e){var t=this;if(e.installed)this.pm.getPluginDocs(e._id).then((function(e){t.docs=e,t.showDocsDialog=!0,t.$forceUpdate()})).catch((function(t){console.log("error occured when editing ",e.name,t)}));else{var n=e.uri;(n.startsWith("https://raw.githubusercontent.com")||n.startsWith("https://gist.githubusercontent.com"))&&-1===n.indexOf("?")&&(n=n+"?"+I()),m.a.get(n).then((function(e){if(e&&e.data){var i=Ot(e.data);t.docs=i.docs&&i.docs[0]&&i.docs[0].content,t.showDocsDialog=!0,t.$forceUpdate()}else alert("failed to get plugin code from "+n)}))}},showCode:function(e){var t=this;if(e.installed)this.pm.getPluginSource(e._id).then((function(n){t.editorCode=n,t.editorPlugin=e,t.plugin_name="Plugin Source Code:"+e.name,t.showEditor=!0,t.$forceUpdate()})).catch((function(t){console.log("error occured when editing ",e.name,t)}));else{var n=e.uri;(n.startsWith("https://raw.githubusercontent.com")||n.startsWith("https://gist.githubusercontent.com"))&&-1===n.indexOf("?")&&(n=n+"?"+I()),m.a.get(n).then((function(i){i&&i.data?(t.editorCode=i.data,t.editorPlugin=e,t.plugin_name="Plugin Source Code",t.showEditor=!0,t.$forceUpdate()):alert("failed to get plugin code from "+n)}))}},updateAll:function(){var e=this,t=[],n=!0,i=!1,o=void 0;try{for(var a,s=this.available_plugins[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var r=a.value;r.installed&&t.push(this.install(r,r.tag))}}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}Promise.all(t).then((function(){console.log("All plugins updated successfully."),e.$emit("message","All plugins updated successfully.")})).catch((function(t){console.error("Plugins updated with error.",t),e.$emit("message","Plugins updated with error.")}))},install:function(e,t){var n=this;this.pm&&this.pm.installPlugin&&(this.loading=!0,this.$forceUpdate(),this.pm.installPlugin(e,t).then((function(){n.$forceUpdate()})).catch((function(e){n.$emit("message",e),n.$forceUpdate()})).finally((function(){n.loading=!1,n.$forceUpdate()})))},remove:function(e){var t=this;if(this.pm){var n=this.pm.removePlugin(e);n&&n.then((function(){t.$forceUpdate()})).catch((function(e){t.$emit("message",e),t.$forceUpdate()}))}}}},At=Et,Dt=(n("e7841"),Object(H["a"])(At,Be,He,!1,null,"3ea0adcb",null)),It=Dt.exports,Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"plugin-editor"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading loading-lg floating"}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"floating-text"},[e._v("Loading code...")]),e._v(" "),n("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file_form"},[n("input",{ref:"file_select",staticClass:"md-file",attrs:{type:"file",multiple:""},on:{change:e.fileSelected}})]),e._v(" "),e.window?n("md-toolbar",{staticClass:"md-dense editor-toolbar md-layout",attrs:{"md-elevation":"1"}},[n("div",{staticClass:"md-toolbar-section-start"},[n("md-menu",{attrs:{"md-size":"big"}},[n("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("folder_open")]),e._v(" "),n("md-tooltip",{staticClass:"md-medium-hide"},[e._v("Open File")])],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{on:{click:function(t){e.$refs.file_form.reset(),e.$refs.file_select.click()}}},[n("md-icon",[e._v("insert_drive_file")]),e._v("Open Local File\n          ")],1),e._v(" "),n("md-menu-item",{attrs:{disabled:e.window.engine_manager.engines.length<=0},on:{click:function(t){e.openEngineFile()}}},[n("md-icon",[e._v("add_to_queue")]),e._v("Open Engine File\n            "),n("md-tooltip",[e._v("Load files through Plugin Engine")])],1)],1)],1),e._v(" "),e.code_origin||e.lastModified?n("md-switch",{on:{change:e.watchModeChanged},model:{value:e.watch_file,callback:function(t){e.watch_file=t},expression:"watch_file"}},[n("md-tooltip",{staticClass:"md-medium-hide"},[e._v("Watch content change automatically.\n        ")]),e._v("\n        Watch\n      ")],1):e._e(),e._v(" "),e.watch_file?n("md-switch",{model:{value:e.run_changed_file,callback:function(t){e.run_changed_file=t},expression:"run_changed_file"}},[n("md-tooltip",{staticClass:"md-medium-hide"},[e._v("Run automatically when code changes.\n        ")]),e._v("\n        AutoRun\n      ")],1):e._e(),e._v(" "),n("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.run()}}},[n("md-icon",[e._v("play_arrow")]),e._v(" "),n("md-tooltip",{staticClass:"md-medium-hide"},[e._v("Save and run this plugin (Ctrl+E)")])],1),e._v(" "),n("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.save()}}},[n("md-icon",[e._v("save")]),e._v(" "),n("md-tooltip",{staticClass:"md-medium-hide"},[e._v("Save this plugin (Ctrl+S)")])],1),e._v(" "),n("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.saveAs()}}},[n("md-icon",[e._v("cloud_download")]),e._v(" "),n("md-tooltip",[e._v("Export this plugin")])],1),e._v(" "),e.window&&e.window.config&&e.window.config._id?n("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.remove()}}},[n("md-icon",[e._v("delete")]),e._v(" "),n("md-tooltip",[e._v("Remove this plugin")])],1):e._e(),e._v(" "),this.editor&&e.window&&e.window.config&&e.window.config.tags&&e.window.config.tags.length>0?n("md-field",{staticStyle:{"max-width":"100px"}},[n("md-select",{attrs:{id:"tag",name:"tag"},on:{"md-selected":function(t){e.window.config.tags.includes(e.window.config.tag)&&e.reload()}},model:{value:e.window.config.tag,callback:function(t){e.$set(e.window.config,"tag",t)},expression:"window.config.tag"}},e._l(e.window.config.tags,(function(t){return n("md-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))),e._v(" "),n("md-tooltip",[e._v("Select a tag for testing, the plugin will be reloaded.")])],1):e._e(),e._v(" "),this.editor&&e.window&&e.window.config&&e.window.config.engine_mode&&e.window.engine_manager?n("md-field",{staticStyle:{"max-width":"220px"}},[n("md-select",{attrs:{id:"engine_mode",name:"tag"},on:{"md-selected":function(t){e.reload()}},model:{value:e.window.config.engine_mode,callback:function(t){e.$set(e.window.config,"engine_mode",t)},expression:"window.config.engine_mode"}},[n("md-option",{attrs:{value:"auto"}},[e._v("auto")]),e._v(" "),e._l(e.window.engine_manager.matchEngineByType(e.window.config.type),(function(t){return n("md-option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],2),e._v(" "),n("md-tooltip",[e._v("Select an engine, the plugin will be reloaded.")])],1):e._e()],1)]):e._e(),e._v(" "),n("div",{ref:"code_editor",staticClass:"code_editor",class:e.window?"editor-with-toolbar":"editor-without-toolbar",staticStyle:{}})],1)},Ft=[],Mt=n("c2c6"),zt=n("69a0"),Tt=n.n(zt);function Lt(e,t,n,i,o,a,s){try{var r=e[a](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(i,o)}function Jt(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){Lt(a,i,o,s,r,"next",e)}function r(e){Lt(a,i,o,s,r,"throw",e)}s(void 0)}))}}window.MonacoEnvironment={getWorkerUrl:function(){var e=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");return"data:text/javascript;charset=utf-8,".concat(encodeURIComponent("\n      self.MonacoEnvironment = {\n        baseUrl: '".concat(e,"/static'\n      };\n      try {\n        importScripts('").concat(e,"/static/vs/base/worker/workerMain.js');\n      } catch (e) {\n        console.error(e)\n      } finally {\n\n      }\n      ")))}};var Rt={name:"joy",props:["value","title","pluginId","window"],data:function(){return{codeValue:"",editor:null,saved:!1,code_origin:null,watch_file:!1,run_changed_file:!1,loading:!1,watch_timer:null,lastModified:null,local_file:null}},created:function(){this.store=this.$root.$data.store,this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus,this.event_bus&&this.event_bus.on("resize",this.updateSize)},beforeDestroy:function(){this.event_bus&&this.event_bus.off("resize",this.updateSize),this.watch_timer&&window.clearInterval(this.watch_timer)},mounted:function(){var e=this;this.$el.addEventListener("touchmove",(function(e){e.preventDefault()})),this.codeValue=this.value,this.editor=Mt["editor"].create(this.$refs.code_editor,{value:this.codeValue,language:"html",minimap:{enabled:this.$el.clientWidth>500}}),this.window.api.on("refresh",(function(){e.editor.layout()})),this.window&&this.window.api.on("resize",(function(){e.$nextTick(e.updateSize)})),this.updateSize(),this.editor.addCommand(window.monaco.KeyMod.CtrlCmd|window.monaco.KeyCode.KEY_S,(function(){e.save()})),this.editor.addCommand(window.monaco.KeyMod.CtrlCmd|window.monaco.KeyCode.KEY_E,(function(){e.run()})),this.editor.addCommand(window.monaco.KeyMod.CtrlCmd|window.monaco.KeyCode.KEY_L,(function(){e.loadCodeFromURL()}))},methods:{updateSize:function(){var e=this;if(this.editor){var t=this.$el.clientWidth>500,n=this.$el.clientWidth>900;this.editor.updateOptions({minimap:{enabled:n},lineNumbers:t?"on":"off",folding:t,lineDecorationsWidth:t?5:2}),this.editor.layout(),setTimeout((function(){e.editor.layout(),e.window.refresh()}),200),setTimeout((function(){e.editor.layout(),e.window.refresh()}),500)}},save:function(){var e=this;return A(this.window.plugin_manager),new Promise((function(t,n){e.editor?(e.codeValue=e.editor.getValue(),e.$emit("input",e.codeValue),e.window.plugin_manager.savePlugin({pluginId:e.pluginId,code:e.codeValue,tag:e.window.config&&e.window.config.tag,origin:e.window.config&&e.window.config.origin}).then((function(n){e.window.data.config=n,e.saved=!0,e.reload().catch((function(){e.window.config=n})).finally((function(){e.window.data._id=n._id,e.window.name="Edit-"+n.name,e.window.data._name=n.name,e.$forceUpdate(),t()}))}))):n("editor is not available")}))},fileSelected:function(){this.lastModified=null,this.$refs.file_select.files&&(this.local_file=this.$refs.file_select.files[0],this.loadCodeFromFile(this.local_file,!1))},watchModeChanged:function(){var e=this;this.watch_file?(this.editor.updateOptions({readOnly:!0}),this.lastModified="old",this.watch_timer=setInterval((function(){e.$forceUpdate(),e.code_origin?e.loadCodeFromURL():e.loadCodeFromFile(e.local_file,!0)}),1e3)):(this.editor.updateOptions({readOnly:!1}),this.watch_timer&&(window.clearInterval(this.watch_timer),this.watch_timer=null),this.loading=!1,this.run_changed_file=!1,this.$forceUpdate())},loadCodeFromFile:function(e,t){var n=this;if(e=e||this.local_file,e){this.code_origin=null;var i=new FileReader;i.onload=function(){n.local_file=e;try{var o=i.result;n.lastModified==e.lastModified&&Tt.a.hash(o)===Tt.a.hash(n.editor.getValue())||(n.lastModified=e.lastModified,n.loading=!0,n.$forceUpdate(),n.window.plugin_manager.parsePluginCode(o),n.editor.setValue(o),n.run_changed_file?n.run():t&&n.save())}catch(a){n.window.plugin_manager.showMessage("Failed to load plugin source code, error: ".concat(a))}finally{n.loading&&setTimeout((function(){n.loading=!1,n.$forceUpdate()}),1e3)}},i.onerror=function(e){console.error(e),n.window.plugin_manager.showMessage("Failed to load plugin source code, error: ".concat(e)),n.watch_timer&&clearInterval(n.watch_timer),n.watch_file=!1,n.$forceUpdate()},i.readAsText(e)}},openEngineFile:function(e){var t=this;return Jt(c.a.mark((function n(){var i,o;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.window.plugin_manager.imjoy_api,n.prev=1,n.t0=e,n.t0){n.next=7;break}return n.next=6,i.showFileDialog(null,{title:"Load plugin source file",uri_type:"url",mode:"single",type:"file"});case 6:n.t0=n.sent;case 7:o=n.t0,t.code_origin=o,t.$refs.file_select.value="",t.loadCodeFromURL(),n.next=16;break;case 13:n.prev=13,n.t1=n["catch"](1),t.window.plugin_manager.showMessage("Failed to load plugin source code, error: ".concat(n.t1));case 16:case"end":return n.stop()}}),n,null,[[1,13]])})))()},loadCodeFromURL:function(){var e=this;return Jt(c.a.mark((function t(){var n,i,o;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.code_origin&&e.code_origin.url){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,m.a.get(e.code_origin.url+"?"+I());case 5:n=t.sent,n&&n.data?(i=n.data,Tt.a.hash(i)!==Tt.a.hash(e.editor.getValue())&&(e.loading=!0,e.$forceUpdate(),o=e.window.plugin_manager.parsePluginCode(i),e.window.name=o.name,e.editor.setValue(i),e.run_changed_file?e.run():e.save())):e.window.plugin_manager.showMessage("Failed to load plugin source code."),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),e.window.plugin_manager.showMessage("Failed to load plugin source code, error: ".concat(t.t0));case 12:return t.prev=12,e.loading&&setTimeout((function(){e.loading=!1,e.$forceUpdate()}),1e3),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})))()},run:function(){var e=this;return Jt(c.a.mark((function t(){var n,i,o,a;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return A(e.window.plugin_manager),t.next=3,e.save();case 3:if(n={},i=e.window.plugin,i&&i.api){t.next=8;break}return console.error("plugin is not loaded."),t.abrupt("return");case 8:if(e.window_plugin_id&&!e.window.plugin_manager.wm.window_ids[e.window_plugin_id]&&(e.window_plugin_id=null),e.window_plugin_id||!i.config||!i.config.ui){t.next=19;break}if(!(i.config.ui.indexOf("{")>-1)){t.next=16;break}return t.next=13,e.window.plugin_manager.imjoy_api.showDialog(i,i.config);case 13:n=t.sent,t.next=17;break;case 16:n={};case 17:t.next=20;break;case 19:n=e.window_plugin_config;case 20:return e.window_plugin_id&&(o=document.getElementById("iframe_"+e.window_plugin_id),o&&o.parentNode.removeChild(o)),t.next=23,i.api.run({id:e.window_plugin_id,config:n,data:{}});case 23:a=t.sent,(i.config&&"window"===i.config.type||"web-python-window"===i.config.type)&&(e.window_plugin_id=a&&a.__id__,e.window_plugin_config=n);case 25:case"end":return t.stop()}}),t)})))()},remove:function(){var e=this;A(this.window.plugin_manager),this.codeValue=this.editor.getValue(),this.$emit("input",this.codeValue),this.window.data._id=null,this.window.plugin_manager.removePlugin(this.window.config).then((function(){e.window.config={},e.window.plugin=null}))},reload:function(){var e=this;return A(this.window.plugin_manager),this.$forceUpdate(),new Promise((function(t,n){if(e.editor){if(e.codeValue=e.editor.getValue(),e.codeValue){e.$emit("input",e.codeValue),e.window.config&&(e.window.config.code=e.codeValue);var i=e.window.config.tag,o=e.window.data&&e.window.data.config;o&&e.window.config&&e.window.config.tag&&(e.window.data.config.tags.includes(e.window.config.tag)||(i=e.window.data.config.tags[0]));var a=e.window.config&&e.window.config.engine_mode;e.window.plugin_manager.reloadPlugin({_id:e.window.data._id,engine_mode:a,tag:i,name:e.window.data._name,code:e.codeValue,origin:e.window.config&&e.window.config.origin}).then((function(n){e.window.config=n.config,e.window.plugin=n,e.$forceUpdate(),t()})).catch((function(e){n(e)}))}}else n("editor is not available.")}))},saveAs:function(){this.codeValue=this.editor.getValue(),this.$emit("input",this.codeValue);var e=this.window&&this.window.config&&this.window.config.name?this.window.config.name+"_"+I()+".imjoy.html":"plugin_"+I()+".imjoy.html",t=new Blob([this.codeValue],{type:"text/plain;charset=utf-8"});Object(d["saveAs"])(t,e)}}},Nt=Rt,qt=(n("5865"),Object(H["a"])(Nt,Ut,Ft,!1,null,"bd2d5016",null)),Vt=qt.exports,Kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"plugin-icon"},[e.icon?e.icon.startsWith("http")?n("img",{staticClass:"icon-image",attrs:{src:e.icon}}):n("md-icon",[e._v(e._s(e.icon)+" ")]):n("md-icon",[e._v("extension")])],1)},Bt=[],Ht={name:"plugin-icon",props:{icon:{type:String,default:""}},created:function(){}},Yt=Ht,Gt=(n("2733"),Object(H["a"])(Yt,Kt,Bt,!1,null,"5b5c9f74",null)),Zt=Gt.exports,Qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("div",[e.isFolder?n("span",{on:{click:e.toggle}},[e._v("["+e._s(e.open?"-":"+")+"]")]):e._e(),e._v(" "),n("span",{staticClass:"noselect",on:{click:function(t){(e.root===e.selected||e.selected&&Array.isArray(e.selected)&&e.selected.indexOf(e.root)>=0)&&"file"!==e.model.type?e.load():e.select({target:e.model,path:e.root},t.shiftKey)},dblclick:function(t){e.load()}}},["file"===e.model.type?n("md-icon",[e._v("insert_drive_file")]):n("md-icon",[e._v("folder_open")]),e._v(" "),n("span",{staticClass:"noselect",class:{bold:e.isFolder,selected:e.root===e.selected||e.selected&&Array.isArray(e.selected)&&e.selected.indexOf(e.root)>=0}},[e._v(e._s(e.isFolder?e.root:e.model.name))])],1),e._v(" "),e.isFolder||e.model.children&&0===e.model.children.length?n("span",{staticClass:"item",on:{click:function(t){e.up()}}},[n("md-icon",[e._v("arrow_upward")])],1):e._e(),e._v(" "),e.model.drives?n("div",{staticClass:"drives"},e._l(e.model.drives,(function(t){return n("span",{key:t,staticClass:"noselect",on:{click:function(n){e.select({target:e.model,path:t}),e.load({target:e.model,path:t})}}},[n("md-icon",[e._v("storage")]),e._v(" "),n("span",{staticClass:"noselect",class:{bold:e.isFolder,selected:t===e.selected||e.selected&&Array.isArray(e.selected)&&e.selected.indexOf(t)>=0}},[e._v(e._s(t))])],1)}))):e._e()]),e._v(" "),e.open&&e.isFolder?n("ul",[e._l(e.sortedFiles,(function(t){return n("file-item",{key:t.name,staticClass:"item",attrs:{root:e.root+"/"+t.name,model:t,selected:e.selected},on:{load:function(t){e.load(t)},select:function(t){e.select(t)},select_append:function(t){e.select(t,!0)}}})})),e._v(" "),e.model.children.length>e.max_files?n("md-button",{staticClass:"md-primary",on:{click:function(t){e.max_files=e.max_files+200}}},[e._v("Load more ...")]):e._e()],2):e._e()])},Xt=[],en=200,tn={name:"file-item",props:{model:Object,selected:[String,Array],root:{type:String,default:"."},file_manager:Object},data:function(){return{open:!0,max_files:en}},mounted:function(){},computed:{isFolder:function(){return this.model.children&&this.model.children.length},sortedFiles:function(){function e(e,t){return e.name<t.name?-1:e.name>t.name?1:0}return this.model.children.slice(0,this.max_files).sort(e)}},methods:{up:function(e){this.$emit("load",e||{target:this.model,path:this.root+"/../"})},load:function(e){this.$emit("load",e||{target:this.model,path:this.root,file_manager:this.file_manager}),this.max_files=en},select:function(e,t){t?this.$emit("select_append",e||{target:this.model,path:this.root+"/"+this.model.name}):this.$emit("select",e||{target:this.model,path:this.root+"/"+this.model.name})},toggle:function(){this.isFolder&&(this.open=!this.open)}}},nn=tn,on=(n("9a0e"),Object(H["a"])(nn,Qt,Xt,!1,null,"6d744f41",null)),an=on.exports,sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-dialog",{attrs:{"md-active":e.show_,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(t){e.show_=t}}},[n("md-dialog-title",[e._v(e._s(this.options.title||"ImJoy File Dialog")+"\n    "),n("md-button",{staticClass:"md-accent",staticStyle:{position:"absolute",top:"8px",right:"5px"},on:{click:function(t){e.show_=!1,e.reject("file dialog canceled by the user.")}}},[n("md-icon",[e._v("clear")])],1)],1),e._v(" "),n("md-dialog-content",[e._l(e.file_managers,(function(t){return n("md-button",{directives:[{name:"show",rawName:"v-show",value:e.show_all_file_managers&&t.connected,expression:"show_all_file_managers && file_manager.connected"}],key:t.id,class:e.selected_file_manager===t?"md-raised":"",staticStyle:{"text-transform":"none"},on:{click:function(n){e.selectFileManager(t)}}},[e._v("\n      "+e._s(t.name)+"\n    ")])})),e._v(" "),n("div",{staticClass:"loading-info"},[e.dropping?n("h5",[e._v("Drop files to upload to "+e._s(e.root))]):e._e()]),e._v(" "),e.selected_file_manager&&e.file_tree?n("ul",{class:e.dropping?"dropping-files":"",attrs:{disabled:!e.selected_file_manager||!e.selected_file_manager.connected}},[n("file-item",{attrs:{model:e.file_tree,file_manager:e.selected_file_manager,root:e.root,selected:e.file_tree_selection},on:{load:e.loadFile,select:e.fileTreeSelected,select_append:e.fileTreeSelectedAppend}})],1):e.selected_file_manager&&e.selected_file_manager.connected?n("div",{staticClass:"loading loading-lg"}):n("p",[e._v("\n      No file manager is available.\n    ")])],2),e._v(" "),n("md-dialog-actions",[n("md-menu",{staticStyle:{flex:"auto"}},[n("md-button",{staticClass:"md-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("menu")]),e._v("options\n      ")],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{staticClass:"md-primary",on:{click:function(t){e.go()}}},[n("md-icon",[e._v("forward")]),e._v(" Go to Folder\n        ")],1),e._v(" "),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.file_tree_selection_info,expression:"file_tree_selection_info"}],staticClass:"md-primary",on:{click:function(t){e.downloadFiles()}}},[n("md-icon",[e._v("cloud_download")]),e._v(" Download\n        ")],1),e._v(" "),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.file_tree_selection_info,expression:"file_tree_selection_info"}],staticClass:"md-accent",on:{click:function(t){e.remove()}}},[n("md-icon",[e._v("delete")]),e._v(" Delete\n        ")],1)],1)],1),e._v(" "),e.status_text?n("p",{staticClass:"md-small-hide",staticStyle:{flex:"auto"}},[e._v("\n      "+e._s(e.status_text.slice(0,100))+"\n    ")]):e._e(),e._v(" "),n("md-button",{staticClass:"md-primary",attrs:{disabled:!e.file_tree_selection},on:{click:function(t){e.show_=!1,e.resolve(e.file_tree_selection)}}},[e._v("OK\n      "),e.file_tree_selection?n("md-tooltip",{staticClass:"md-small-hide"},[e._v("Selected: "+e._s(e.file_tree_selection))]):e._e()],1),e._v(" "),n("md-button",{staticClass:"md-primary",on:{click:function(t){e.show_=!1,e.reject("file dialog canceled by the user.")}}},[e._v("Cancel")])],1),e._v(" "),n("md-progress-bar",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{"md-mode":"determinate","md-value":e.loading_progress}})],1)},rn=[];function ln(e){return ln="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(e)}function cn(e,t,n,i,o,a,s){try{var r=e[a](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(i,o)}function dn(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){cn(a,i,o,s,r,"next",e)}function r(e){cn(a,i,o,s,r,"throw",e)}s(void 0)}))}}var un={name:"file-dialog",props:{file_managers:Array,uploadFileToUrl:Function},data:function(){return{root:null,options:{},show_:!1,file_tree_selection:null,file_tree_selection_info:null,file_tree:null,resolve:null,reject:null,selected_file_manager:null,show_all_file_managers:!0,dropping:!1,loading:!1,status_text:"Drag and drop here to upload files",loading_progress:0}},created:function(){this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus,this.event_bus&&(this.event_bus.on("drag_upload_enter",this.showDropping),this.event_bus.on("drag_upload_leave",this.hideDropping),this.event_bus.on("drag_upload",this.uploadFiles))},beforeDestroy:function(){this.event_bus&&(this.event_bus.off("drag_upload_enter",this.showDropping),this.event_bus.off("drag_upload_leave",this.hideDropping),this.event_bus.off("drag_upload",this.uploadFiles))},computed:{no_file_manager_available:function(){if(this.file_managers){var e=!1,t=!0,n=!1,i=void 0;try{for(var o,a=this.file_managers[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;if(s.connected){e=!0;break}}}catch(r){n=!0,i=r}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return!e}return!0}},methods:{upload:function(e,t){var n=this;return dn(c.a.mark((function i(){var o,a;return c.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n.show_){i.next=2;break}return i.abrupt("return");case 2:return n.status_text="requesting upload url from the file_manager...",i.next=5,n.selected_file_manager.requestUploadUrl({dir:n.root,path:e.relativePath,overwrite:!0,file_manager:n.selected_file_manager.url});case 5:return o=i.sent,console.log("loading file to url",o),n.status_text=t,i.next=10,n.uploadFileToUrl(null,{file:e,url:o,progress:function(e,i){n.loading_progress=100*e/i,n.status_text=t+" (".concat(Math.round(n.loading_progress),"%)"),n.$forceUpdate()}});case 10:a=i.sent,n.status_text="file uploaded to ".concat(a.path,".");case 12:case"end":return i.stop()}}),i)})))()},uploadFiles:function(e){var t=this;return dn(c.a.mark((function n(){var i;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.status_text="Uploading...",t.loading=!0,n.prev=2,i=0;case 4:if(!(i<e.length)){n.next=19;break}if(!e[i].name.startsWith(".")){n.next=8;break}return console.log("skipping file: "+e[i].relativePath),n.abrupt("continue",16);case 8:if(!t.selected_file_manager.putFile){n.next=14;break}return t.status_text="Uploading ".concat(i+1,"/").concat(e.length,": ").concat(e[i].name),n.next=12,t.selected_file_manager.putFile(e[i],j["utils"].pathJoin(t.root,e[i].name));case 12:n.next=16;break;case 14:return n.next=16,t.upload(e[i],"Uploading ".concat(i+1,"/").concat(e.length,": ").concat(e[i].name));case 16:i++,n.next=4;break;case 19:t.status_text="üéâUploaded ".concat(e.length," files."),n.next=25;break;case 22:n.prev=22,n.t0=n["catch"](2),t.status_text="Failed to upload, error:"+(n.t0?n.t0.toString():"undefined");case 25:return n.prev=25,t.loading=!1,t.refreshList(),n.finish(25);case 29:case"end":return n.stop()}}),n,null,[[2,22,25,29]])})))()},showDropping:function(){this.dropping=!0,this.$forceUpdate()},hideDropping:function(){this.dropping=!1,this.$forceUpdate()},fileTreeSelected:function(e){"file"===this.options.type&&"dir"===e.target.type||(this.file_tree_selection=e.path,this.file_tree_selection_info=e,this.$forceUpdate())},fileTreeSelectedAppend:function(e){Array.isArray(this.file_tree_selection)||(this.file_tree_selection=this.file_tree_selection?[this.file_tree_selection]:[],this.file_tree_selection_info=this.file_tree_selection_info?[this.file_tree_selection_info]:[]),this.file_tree_selection.push(e.path),this.file_tree_selection_info.push(e),this.$forceUpdate()},refreshList:function(){var e=this;this.selected_file_manager.listFiles(this.root,this.options.type,this.options.recursive).then((function(t){e.root=t.path,e.file_tree=t,e.$forceUpdate()}))},go:function(){var e=this,t=prompt("Go to the folder",this.root);t&&t!=this.root&&this.selected_file_manager.listFiles(t,"dir",!1).then((function(t){e.root=t.path,e.file_tree=t,e.selected_file_manager.listFiles(t.path,e.options.type,e.options.recursive).then((function(t){e.root=t.path,e.file_tree=t,e.$forceUpdate()})),e.$forceUpdate()})).catch((function(e){alert(e.toString())}))},loadFile:function(e){var t=this;if("file"!=e.target.type){if(e.path===this.root)return void this.go();this.selected_file_manager.listFiles(e.path,this.options.type,this.options.recursive).then((function(e){t.root=e.path,t.file_tree=e,t.$forceUpdate()}))}else this.show_=!1,"single"===this.options.mode&&"object"===ln(this.file_tree_selection)?this.resolve(this.file_tree_selection[0]):"multiple"===this.options.mode&&"string"===typeof this.file_tree_selection?this.resolve([this.file_tree_selection]):this.resolve(this.file_tree_selection)},showDialog:function(e,t){var n=this;return this.show_=!0,this.options=t,this.options.title=this.options.title||"ImJoy File Dialog",this.options.root=this.options.root||"./",this.options.mode=this.options.mode||"single|multiple",this.options.uri_type=this.options.uri_type||"path",this.options.return_object=void 0===this.options.return_object||this.options.return_object,this.$nextTick((function(){n.options.file_manager?n.selected_file_manager=n.options.file_manager:n.selected_file_manager=n.file_managers[0],n.refreshList()})),"file"!=this.options.type&&this.options.root?this.file_tree_selection=this.options.root:this.file_tree_selection=null,new Promise((function(e,t){if("path"===n.options.uri_type?(n.resolve=function(t){n.options.return_object?e({path:t,file_manager:n.selected_file_manager.url}):e(t)},n.reject=function(){n.options.return_object?e(null):t("User cancelled selection.")}):"url"===n.options.uri_type?(n.reject=function(){n.options.return_object?e(null):t("User cancelled selection.")},n.resolve=function(i){if("string"===typeof i)n.selected_file_manager.getFileUrl({path:i,file_manager:n.selected_file_manager.url}).then((function(t){n.options.return_object?e({type:"imjoy/url",url:t,file_manager:n.selected_file_manager.url,path:i}):e(t)})).catch(t);else{var o=[],a=!0,s=!1,r=void 0;try{for(var l,c=i[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var d=l.value;o.push(n.selected_file_manager.getFileUrl({path:d,file_manager:n.selected_file_manager.url}))}}catch(u){s=!0,r=u}finally{try{a||null==c.return||c.return()}finally{if(s)throw r}}Promise.all(o).then((function(t){n.options.return_object?e({type:"imjoy/url",url:t,file_manager:n.selected_file_manager.url,path:i}):e(t)})).catch(t)}}):t("unsupported uri_type: "+n.options.uri_type),n.root=n.options.root,n.show_all_file_managers){var i=!0,o=!1,a=void 0;try{for(var s,r=n.file_managers[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var l=s.value;if(l.connected){n.selectFileManager(l);break}}}catch(c){o=!0,a=c}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}}else n.selectFileManager(n.selected_file_manager);n.dropping=!1,n.loading_progress=0,n.status_text="Drag and drop here to upload files"}))},selectFileManager:function(e){var t=this;return new Promise((function(n,i){t.selected_file_manager=e,t.file_tree=null,t.$forceUpdate(),t.selected_file_manager.listFiles(t.options.root,t.options.type,t.options.recursive).then((function(e){t.root=e.path,t.file_tree=e,t.$forceUpdate(),n()})).catch(i)}))},remove:function(){var e=this;return dn(c.a.mark((function t(){var n,i,o,a,s,r,l;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=[],t.prev=1,e.file_tree_selection_info){t.next=4;break}throw"no file selected";case 4:n=Array.isArray(e.file_tree_selection_info)?e.file_tree_selection_info:[e.file_tree_selection_info],e.file_tree_selection=null,e.file_tree_selection_info=null,i=!0,o=!1,a=void 0,t.prev=10,s=n[Symbol.iterator]();case 12:if(i=(r=s.next()).done){t.next=20;break}return l=r.value,t.next=16,e.selected_file_manager.removeFile(l.path,l.target.type,e.options.recursive);case 16:e.status_text='"'.concat(l.target.name,'" has been removed.');case 17:i=!0,t.next=12;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](10),o=!0,a=t.t0;case 26:t.prev=26,t.prev=27,i||null==s.return||s.return();case 29:if(t.prev=29,!o){t.next=32;break}throw a;case 32:return t.finish(29);case 33:return t.finish(26);case 34:e.refreshList(),t.next=40;break;case 37:t.prev=37,t.t1=t["catch"](1),e.status_text="Error occured when removing file or folder: ".concat(t.t1);case 40:case"end":return t.stop()}}),t,null,[[1,37],[10,22,26,34],[27,,29,33]])})))()},downloadFiles:function(){var e=this;return dn(c.a.mark((function t(){var n,i;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=[],e.file_tree_selection_info){t.next=3;break}throw"no file selected";case 3:for(n=Array.isArray(e.file_tree_selection_info)?e.file_tree_selection_info:[e.file_tree_selection_info],i=0;i<n.length;i++)"file"===n[i].target.type?e.download(n[i],"downloading ".concat(i+1,"/").concat(n.length,": ").concat(n[i].target.name)):e.status_text="Folder cannot be downloaded, please select files.";case 5:case"end":return t.stop()}}),t)})))()},download:function(e,t){var n=this;return dn(c.a.mark((function i(){var o,a;return c.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n.show_){i.next=2;break}return i.abrupt("return");case 2:return n.status_text="requesting upload url from the file_manager...",i.next=5,n.selected_file_manager.getFileUrl({path:e.path,file_manager:n.selected_file_manager});case 5:o=i.sent,n.status_text=t,a=document.createElement("a"),a.href=o,a.target="_blank",a.download=e.name,a.click();case 12:case"end":return i.stop()}}),i)})))()}}},mn=un,_n=(n("d7ab"),Object(H["a"])(mn,sn,rn,!1,null,"73d040bc",null)),pn=_n.exports,fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.w?n("md-card",[e.w.standalone?e._e():n("md-card-actions",{class:{"drag-handle":e.withDragHandle,"window-selected":e.w.selected,"window-header":!e.w.selected},attrs:{"md-alignment":"space-between"},nativeOn:{click:function(t){e.selectWindow(e.w,t)},dblclick:function(t){e.w.fullscreen?e.normalSize(e.w):e.fullScreen(e.w)}}},[n("md-button",{staticClass:"md-icon-button md-accent no-drag",on:{click:function(t){e.close(e.w)}}},[n("md-icon",[e._v("close")]),e._v(" "),n("md-tooltip",[e._v("Close window")])],1),e._v(" "),n("div",{staticClass:"window-title noselect"},[e._v("\n      "+e._s(e.w.name.slice(0,30)+"(#"+(e.w.index||"")+")")+"\n    ")]),e._v(" "),n("div",{staticClass:"no-drag"},[n("md-menu",{attrs:{"md-size":"big","md-direction":"bottom-end","md-active":e.options_menu_open},on:{"update:mdActive":function(t){e.options_menu_open=t}}},[n("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("more_vert")])],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{on:{click:function(t){e.options_menu_open=!1}}},[n("md-icon",[e._v("highlight_off")]),e._v(" "),n("span",[e._v("Cancel")])],1),e._v(" "),!e.w.standalone&&e.w.fullscreen?n("md-menu-item",{on:{click:function(t){e.normalSize(e.w)}}},[n("md-icon",[e._v("fullscreen")]),e._v(" "),n("span",[e._v("Normal view")])],1):e.w.standalone?e._e():n("md-menu-item",{on:{click:function(t){e.fullScreen(e.w)}}},[n("md-icon",[e._v("fullscreen")]),e._v(" "),n("span",[e._v("Fullscreen")])],1),e._v(" "),e.w.standalone?e._e():n("md-menu-item",{on:{click:function(t){e.detach(e.w)}}},[n("md-icon",[e._v("launch")]),e._v(" "),n("span",[e._v("Detach")])],1),e._v(" "),n("md-menu-item",{on:{click:function(t){e.duplicate(e.w)}}},[n("md-icon",[e._v("filter")]),e._v(" "),n("span",[e._v("Duplicate")])],1),e._v(" "),n("md-menu-item",{on:{click:function(t){e.close(e.w)}}},[n("md-icon",[e._v("close")]),e._v(" "),n("span",[e._v("Close")])],1),e._v(" "),n("md-menu-item",{on:{click:function(t){e.printObject(e.w.type,e.w.data,e.w)}}},[n("md-icon",[e._v("bug_report")]),e._v(" "),n("span",[e._v("Console.log")])],1),e._v(" "),e._l(e.w.loaders,(function(t,i){return n("md-menu-item",{key:i,on:{click:function(n){e.loaders&&e.loaders[t](e.w.data)}}},[n("md-icon",[e._v("play_arrow")]),e._v(" "),n("span",[e._v(e._s(i))])],1)}))],2)],1)],1)],1),e._v(" "),n("md-card-content",{staticClass:"plugin-iframe-container allow-scroll",class:e.w.standalone?"taller-container":"shorter-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.w.loading,expression:"w.loading"}],staticClass:"loading loading-lg floating"}),e._v(" "),e.componentNames[e.w.type]&&e.w.type.startsWith("imjoy/")?n(e.componentNames[e.w.type],{ref:"window-content",tag:"component",attrs:{w:e.w,loaders:e.loaders},on:{init:e.setAPI}}):e.w.type.startsWith("imjoy/")?n("md-empty-state",{ref:"window-content",attrs:{"md-icon":"hourglass_empty","md-label":"IMJOY.IO","md-description":""}}):n("div",{staticClass:"plugin-iframe"},[n("div",{staticClass:"plugin-iframe",attrs:{id:e.w.iframe_container}})])],1)],1):e._e()},gn=[],hn=n("6dd8"),vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-list",{staticClass:"allow-scroll"},[e.loaders&&e.w.loaders&&Object.keys(e.w.loaders).length>0?n("md-list-item",{staticClass:"md-primary",on:{click:function(t){e.loaders[e.w.loaders[Object.keys(e.w.loaders)[0]]](e.w.data)}}},[n("span",{staticClass:"md-list-item-text md-primary"},[e._v('Open with "'+e._s(Object.keys(e.w.loaders)[0])+'"')]),e._v(" "),n("md-tooltip",[e._v('click to open with "'+e._s(Object.keys(e.w.loaders)[0])+'".')])],1):n("md-list-item",[n("span",{staticClass:"md-list-item-text"},[e._v(e._s(e.dataSummary(e.w)))])]),e._v(" "),e._l(e.w.data,(function(t,i){return n("md-list-item",{directives:[{name:"show",rawName:"v-show",value:!e.isTypedArray(e.w.data)&&(!i.startsWith||!i.startsWith("_"))&&e.w.data&&!e.w.data.length||(e.w.data.length||e.w.data.byteLength)&&(e.w.data.length||e.w.data.byteLength)>0&&i<=20,expression:"\n      (!isTypedArray(w.data) &&\n        (!k.startsWith || !k.startsWith('_')) &&\n        w.data &&\n        !w.data.length) ||\n        ((w.data.length || w.data.byteLength) &&\n          (w.data.length || w.data.byteLength) > 0 &&\n          k <= 20)\n    "}],key:i},[n("md-icon",[e._v("insert_drive_file")]),e._v(" "),n("span",{staticClass:"md-list-item-text",on:{click:function(n){e.printObject(i,t)}}},[e._v(e._s(i))])],1)})),e._v(" "),e.w.data&&(e.w.data.length||e.w.data.byteLength)&&(e.w.data.length||e.w.data.byteLength)>20?n("md-list-item",{on:{click:function(t){e.printObject(e.w.data)}}},[n("md-icon",[e._v("insert_drive_file")]),e._v(" "),n("span",{staticClass:"md-list-item-text"},[e._v("...")]),e._v(" "),n("md-tooltip",[e._v("click to print the data in your console.")])],1):e._e()],2)},wn=[];function yn(e){return yn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yn(e)}var bn={name:"generic-window",type:"imjoy/generic",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")},methods:{dataSummary:function(e){return Array.isArray(e.data)?"".concat(e.type,", ").concat(yn(e.data),", length: ").concat(e.data.length):e.data.buffer&&"[object ArrayBuffer]"===Object.prototype.toString.call(e.data.buffer)?"".concat(e.type,", typedarray, length: ").concat(e.data.length):"object"===yn(e.data)?"".concat(e.type,", ").concat(yn(e.data),", length: ").concat(Object.keys(e.data).length):"".concat(e.type)},printObject:function(e,t,n){console.log(e,t,n)},isTypedArray:function(e){return!!e&&void 0!==e.byteLength}}},kn=bn,xn=(n("0529"),Object(H["a"])(kn,vn,wn,!1,null,"7eb14dc3",null)),Cn=xn.exports,jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fill-container"},[e.w.data&&e.w.data.src?n("img",{staticStyle:{height:"100%",width:"100%","object-fit":"contain"},attrs:{src:e.w.data.src}}):n("p",[e._v("No image available for display.")])])},$n=[],Pn={name:"image-window",type:"imjoy/image",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},Sn=Pn,Wn=(n("9efd"),Object(H["a"])(Sn,jn,$n,!1,null,"f44818a6",null)),On=Wn.exports,En=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"allow-scroll fill-container"},[e.w.data&&e.w.data.images&&0!=e.w.data.images.length?e._l(e.w.data.images,(function(e,t){return n("img",{key:t,staticStyle:{height:"100%",width:"100%","object-fit":"contain"},attrs:{src:e}})})):n("p",[e._v("\n    No image available for display.\n  ")])],2)},An=[],Dn={name:"image-list-window",type:"imjoy/images",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},In=Dn,Un=(n("ceea"),Object(H["a"])(In,En,An,!1,null,"85bf7dcc",null)),Fn=Un.exports,Mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("joy",{attrs:{config:e.w.config}})},zn=[],Tn={name:"panel-window",type:"imjoy/panel",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},Ln=Tn,Jn=Object(H["a"])(Ln,Mn,zn,!1,null,"7bc13713",null),Rn=Jn.exports,Nn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.plugin_info?n("md-card",[e.plugin_info.cover&&"string"===typeof e.plugin_info.cover?n("md-card-media",{attrs:{"md-ratio":"16:9"}},[n("img",{attrs:{src:e.plugin_info.cover,alt:"plugin-cover"}})]):e.plugin_info.cover?n("div",{staticClass:"carousel"},[e._l(e.plugin_info.cover,(function(e,t){return n("input",{key:t,staticClass:"carousel-locator",attrs:{id:"slide-"+t,type:"radio",name:"carousel-radio",hidden:""}})})),e._v(" "),n("div",{staticClass:"carousel-container"},e._l(e.plugin_info.cover,(function(e,t){return n("figure",{key:t,staticClass:"carousel-item"},[n("img",{staticClass:"img-responsive rounded",attrs:{src:e,alt:"plugin cover"}})])}))),e._v(" "),n("div",{staticClass:"carousel-nav"},e._l(e.plugin_info.cover,(function(t,i){return n("label",{key:i,staticClass:"nav-item text-hide c-hand",attrs:{for:"slide-"+i}},[e._v(e._s(i))])})))],2):e._e(),e._v(" "),n("md-card-header",[n("md-toolbar",{attrs:{"md-elevation":"0"}},[n("div",[n("h2",[n("plugin-icon",{attrs:{icon:e.plugin_info.icon}}),e._v("\n            "+e._s(e.plugin_info.name+" "+e.plugin_info.badges)+"\n          ")],1)]),e._v(" "),n("div",{staticClass:"md-toolbar-section-end"},[n("p",[e._v("version:"+e._s(e.plugin_info.version))])])])],1),e._v(" "),n("md-card-content",[e.w.data&&e.w.data.source&&""!=e.w.data.source.trim()?n("div",{staticStyle:{"padding-left":"10px","padding-right":"5px",overflow:"auto"},domProps:{innerHTML:e._s(e.sanitizedMarked(e.w.data.source))}}):n("h4",[e._v("\n        "+e._s(e.plugin_info&&e.plugin_info.description)+"\n        "),n("br"),e._v("\n        This plugin has no documentation!\n      ")])])],1):e._e()],1)},qn=[],Vn={name:"markdown-window",type:"imjoy/markdown",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{plugin_info:null}},created:function(){var e=new Ge.a.Renderer;e.link=function(e,t,n){var i=Ge.a.Renderer.prototype.link.call(this,e,t,n);return i.replace("<a","<a target='_blank' ")},Ge.a.setOptions({renderer:e}),P.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),this.sanitizedMarked=function(e){return P.a.sanitize(Ge()(e))}},mounted:function(){this.plugin_info=this.w&&this.w.data&&this.w.data.plugin_info,this.$emit("init")}},Kn=Vn,Bn=(n("a6c7"),Object(H["a"])(Kn,Nn,qn,!1,null,"3575b5fc",null)),Hn=Bn.exports,Yn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("plugin-editor",{ref:"code_editor",staticClass:"no-drag fill-container",attrs:{pluginId:e.w.data.id,window:e.w,editorId:"editor_"+e.w.data.id},model:{value:e.w.data.code,callback:function(t){e.$set(e.w.data,"code",t)},expression:"w.data.code"}})},Gn=[];function Zn(e){return Zn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(e)}var Qn={name:"plugin-editor-window",type:"imjoy/plugin-editor",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.w.data.engine_file_obj?this.$refs.code_editor.openEngineFile(this.w.data.engine_file_obj):this.w.data.local_file_obj&&this.$refs.code_editor.loadCodeFromFile(this.w.data.local_file_obj,!1),this.$emit("init")},methods:{dataSummary:function(e){return Array.isArray(e.data)?"".concat(e.type,", ").concat(Zn(e.data),", length: ").concat(e.data.length):e.data.buffer&&"[object ArrayBuffer]"===Object.prototype.toString.call(e.data.buffer)?"".concat(e.type,", typedarray, length: ").concat(e.data.length):"object"===Zn(e.data)?"".concat(e.type,", ").concat(Zn(e.data),", length: ").concat(Object.keys(e.data).length):"".concat(e.type)},printObject:function(e,t,n){console.log(e,t,n)}}},Xn=Qn,ei=(n("8307"),Object(H["a"])(Xn,Yn,Gn,!1,null,"b88a3cbe",null)),ti=ei.exports,ni=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"log-content"},[n("ul",e._l(e.log_history,(function(t,i){return n("li",{key:i},["image"===t.type?n("img",{attrs:{src:t.value}}):n("p",{class:"error"===t.type?"error":"info"},[e._v("\n        "+e._s(t.value||t)+"\n      ")])])}))),e._v(" "),e.log_history&&e.log_history.length>0?n("md-button",{staticClass:"md-mini",on:{click:function(t){e.clearLog()}}},[n("md-icon",[e._v("clear")]),e._v("Clear\n  ")],1):e._e(),e._v(" "),e.log_history&&e.log_history.length>0?n("md-button",{staticClass:"md-mini",on:{click:function(t){e.exportLog()}}},[n("md-icon",[e._v("cloud_download")]),e._v("Export\n  ")],1):n("p",[e._v("\n    No log available.\n  ")])],1)},ii=[],oi={name:"log-window",type:"imjoy/log",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{log_history:null}},mounted:function(){this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus,this.event_bus&&this.event_bus.on("plugin_loaded",this.fetchLog),this.log_history=this.w.data.log_history,this.plugin_id=this.w.data.plugin_id,this.plugin_name=this.w.data.plugin_name,this.$emit("init")},beforeDestroy:function(){this.event_bus&&this.event_bus.off("plugin_loaded",this.fetchLog)},methods:{fetchLog:function(e){e.name==this.w.data.plugin_name&&(this.log_history=e._log_history,this.plugin_id=e.id,this.plugin_name=e.name),this.$forceUpdate()},clearLog:function(){var e=this.log_history;e.splice(0,e.length),e._error="",e._info="",this.$forceUpdate()},exportLog:function(){var e=this.log_history,t=this.plugin_id||this.plugin_name+"_log.txt",n="",i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var l=s.value;n=l.type+":"+n+l.value+"\n"}}catch(u){o=!0,a=u}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}var c=new Blob([n],{type:"text/plain;charset=utf-8"});Object(d["saveAs"])(c,t)}}},ai=oi,si=(n("f94b"),Object(H["a"])(ai,ni,ii,!1,null,"d9b93984",null)),ri=si.exports,li=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-list",{staticClass:"files-window"},e._l(e.w.data,(function(t,i){return n("md-list-item",{key:t.name+t.relativePath},[e.w.data&&e.w.data.length>1?n("md-radio",{attrs:{value:i},model:{value:e.w.data.select,callback:function(t){e.$set(e.w.data,"select",t)},expression:"w.data.select"}}):n("md-icon",[e._v("insert_drive_file")]),e._v(" "),n("span",{staticClass:"md-list-item-text",staticStyle:{cursor:"pointer"},on:{click:function(n){e.loaders&&t.loaders&&Object.keys(t.loaders).length>0&&e.loaders[t.loaders[Object.keys(t.loaders)[0]]](t)}}},[e._v(e._s(t.name))]),e._v(" "),t.loaders&&Object.keys(t.loaders).length>0?n("md-menu",{attrs:{"md-size":"big","md-direction":"bottom-end"}},[n("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("more_horiz")])],1),e._v(" "),n("md-menu-content",e._l(t.loaders,(function(i,o){return n("md-menu-item",{key:o,on:{click:function(n){e.loaders&&e.loaders[i](t)}}},[n("span",[e._v(e._s(o))]),e._v(" "),n("md-icon",[e._v("play_arrow")])],1)})))],1):e._e()],1)})))},ci=[],di={name:"files-window",type:"imjoy/files",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},ui=di,mi=(n("0d19"),Object(H["a"])(ui,li,ci,!1,null,"59839dee",null)),_i=mi.exports,pi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.w.data&&e.w.data.length&&e.w.data.length>0?n("ul",e._l(e.w.data,(function(t){return n("li",{key:t.url||t},[n("a",{attrs:{href:t.url||t,target:"_blank"}},[e._v(e._s(t.text||t))])])}))):n("p",[e._v("No url.")])},fi=[],gi={name:"url-list-window",type:"imjoy/url_list",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},hi=gi,vi=Object(H["a"])(hi,pi,fi,!1,null,"35dd28c2",null),wi=vi.exports,yi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.w.data&&e.w.data.first&&e.w.data.second?n("comparify",{ref:"compare",staticClass:"bg-white h-64 w-full",attrs:{value:e.w.data.offset||50}},[n("img",{staticClass:"h-64 object-fit-first h-full w-full",attrs:{slot:"first",src:e.w.data.first,alt:""},slot:"first"}),e._v(" "),n("img",{staticClass:"object-fit-second h-full w-full",attrs:{slot:"second",src:e.w.data.second,alt:""},slot:"second"})]):n("p",[e._v("No image available for display.")])},bi=[],ki=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"compare-wrapper"},[n("div",{staticClass:"compare"},[n("div",{staticClass:"compare__content",style:{width:e.width}},[e._t("first")],2),e._v(" "),n("div",{staticClass:"handle-wrap",style:{left:"calc("+e.compareWidth+"% - var(--handle-line-width) / 2 "}},[n("div",{staticClass:"handle"},[n("svg",{staticClass:"handle__arrow handle__arrow--l feather feather-chevron-left",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("polyline",{attrs:{points:"15 18 9 12 15 6"}})]),e._v(" "),n("svg",{staticClass:"handle__arrow handle__arrow--r feather feather-chevron-right",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("polyline",{attrs:{points:"9 18 15 12 9 6"}})])]),e._v(" "),n("span",{staticClass:"handle-line"})]),e._v(" "),n("div",{staticClass:"compare-overlay ",style:{width:"calc("+e.compareWidth+"%)"}},[n("div",{staticClass:"compare-overlay__content",style:{width:e.width}},[e._t("second")],2)])]),e._v(" "),n("input",{staticClass:"compare__range",attrs:{type:"range",min:"0",max:"100",step:e.step,tabindex:"-1"},domProps:{value:e.compareWidth},on:{input:e.handleInput}})])},xi=[],Ci={name:"comparify",props:{value:{default:50},step:{default:".1"}},data:function(){return{width:null,compareWidth:this.value}},watch:{value:function(){this.compareWidth=this.value}},mounted:function(){var e=this;this.$nextTick((function(){e.handleResize()})),this.$emit("init")},methods:{handleInput:function(e){this.compareWidth=e.target.value,this.$emit("input",e.target.value)},handleResize:function(){var e=this.getContainerWidth();e!==this.width&&(this.width=e)},getContainerWidth:function(){return window.getComputedStyle(this.$el,null).getPropertyValue("width")}}},ji=Ci,$i=(n("f77d"),Object(H["a"])(ji,ki,xi,!1,null,null,null)),Pi=$i.exports,Si=n("5118"),Wi={name:"image-compare-window",type:"imjoy/image-compare",components:{Comparify:Pi},props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){var e=this;this.w.api.on("resize",(function(){Object(Si["setTimeout"])((function(){e.$refs.compare&&e.$refs.compare.handleResize()}),0)})),this.w.api.on("refresh",(function(){Object(Si["setTimeout"])((function(){e.$refs.compare&&e.$refs.compare.handleResize()}),0)})),this.$emit("init")}},Oi=Wi,Ei=(n("2a06"),Object(H["a"])(Oi,yi,bi,!1,null,"65c7d5b8",null)),Ai=Ei.exports,Di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"terminal-window"},[e._l(this.buttons||[],(function(t){return n("md-button",{key:t.event_id,on:{click:function(n){e.button_click(t)}}},[t.icon?n("md-icon",[e._v(e._s(t.icon))]):e._e(),e._v(" "+e._s(t.label)+"\n  ")],1)})),e._v(" "),n("div",{ref:"terminal_container",staticClass:"terminal-container",style:{height:e.window_height}})],2)},Ii=[],Ui=n("59bf"),Fi=(n("7449"),n("941b")),Mi=n("c554"),zi=n("95db"),Ti=n("6a49");function Li(e,t){var n;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=this;clearTimeout(n),n=setTimeout((function(){return e.apply(s,o)}),t)}}var Ji={name:"terminal-window",type:"imjoy/terminal",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{error:!1,window_height:"500px",buttons:[]}},created:function(){},mounted:function(){var e=this;Ui["Terminal"].applyAddon(Fi),Ui["Terminal"].applyAddon(Mi),Ui["Terminal"].applyAddon(zi),Ui["Terminal"].applyAddon(Ti);var t=new Ui["Terminal"]({cursorBlink:!0,macOptionIsMeta:!0,scrollback:!0});t.open(this.$refs.terminal_container),this.term=t,this.$nextTick((function(){e.fitToscreen()})),this.w.api.on("write",(function(t){e.term.write(t)})),this.w.api.on("error",(function(t){e.error=t})),this.term.on("key",(function(t){e.w.api.emit("key",t)})),this.term.on("paste",(function(t){e.w.api.emit("paste",t)})),this.term.focus(),this.w.api.on("show_buttons",(function(t){e.buttons=t,e.$forceUpdate()}));var n=50,i=Li(this.fitToscreen,n);window.addEventListener("resize",i),document.addEventListener("orientationchange",i),this.w.api.on("resize",i),this.w.api.on("refresh",i),this.buttons=this.w.data.buttons||[],this.$emit("init")},beforeDestroy:function(){},methods:{fitToscreen:function(){var e=this;this.window_height=this.$el.clientHeight+"px",this.$forceUpdate(),this.$nextTick((function(){e.term.focus(),e.term.fit(),e.w.api.emit("fit",{cols:e.term.cols,rows:e.term.rows}),e.$forceUpdate()}))},button_click:function(e){this.w.api.emit("button_clicked",e)}}},Ri=Ji,Ni=(n("1eb5"),Object(H["a"])(Ri,Di,Ii,!1,null,"425d4a2b",null)),qi=Ni.exports,Vi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"joy-window"},[e.plugin_dialog_config?n("joy",{ref:"plugin_dialog_joy",attrs:{config:e.plugin_dialog_config,showHeader:!1,controlButtons:!1}}):e._e(),e._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(t){e.w.ok()}}},[e._v("OK")]),e._v(" "),n("md-button",{staticClass:"md-accent",on:{click:function(t){e.w.cancel()}}},[e._v("Cancel")])],1)],1)},Ki=[],Bi={name:"joy-window",type:"imjoy/joy",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{plugin_dialog_config:null}},mounted:function(){var e=this;this.w&&(this.plugin_dialog_config=this.w,this.w.get_config=function(){return e.$refs.plugin_dialog_joy.joy.get_config()}),this.$emit("init")},methods:{getConfig:function(){}}},Hi=Bi,Yi=Object(H["a"])(Hi,Vi,Ki,!1,null,null,null),Gi=Yi.exports,Zi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"schema-io"},e._l(e.ioPanels,(function(t){return n("div",{key:t.id},["form"===t.type?[t.title?n("div",{staticClass:"panel-heading"},[e._v(e._s(t.title))]):e._e(),e._v(" "),t.description?n("div",{staticStyle:{"padding-left":"1px","padding-right":"1px","padding-bottom":"10px",overflow:"auto"},domProps:{innerHTML:e._s(e.sanitizedMarked(t.description))}}):e._e(),e._v(" "),n("vue-form-generator",{attrs:{schema:t.schema,model:t.data,options:t.options}}),e._v(" "),e._l(t.buttons,(function(i){return n("md-button",{key:i.label,class:i.class,on:{click:function(n){e.onSubmit(n,i.event_id,t.data)}}},[e._v("\n        "+e._s(i.label)+"\n      ")])}))]:e._e(),e._v(" "),"vega"===t.type?[t.title?n("div",{staticClass:"panel-heading"},[e._v(e._s(t.title))]):e._e(),e._v(" "),n("div",{staticClass:"overflow-auto"},[t.description?n("div",{staticStyle:{"padding-left":"1px","padding-right":"1px","padding-bottom":"10px",overflow:"auto"},domProps:{innerHTML:e._s(e.sanitizedMarked(t.description))}}):e._e(),e._v(" "),n("vega",{ref:t.id,refInFor:!0,attrs:{schema:t.schema,options:t.options}}),e._v(" "),n("br"),e._v(" "),e._l(t.buttons,(function(i){return n("md-button",{key:i.label,class:i.class,on:{click:function(n){e.onSubmit(n,i.event_id,t.data)}}},[e._v("\n          "+e._s(i.label)+"\n        ")])}))],2)]:e._e()],2)})))},Qi=[],Xi=n("4309"),eo=n.n(Xi),to=(n("92bd"),n("037c")),no=n("7ad3");function io(e,t,n,i,o,a,s){try{var r=e[a](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(i,o)}function oo(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){io(a,i,o,s,r,"next",e)}function r(e){io(a,i,o,s,r,"throw",e)}s(void 0)}))}}o["default"].use(eo.a),o["default"].component("vega",{props:["schema","options"],mounted:function(){var e=this;Object(no["a"])(this.$el,this.schema,this.options||{actions:!1}).then((function(t){e.embed=t,e.view=t.view}))},data:function(){return{view:null,embed:null}},methods:{updateView:function(e,t){var n=to["changeset"]().insert(t);this.view.change(e,n).run()}},template:"<div></div>"});var ao={name:"schema-io-window",type:"imjoy/schema-io",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{ioPanels:[]}},mounted:function(){if(this.w.data)if(Array.isArray(this.w.data)){var e=!0,t=!1,n=void 0;try{for(var i,o=this.w.data[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.ioPanels.push(a)}}catch(s){t=!0,n=s}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}else this.ioPanels.push(this.w.data);this.$emit("init")},created:function(){var e=new Ge.a.Renderer;e.link=function(e,t,n){var i=Ge.a.Renderer.prototype.link.call(this,e,t,n);return i.replace("<a","<a target='_blank' ")},Ge.a.setOptions({renderer:e}),P.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),P.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),this.sanitizedMarked=function(e){return P.a.sanitize(Ge()(e))}},methods:{onSubmit:function(e,t,n){var i=this;return oo(c.a.mark((function o(){return c.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e.preventDefault(),i.w.api.emit(t,n);case 2:case"end":return o.stop()}}),o)})))()},append:function(e){if(Array.isArray(e)){var t=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;this.ioPanels.push(s)}}catch(r){n=!0,i=r}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}else this.ioPanels.push(e)},remove:function(e){var t=this;this.ioPanels.filter((function(n,i){n.id===e&&t.ioPanels.splice(i,1)}))},appendDataPoint:function(e,t,n){this.$refs[e][0].updateView(t,n)},getData:function(e){if(e)return this.ioPanels[e].data;var t={};for(var n in this.ioPanels)t[n]=this.ioPanels[n].data;return t}}},so=ao,ro=(n("77b0"),Object(H["a"])(so,Zi,Qi,!1,null,null,null)),lo=ro.exports,co={};for(var uo in i)co[i[uo].name]=i[uo];var mo={name:"window",components:co,props:{w:{type:Object,default:function(){return null}},withDragHandle:{type:Boolean,default:function(){return!1}},loaders:{type:Object,default:function(){return null}}},data:function(){return{componentNames:{},options_menu_open:!1}},created:function(){for(var e in co)this.componentNames[co[e].type]=co[e].name},mounted:function(){var e=this;this.w&&(this.w.$el=this.$el,this.w.api.on("refresh",(function(){e.refresh()})),this.w.api.on("focus",(function(){e.w.standalone||e.$el.scrollIntoView(!0)})),this.w.fullscreen&&this.fullScreen(this.w));var t=new hn["a"]((function(t){e.w.api.emit("resize",t[0].contentRect)}));t.observe(this.$el),setTimeout((function(){if(e.$refs["window-content"]){var t=e.$refs["window-content"],n=new hn["a"]((function(){setTimeout((function(){t.$el&&e.w.api.emit("window_size_changed",t.$el.getBoundingClientRect())}),500)}));n.observe(t.$el)}}),100)},beforeDestroy:function(){this.w.closed=!0},watch:{w:function(){var e=this;this.w.api.on("refresh",(function(){e.refresh()})),this.w.api.on("focus",(function(){e.w.standalone||e.$el.scrollIntoView(!0)})),this.w.api.on("fullscreen",(function(){e.fullScreen(e.w)})),this.w.standalone||this.$el.scrollIntoView(!0),this.w.fullscreen&&this.fullScreen(this.w)}},methods:{setAPI:function(){var e=this.$refs["window-content"];if(e)for(var t in this.w.api=this.w.api||{},e)!e.hasOwnProperty(t)||t.startsWith("$")||t.startsWith("_")||"function"!==typeof e[t]||(this.w.api[t]=e[t]);this.w.api.emit("ready")},refresh:function(){this.$forceUpdate()},close:function(e){this.$emit("close",e)},fullScreen:function(e){this.$emit("fullscreen",e)},detach:function(e){this.$emit("detach",e)},normalSize:function(e){this.$emit("normalsize",e)},duplicate:function(e){this.$emit("duplicate",e)},selectWindow:function(e,t){this.$emit("select",e,t)},printObject:function(e,t,n){console.log(e,t,n)}}},_o=mo,po=(n("c0e0"),Object(H["a"])(_o,fn,gn,!1,null,"4dd5ce1d",null)),fo=po.exports,go=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"engine-control-panel"},[n("md-menu",{attrs:{"md-size":"big","md-direction":"top-start"},on:{"md-closed":function(t){e.collapseProcesses()}}},[n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":"",disabled:!e.engineManager||0==e.engineManager.engine_factories.length&&0==e.engineManager.engines.length}},[n("md-icon",[e._v("üöÄ")]),e._v(" "),n("md-tooltip",[e._v("ImJoy Plugin Engines")])],1),e._v(" "),n("md-menu-content",{staticClass:"engine-panel"},[e._l(e.engineManager.engine_factories,(function(t){return n("md-menu-item",{key:t.name,on:{click:function(e){t.addEngine()}}},[n("md-button",{staticClass:"md-icon-button md-primary median-icon-button"},[n("md-icon",[e._v("add")])],1),e._v(" "),n("span",[e._v("Add "+e._s(t.name)+" üöÄ")])],1)})),e._v(" "),e._l(e.engineManager.engines,(function(t){return[n("md-divider",{key:t.name+"_start_divider"}),e._v(" "),t.connected&&t.getEngineStatus?n("md-menu-item",{key:t.name+t.url},[n("span",{staticClass:"md-list-item-content",staticStyle:{cursor:"pointer"},on:{click:function(n){n.stopPropagation(),t.show_processes?e.hide(t):e.expand(t)}}},[t.show_processes?n("md-icon",[e._v("remove")]):t.connected?n("md-icon",{staticClass:"md-primary"},[e._v("autorenew")]):t.connecting?n("div",{staticClass:"loading loading-lg"}):n("md-icon",[e._v("sync_disabled")]),e._v(" "),n("span",[e._v(e._s(t.name.slice(0,20)))]),e._v(" "),t.connected?n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(n){n.stopPropagation(),e.disconnectEngine(t)}}},[n("md-icon",[e._v("clear")]),n("md-tooltip",[e._v("Disconnect engine "+e._s(t.name)+"\n              ")])],1):e._e()],1)]):t.getEngineStatus?n("md-menu-item",{key:t.name,on:{click:function(e){e.stopPropagation(),t.connect(!1)}}},[n("span",{staticClass:"md-list-item-content",staticStyle:{cursor:"pointer"}},[n("md-icon",[e._v("sync_disabled")]),e._v(" "+e._s(t.name)+"\n            "),n("md-tooltip",[e._v("Connect to "+e._s(t.name)+" ")]),e._v(" "),t.connected?e._e():n("md-button",{staticClass:"md-icon-button",on:{click:function(n){n.stopPropagation(),e.removeEngine(t)}}},[n("md-icon",[e._v("delete_forever")]),e._v(" "),n("md-tooltip",[e._v("Remove engine "+e._s(t.name.slice(0,20))+"\n              ")])],1)],1)]):e._e(),e._v(" "),t.connected&&t.show_processes?[n("md-menu-item",{key:t.name+"_show_info",on:{click:function(n){e.showAbout(t)}}},[e._v("\n            ¬†¬†"),n("md-button",{staticClass:"md-icon-button"},[n("md-icon",[e._v("info")])],1),e._v("\n            About Engine\n          ")],1),e._v(" "),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.engine_status.plugin_processes,expression:"engine.engine_status.plugin_processes"}],key:t.name+"_start_terminal",on:{click:function(n){e.startTerminal(t)}}},[e._v("\n            ¬†¬†"),n("md-button",{staticClass:"md-icon-button"},[n("md-icon",[e._v("code")])],1),e._v("\n            Open terminal\n          ")],1),e._v(" "),n("md-menu-item",{key:t.name+"_remove_engine",staticClass:"md-accent",on:{click:function(n){e.removeEngine(t)}}},[e._v("\n            ¬†¬†"),n("md-button",{staticClass:"md-icon-button md-accent"},[n("md-icon",[e._v("delete_forever")])],1),e._v("Remove Engine\n          ")],1),e._v(" "),e._l(t.engine_status.plugin_processes,(function(i){return n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.engine_status.plugin_processes,expression:"engine.engine_status.plugin_processes"}],key:t.name+i.pid},[e._v("\n            ¬†¬†"),n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(n){n.stopPropagation(),e.kill(t,i)}}},[n("md-icon",[e._v("clear")])],1),e._v("\n            "+e._s(i.name)+" (#"+e._s(i.pid)+")\n          ")],1)})),e._v(" "),t.engine_status.plugin_processes?e._e():n("md-menu-item",{key:t.name+"_processes"},[n("md-button",[n("div",{staticClass:"loading loading-lg"})])],1),e._v(" "),t.engine_status.plugin_num>1?n("md-menu-item",{key:t.name+"_running_plugins",attrs:{disabled:!0}},[e._v("\n            ¬†¬†¬†¬† ¬†"),n("span",[e._v("Running Plugins: "+e._s(t.engine_status.plugin_num)+"\n            ")]),e._v(" "),n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(n){n.stopPropagation(),e.kill(t)}}},[n("md-icon",[e._v("clear")]),e._v(" "),n("md-tooltip",[e._v("Kill all the running plugins")])],1)],1):e._e(),e._v(" "),n("md-divider",{key:t.name+"_end_divider"})]:e._e()]}))],2)],1),e._v(" "),n("md-dialog",{attrs:{"md-active":e.showEngineInfoDialog,"md-click-outside-to-close":!0,"md-close-on-esc":!0},on:{"update:mdActive":function(t){e.showEngineInfoDialog=t}}},[n("md-dialog-title",[e._v("About Plugin Engine\n      "),n("md-button",{staticClass:"md-accent",staticStyle:{position:"absolute",top:"8px",right:"5px"},on:{click:function(t){e.showEngineInfoDialog=!1}}},[n("md-icon",[e._v("clear")])],1)],1),e._v(" "),e.selected_engine?n("md-dialog-content",[n("h4",[n("a",{attrs:{href:e.selected_engine.url,target:"_blank"}},[e._v("\n          "+e._s(e.selected_engine.url.replace(e.local_engine_url,"My computer ("+e.local_engine_url+")"))+"\n        ")])]),e._v(" "),n("md-field",[n("label",{attrs:{for:"connection_token"}},[e._v("Connection Token")]),e._v(" "),n("md-input",{attrs:{type:"password",name:"connection_token"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.connectEngine(e.selected_engine)}},model:{value:e.selected_engine.config.token,callback:function(t){e.$set(e.selected_engine.config,"token",t)},expression:"selected_engine.config.token"}})],1),e._v(" "),e.selected_engine.connected?n("md-button",{staticClass:"md-accent",on:{click:function(t){e.disconnectEngine(e.selected_engine)}}},[n("md-icon",[e._v("sync_disabled")]),e._v("Disconnect")],1):n("md-button",{staticClass:"md-primary md-raised",on:{click:function(t){e.connectEngine(e.selected_engine)}}},[n("md-icon",[e._v("sync")]),e._v(" Connect")],1),e._v(" "),n("md-button",{staticClass:"md-primary",attrs:{disabled:!e.selected_engine.connected},on:{click:function(t){e.expand(e.selected_engine)}}},[n("md-icon",[e._v("autorenew")]),e._v(" Processes\n      ")],1),e._v(" "),e.selected_engine.connected?n("md-button",{staticClass:"md-primary",attrs:{disabled:!e.selected_engine.connected},on:{click:function(t){e.startTerminal(e.selected_engine),e.showEngineInfoDialog=!1}}},[n("md-icon",[e._v("code")]),e._v(" Terminal\n      ")],1):e._e(),e._v(" "),n("md-menu",[n("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",{staticClass:"md-primary"},[e._v("more_horiz")])],1),e._v(" "),n("md-menu-content",[n("md-menu-item",{attrs:{disabled:!e.selected_engine.connected||e.show_sys_info,target:"_blank"},on:{click:function(t){t.stopPropagation(),e.show_sys_info=!0,e.hide(e.selected_engine)}}},[n("md-icon",[e._v("info")]),e._v(" System Information\n          ")],1),e._v(" "),n("md-menu-item",{attrs:{target:"_blank"},on:{click:function(t){t.stopPropagation(),e.openEngineUrl(e.selected_engine.url)}}},[n("md-icon",[e._v("launch")]),e._v(" Open Engine Site\n          ")],1),e._v(" "),e.selected_engine.connected?n("md-menu-item",{staticClass:"md-accent",on:{click:function(t){t.stopPropagation(),e.resetEngine(e.selected_engine)}}},[n("md-icon",[e._v("restore")]),e._v(" Reset\n          ")],1):e._e(),e._v(" "),n("md-menu-item",{staticClass:"md-accent",on:{click:function(t){e.removeEngine(e.selected_engine),e.showEngineInfoDialog=!1,e.selected_engine=null}}},[n("md-icon",[e._v("delete_forever")]),e._v("Remove\n          ")],1)],1)],1),e._v(" "),n("md-divider"),e._v(" "),e.selected_engine.connected&&e.selected_engine.engine_info?n("div",[n("br"),e._v(" "),n("code",[e._v("\n          ImJoy Plugin Engine (v"+e._s(e.selected_engine.engine_info.version)+",\n          api: v"+e._s(e.selected_engine.engine_info.api_version)+")\n        ")])]):e._e(),e._v(" "),e.selected_engine.connected&&e.show_sys_info&&e.selected_engine.engine_info.platform?n("div",{staticClass:"platform-info"},[n("div",[n("br"),e._v(" "),n("code",[e._v("## Platform")]),e._v(" "),n("br"),e._v(" "),e._l(e.selected_engine.engine_info.platform,(function(t,i){return n("code",{key:i},[e._v("\n            - "+e._s(i)+": "+e._s(t)+"\n            "),n("br")])}))],2),e._v(" "),e._l(e.selected_engine.engine_info.GPUs,(function(t){return n("div",{key:t.id},[n("br"),e._v(" "),n("code",[e._v("## GPU "+e._s(t.id))]),e._v(" "),n("br"),e._v(" "),e._l(t,(function(t,i){return n("code",{key:i},[e._v("- "+e._s(i)+": "+e._s(t)),n("br")])}))],2)}))],2):e._e(),e._v(" "),e.selected_engine.connected&&e.selected_engine.show_processes?n("div",[n("br"),e._v(" "),n("md-divider"),e._v(" "),n("ul",[e._l(e.selected_engine.engine_status.plugin_processes,(function(t){return n("li",{directives:[{name:"show",rawName:"v-show",value:e.selected_engine.engine_status.plugin_processes,expression:"selected_engine.engine_status.plugin_processes"}],key:t.pid},[e._v("\n            ¬†"),n("md-button",{staticClass:"md-icon-button md-accent small-icon-button",on:{click:function(n){n.stopPropagation(),e.kill(e.selected_engine,t)}}},[n("md-icon",[e._v("clear")])],1),e._v("\n            "+e._s(t.name)+" (#"+e._s(t.pid)+")\n          ")],1)})),e._v(" "),e.selected_engine.engine_status.plugin_processes?e._e():n("li",[n("md-button",[n("div",{staticClass:"loading loading-lg"})])],1),e._v(" "),e.selected_engine.engine_status.plugin_num>1?n("li",{attrs:{disabled:!0}},[n("md-button",{staticClass:"md-accent ",on:{click:function(t){t.stopPropagation(),e.kill(e.selected_engine)}}},[n("md-icon",[e._v("clear")]),e._v(" Kill All ("+e._s(e.selected_engine.engine_status.plugin_num)+"\n              Running Plugins)\n            ")],1)],1):e._e()],2)],1):e._e()],1):e._e()],1)],1)},ho=[];function vo(e,t,n,i,o,a,s){try{var r=e[a](s),l=r.value}catch(c){return void n(c)}r.done?t(l):Promise.resolve(l).then(i,o)}function wo(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){vo(a,i,o,s,r,"next",e)}function r(e){vo(a,i,o,s,r,"throw",e)}s(void 0)}))}}var yo={name:"engine-control-panel",props:["engineManager"],data:function(){return{engine_url:"",local_engine_url:"http://127.0.0.1:9527",engine_url_list:[],connection_token:null,showEngineInfoDialog:!1,selected_engine:null,show_sys_info:!1,showAddEngineDialog:!1,url_type:"localhost"}},created:function(){this.is_mobile_or_tablet=W(),this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus},mounted:function(){this.is_mobile_or_tablet&&(this.url_type="remote",this.engine_url="")},beforeDestroy:function(){},methods:{showDialog:function(e){e.engine?(this.showAddEngineDialog=!1,this.selected_engine=e.engine,this.showEngineInfoDialog=e.show):(this.showEngineInfoDialog=!1,this.showAddEngineDialog=e.show)},forceUpdate:function(){this.$forceUpdate()},expand:function(e){this.show_sys_info=!1,e.show_processes=!0,this.$forceUpdate(),this.update(e)},hide:function(e){e.show_processes=!1,this.$forceUpdate()},update:function(e){var t=this;return wo(c.a.mark((function n(){return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.engine_status.plugin_processes=null,t.$forceUpdate(),n.next=4,e.getEngineStatus();case 4:e.engine_status=n.sent,t.$forceUpdate();case 6:case"end":return n.stop()}}),n)})))()},kill:function(e,t){var n=this;e.engine_status.plugin_processes=null,e.killPluginProcess(t).finally((function(){n.update(e)}))},collapseProcesses:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this.engineManager.engines[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.show_processes=!1}}catch(s){t=!0,n=s}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.$forceUpdate()},showAddEngine:function(){this.showAddEngineDialog=!0},hideAddEngine:function(){this.showAddEngineDialog=!1},removeEngine:function(e){var t=this;return wo(c.a.mark((function n(){var i,o;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.engineManager.getFactory(e.factory),!i){n.next=10;break}return n.next=4,i.removeEngine({name:e.name,url:e.url});case 4:if(o=n.sent,!o){n.next=8;break}return n.next=8,t.engineManager.unregister(e);case 8:n.next=11;break;case 10:throw"Engine factory not found for "+e.name;case 11:case"end":return n.stop()}}),n)})))()},connectEngine:function(e){return wo(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.connected){t.next=5;break}return e.connecting=!0,t.next=5,e.connect();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0);case 10:return t.prev=10,e.connecting=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})))()},disconnectEngine:function(e){var t=this;return wo(c.a.mark((function n(){return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.connected){n.next=4;break}return n.next=3,e.disconnect();case 3:e.connected=!1;case 4:t.$forceUpdate();case 5:case"end":return n.stop()}}),n)})))()},startTerminal:function(e){this.$emit("start-terminal",e)},showToken:function(e){this.engine_url=e.config.url,this.connection_token=e.config.token},resetEngine:function(e){e.resetEngine()},showAbout:function(e){e.about?e.about():(this.show_sys_info=!1,this.selected_engine=e,this.showEngineInfoDialog=!0)},openEngineUrl:function(e){window.open(e,"_blank")}}},bo=yo,ko=(n("32c4"),Object(H["a"])(bo,go,ho,!1,null,"16a37a3e",null)),xo=ko.exports,Co=n("9483");Object(Co["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){console.log("New content is available; please refresh.");var t=e.waiting;t.postMessage({action:"skipWaiting"})},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),o["default"].config.productionTip=!1,o["default"].use(me.a),o["default"].component("navbar",Se),o["default"].component("imjoy",G),o["default"].component("main-footer",Ie),o["default"].component("about",ne),o["default"].component("whiteboard",Le),o["default"].component("joy",Ke),o["default"].component("plugin-list",It),o["default"].component("plugin-editor",Vt),o["default"].component("plugin-icon",Zt),o["default"].component("file-item",an),o["default"].component("file-dialog",pn),o["default"].component("window",fo),o["default"].component("grid-layout",ye.a.GridLayout),o["default"].component("grid-item",ye.a.GridItem),o["default"].component("engine-control-panel",xo);var jo=function(e,t,n){n=n||"...";var i=document.createElement("div");i.innerHTML=e;var o=i.textContent;return o.length>t?o.slice(0,t)+n:o};o["default"].filter("truncate",jo),new o["default"]({el:"#imjoy-app",router:de,data:{store:ke,router:de},template:"<App/>",components:{App:ve}})},5865:function(e,t,n){"use strict";var i=n("6ac7"),o=n.n(i);o.a},"58d1":function(e,t,n){"use strict";var i=n("0b45"),o=n.n(i);o.a},"5c73":function(e,t,n){},"5e87":function(e,t,n){},"651e":function(e,t,n){},"6ac7":function(e,t,n){},"6cd1":function(e,t,n){"use strict";var i=n("0378"),o=n.n(i);o.a},"77b0":function(e,t,n){"use strict";var i=n("d25f"),o=n.n(i);o.a},"7c95":function(e,t,n){},8307:function(e,t,n){"use strict";var i=n("4003"),o=n.n(i);o.a},"864c":function(e,t,n){},"8c37":function(e,t,n){},9224:function(e){e.exports=JSON.parse('{"a":"0.10.30"}')},"96c7":function(e,t,n){},"9a0e":function(e,t,n){"use strict";var i=n("5c73"),o=n.n(i);o.a},"9efd":function(e,t,n){"use strict";var i=n("acf6"),o=n.n(i);o.a},a25d:function(e,t,n){},a4ec:function(e,t){e.exports='<docs lang="markdown">\n[TODO: write documentation for this plugin.]\n</docs>\n\n<config lang="json">\n{\n  "name": "Untitled Plugin",\n  "type": "web-python",\n  "version": "0.1.0",\n  "description": "[TODO: describe this plugin with one sentence.]",\n  "tags": [],\n  "ui": "",\n  "cover": "",\n  "inputs": null,\n  "outputs": null,\n  "flags": [],\n  "icon": "extension",\n  "api_version": "0.1.7",\n  "env": "",\n  "permissions": [],\n  "requirements": [],\n  "dependencies": []\n}\n</config>\n\n<script lang="python">\nfrom imjoy import api\n\nclass ImJoyPlugin():\n    def setup(self):\n        api.log(\'initialized\')\n\n    def run(self, ctx):\n        api.alert(\'hello world.\')\n\napi.export(ImJoyPlugin())\n<\/script>\n'},a6c7:function(e,t,n){"use strict";var i=n("864c"),o=n.n(i);o.a},acf6:function(e,t,n){},b109:function(e,t,n){},be73:function(e,t,n){},c0e0:function(e,t,n){"use strict";var i=n("96c7"),o=n.n(i);o.a},c1014:function(e,t,n){"use strict";var i=n("7c95"),o=n.n(i);o.a},ca41:function(e,t){e.exports='<docs lang="markdown">\n[TODO: write documentation for this plugin.]\n</docs>\n\n<config lang="json">\n{\n  "name": "Untitled Plugin",\n  "type": "window",\n  "tags": [],\n  "ui": "",\n  "version": "0.1.0",\n  "cover": "",\n  "description": "[TODO: describe this plugin with one sentence.]",\n  "icon": "extension",\n  "inputs": null,\n  "outputs": null,\n  "api_version": "0.1.7",\n  "env": "",\n  "permissions": [],\n  "requirements": [],\n  "dependencies": [],\n  "defaults": {"w": 20, "h": 10}\n}\n</config>\n\n<script lang="javascript">\nclass ImJoyPlugin {\n  async setup() {\n    api.log(\'initialized\')\n  }\n\n  async run(ctx) {\n\n  }\n}\n\napi.export(new ImJoyPlugin())\n<\/script>\n\n<window lang="html">\n  <div>\n    <p>\n    Hello World\n    </p>\n  </div>\n</window>\n\n<style lang="css">\n\n</style>\n'},cb3a:function(e,t){e.exports='<docs>\n[TODO: write documentation for this plugin.]\n</docs>\n\n<config lang="json">\n{\n  "name": "Untitled Plugin",\n  "type": "web-worker",\n  "tags": [],\n  "ui": "",\n  "version": "0.1.0",\n  "cover": "",\n  "description": "[TODO: describe this plugin with one sentence.]",\n  "icon": "extension",\n  "inputs": null,\n  "outputs": null,\n  "api_version": "0.1.7",\n  "env": "",\n  "permissions": [],\n  "requirements": [],\n  "dependencies": []\n}\n</config>\n\n<script lang="javascript">\nclass ImJoyPlugin {\n  async setup() {\n    api.log(\'initialized\')\n  }\n\n  async run(ctx) {\n    api.alert(\'hello world.\')\n  }\n}\n\napi.export(new ImJoyPlugin())\n<\/script>\n'},ceea:function(e,t,n){"use strict";var i=n("d5c3"),o=n.n(i);o.a},d25f:function(e,t,n){},d5c3:function(e,t,n){},d7ab:function(e,t,n){"use strict";var i=n("8c37"),o=n.n(i);o.a},e077:function(e,t,n){},e784:function(e,t,n){},e7841:function(e,t,n){"use strict";var i=n("1246"),o=n.n(i);o.a},edce:function(e,t,n){},f77d:function(e,t,n){"use strict";var i=n("e784"),o=n.n(i);o.a},f94b:function(e,t,n){"use strict";var i=n("e077"),o=n.n(i);o.a}});
//# sourceMappingURL=app.e209da1b.js.map