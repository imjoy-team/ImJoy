<config>
{
  "name": "Python Demo Plugin",
  "mode": "pyworker",
  "version": "0.1.0",
  "api_version": "0.1.1",
  "createdAt": "Mon Jun 26 2018 15:45:30",
  "url": "/pythonDemoPlugin.html",
  "description": "A plugin for demonstrate python plugin.",
  "tags": ["demo", "op"],
  "ui": "run python plugin",
  "inputs": null,
  "outputs": null,
  "icon": null,
  "env": null,
  "requirements": ["numpy"],
  "cmd": "python",
  "dependencies": []
}
</config>

<script lang="python">
import numpy as np

class PythonPlugin():
  def setup(self):
    self.count = 0

    api.register({
      "name": "op with option",
      "type": "demo/python_op",
      "tags": ["demo", "op"],
      "inputs": None,
      "outputs": None,
      "ui": "select {id:'op_option', type:'choose', options:['option1', 'option2'], placeholder: 'option1'}",
    })
    print('initialized from python')

  def run(self, my):
    if my['op']['type'] == 'demo/python_op':
      print('run python_op: ' + my['config']['op_option'])
    else:
      print('hello world: ' + str(self.count))

    print(my['variables'])

    self.count += 1
    my['data']['array'] = np.zeros(10) * self.count
    return my

api.export(PythonPlugin())
</script>
